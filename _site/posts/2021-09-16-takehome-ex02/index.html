<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ad0000; } /* Alert */
code span.an { color: #5e5e5e; } /* Annotation */
code span.at { color: #20794d; } /* Attribute */
code span.bn { color: #ad0000; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007ba5; } /* ControlFlow */
code span.ch { color: #20794d; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #5e5e5e; } /* Comment */
code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
code span.dt { color: #ad0000; } /* DataType */
code span.dv { color: #ad0000; } /* DecVal */
code span.er { color: #ad0000; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #ad0000; } /* Float */
code span.fu { color: #4758ab; } /* Function */
code span.im { } /* Import */
code span.in { color: #5e5e5e; } /* Information */
code span.kw { color: #007ba5; } /* Keyword */
code span.op { color: #5e5e5e; } /* Operator */
code span.ot { color: #007ba5; } /* Other */
code span.pp { color: #ad0000; } /* Preprocessor */
code span.sc { color: #20794d; } /* SpecialChar */
code span.ss { color: #20794d; } /* SpecialString */
code span.st { color: #20794d; } /* String */
code span.va { color: #111111; } /* Variable */
code span.vs { color: #20794d; } /* VerbatimString */
code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
</style>

  <!--radix_placeholder_meta_tags-->
<title>IS415 blog: Take Home Exercise 02</title>

<meta property="description" itemprop="description" content="Analysing and Visualising the distribution of Airbnb listings in 2019 and 2021, and how Covid-19 affected the distribution."/>


<!--  https://schema.org/Article -->
<meta property="article:published" itemprop="datePublished" content="2021-09-16"/>
<meta property="article:created" itemprop="dateCreated" content="2021-09-16"/>
<meta name="article:author" content="Kwek Yi Chen"/>

<!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
<meta property="og:title" content="IS415 blog: Take Home Exercise 02"/>
<meta property="og:type" content="article"/>
<meta property="og:description" content="Analysing and Visualising the distribution of Airbnb listings in 2019 and 2021, and how Covid-19 affected the distribution."/>
<meta property="og:locale" content="en_US"/>
<meta property="og:site_name" content="IS415 blog"/>

<!--  https://dev.twitter.com/cards/types/summary -->
<meta property="twitter:card" content="summary"/>
<meta property="twitter:title" content="IS415 blog: Take Home Exercise 02"/>
<meta property="twitter:description" content="Analysing and Visualising the distribution of Airbnb listings in 2019 and 2021, and how Covid-19 affected the distribution."/>

<!--/radix_placeholder_meta_tags-->
  <!--radix_placeholder_rmarkdown_metadata-->

<script type="text/json" id="radix-rmarkdown-metadata">
{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","description","author","date","output"]}},"value":[{"type":"character","attributes":{},"value":["Take Home Exercise 02"]},{"type":"character","attributes":{},"value":["Analysing and Visualising the distribution of Airbnb listings in 2019 and 2021, and how Covid-19 affected the distribution."]},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","url"]}},"value":[{"type":"character","attributes":{},"value":["Kwek Yi Chen"]},{"type":"character","attributes":{},"value":["https://example.com/kwekyichen"]}]}]},{"type":"character","attributes":{},"value":["09-16-2021"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["self_contained","toc","toc_float","number_sections","code_folding"]}},"value":[{"type":"logical","attributes":{},"value":[false]},{"type":"logical","attributes":{},"value":[true]},{"type":"logical","attributes":{},"value":[true]},{"type":"logical","attributes":{},"value":[true]},{"type":"logical","attributes":{},"value":[true]}]}]}]}
</script>
<!--/radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-resource-manifest">
  {"type":"character","attributes":{},"value":["data/Airbnb_listing_30062019.zip","data/aspatial/hotels.csv","data/aspatial/listings19072021.csv","data/aspatial/listings30062019.csv","data/aspatial/tourism.csv","data/geospatial/CostalOutline.dbf","data/geospatial/CostalOutline.prj","data/geospatial/CostalOutline.sbn","data/geospatial/CostalOutline.sbx","data/geospatial/CostalOutline.shp","data/geospatial/CostalOutline.shx","data/geospatial/MP14_SUBZONE_WEB_PL.dbf","data/geospatial/MP14_SUBZONE_WEB_PL.prj","data/geospatial/MP14_SUBZONE_WEB_PL.sbn","data/geospatial/MP14_SUBZONE_WEB_PL.sbx","data/geospatial/MP14_SUBZONE_WEB_PL.shp","data/geospatial/MP14_SUBZONE_WEB_PL.shp.xml","data/geospatial/MP14_SUBZONE_WEB_PL.shx","data/geospatial/MRTLRTStnPtt.CPG","data/geospatial/MRTLRTStnPtt.dbf","data/geospatial/MRTLRTStnPtt.prj","data/geospatial/MRTLRTStnPtt.sbn","data/geospatial/MRTLRTStnPtt.sbx","data/geospatial/MRTLRTStnPtt.shp","data/geospatial/MRTLRTStnPtt.shx","data/OneMap_Data.zip","data/TrainStation.zip","klmap.osm","rosm.cache/osm/14_12918_8131.png","rosm.cache/osm/14_12918_8132.png","rosm.cache/osm/14_12919_8131.png","rosm.cache/osm/14_12919_8132.png","rosm.cache/osm/14_12920_8131.png","rosm.cache/osm/14_12920_8132.png","rosm.cache/osm/15_25836_16263.png","rosm.cache/osm/15_25836_16264.png","rosm.cache/osm/15_25836_16265.png","rosm.cache/osm/15_25837_16263.png","rosm.cache/osm/15_25837_16264.png","rosm.cache/osm/15_25837_16265.png","rosm.cache/osm/15_25838_16263.png","rosm.cache/osm/15_25838_16264.png","rosm.cache/osm/15_25838_16265.png","rosm.cache/osm/15_25839_16263.png","rosm.cache/osm/15_25839_16264.png","rosm.cache/osm/15_25839_16265.png","rosm.cache/osm/19_412995_260663.png","rosm.cache/osm/19_412996_260663.png","takehome-ex02_files/anchor-4.2.2/anchor.min.js","takehome-ex02_files/bowser-1.9.3/bowser.min.js","takehome-ex02_files/distill-2.2.21/template.v2.js","takehome-ex02_files/figure-html5/unnamed-chunk-100-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-101-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-103-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-104-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-105-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-106-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-107-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-108-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-109-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-110-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-112-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-113-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-115-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-116-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-118-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-119-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-121-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-122-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-124-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-126-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-127-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-129-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-130-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-131-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-132-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-133-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-134-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-135-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-136-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-137-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-138-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-146-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-147-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-148-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-149-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-159-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-160-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-161-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-162-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-163-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-164-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-165-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-18-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-23-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-24-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-25-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-26-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-27-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-28-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-29-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-3-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-30-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-34-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-4-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-5-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-56-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-57-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-58-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-59-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-6-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-60-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-61-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-62-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-63-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-64-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-65-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-66-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-7-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-70-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-70-2.png","takehome-ex02_files/figure-html5/unnamed-chunk-71-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-73-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-75-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-76-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-77-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-79-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-80-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-81-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-83-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-84-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-85-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-86-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-87-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-88-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-89-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-90-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-93-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-94-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-95-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-96-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-97-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-98-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-99-1.png","takehome-ex02_files/header-attrs-2.10/header-attrs.js","takehome-ex02_files/htmlwidgets-1.5.3/htmlwidgets.js","takehome-ex02_files/jquery-1.11.3/jquery.min.js","takehome-ex02_files/jquery-1.12.4/jquery.min.js","takehome-ex02_files/leaflet-1.3.1/images/layers-2x.png","takehome-ex02_files/leaflet-1.3.1/images/layers.png","takehome-ex02_files/leaflet-1.3.1/images/marker-icon-2x.png","takehome-ex02_files/leaflet-1.3.1/images/marker-icon.png","takehome-ex02_files/leaflet-1.3.1/images/marker-shadow.png","takehome-ex02_files/leaflet-1.3.1/leaflet.css","takehome-ex02_files/leaflet-1.3.1/leaflet.js","takehome-ex02_files/leaflet-binding-2.0.4.1/leaflet.js","takehome-ex02_files/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js","takehome-ex02_files/leaflet-providers-plugin-2.0.4.1/leaflet-providers-plugin.js","takehome-ex02_files/Leaflet.Sync-0.0.5/bower.json","takehome-ex02_files/Leaflet.Sync-0.0.5/L.Map.Sync.js","takehome-ex02_files/Leaflet.Sync-0.0.5/LICENSE","takehome-ex02_files/leafletfix-1.0.0/leafletfix.css","takehome-ex02_files/popper-2.6.0/popper.min.js","takehome-ex02_files/proj4-2.6.2/proj4.min.js","takehome-ex02_files/Proj4Leaflet-1.0.1/proj4leaflet.js","takehome-ex02_files/rstudio_leaflet-1.3.1/images/1px.png","takehome-ex02_files/rstudio_leaflet-1.3.1/rstudio_leaflet.css","takehome-ex02_files/tippy-6.2.7/tippy-bundle.umd.min.js","takehome-ex02_files/tippy-6.2.7/tippy-light-border.css","takehome-ex02_files/tippy-6.2.7/tippy.css","takehome-ex02_files/tippy-6.2.7/tippy.umd.min.js","takehome-ex02_files/webcomponents-2.0.0/webcomponents.js"]}
  </script>
  <!--radix_placeholder_navigation_in_header-->
<meta name="distill:offset" content="../.."/>

<script type="application/javascript">

  window.headroom_prevent_pin = false;

  window.document.addEventListener("DOMContentLoaded", function (event) {

    // initialize headroom for banner
    var header = $('header').get(0);
    var headerHeight = header.offsetHeight;
    var headroom = new Headroom(header, {
      tolerance: 5,
      onPin : function() {
        if (window.headroom_prevent_pin) {
          window.headroom_prevent_pin = false;
          headroom.unpin();
        }
      }
    });
    headroom.init();
    if(window.location.hash)
      headroom.unpin();
    $(header).addClass('headroom--transition');

    // offset scroll location for banner on hash change
    // (see: https://github.com/WickyNilliams/headroom.js/issues/38)
    window.addEventListener("hashchange", function(event) {
      window.scrollTo(0, window.pageYOffset - (headerHeight + 25));
    });

    // responsive menu
    $('.distill-site-header').each(function(i, val) {
      var topnav = $(this);
      var toggle = topnav.find('.nav-toggle');
      toggle.on('click', function() {
        topnav.toggleClass('responsive');
      });
    });

    // nav dropdowns
    $('.nav-dropbtn').click(function(e) {
      $(this).next('.nav-dropdown-content').toggleClass('nav-dropdown-active');
      $(this).parent().siblings('.nav-dropdown')
         .children('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $("body").click(function(e){
      $('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $(".nav-dropdown").click(function(e){
      e.stopPropagation();
    });
  });
</script>

<style type="text/css">

/* Theme (user-documented overrideables for nav appearance) */

.distill-site-nav {
  color: rgba(255, 255, 255, 0.8);
  background-color: #0F2E3D;
  font-size: 15px;
  font-weight: 300;
}

.distill-site-nav a {
  color: inherit;
  text-decoration: none;
}

.distill-site-nav a:hover {
  color: white;
}

@media print {
  .distill-site-nav {
    display: none;
  }
}

.distill-site-header {

}

.distill-site-footer {

}


/* Site Header */

.distill-site-header {
  width: 100%;
  box-sizing: border-box;
  z-index: 3;
}

.distill-site-header .nav-left {
  display: inline-block;
  margin-left: 8px;
}

@media screen and (max-width: 768px) {
  .distill-site-header .nav-left {
    margin-left: 0;
  }
}


.distill-site-header .nav-right {
  float: right;
  margin-right: 8px;
}

.distill-site-header a,
.distill-site-header .title {
  display: inline-block;
  text-align: center;
  padding: 14px 10px 14px 10px;
}

.distill-site-header .title {
  font-size: 18px;
  min-width: 150px;
}

.distill-site-header .logo {
  padding: 0;
}

.distill-site-header .logo img {
  display: none;
  max-height: 20px;
  width: auto;
  margin-bottom: -4px;
}

.distill-site-header .nav-image img {
  max-height: 18px;
  width: auto;
  display: inline-block;
  margin-bottom: -3px;
}



@media screen and (min-width: 1000px) {
  .distill-site-header .logo img {
    display: inline-block;
  }
  .distill-site-header .nav-left {
    margin-left: 20px;
  }
  .distill-site-header .nav-right {
    margin-right: 20px;
  }
  .distill-site-header .title {
    padding-left: 12px;
  }
}


.distill-site-header .nav-toggle {
  display: none;
}

.nav-dropdown {
  display: inline-block;
  position: relative;
}

.nav-dropdown .nav-dropbtn {
  border: none;
  outline: none;
  color: rgba(255, 255, 255, 0.8);
  padding: 16px 10px;
  background-color: transparent;
  font-family: inherit;
  font-size: inherit;
  font-weight: inherit;
  margin: 0;
  margin-top: 1px;
  z-index: 2;
}

.nav-dropdown-content {
  display: none;
  position: absolute;
  background-color: white;
  min-width: 200px;
  border: 1px solid rgba(0,0,0,0.15);
  border-radius: 4px;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.1);
  z-index: 1;
  margin-top: 2px;
  white-space: nowrap;
  padding-top: 4px;
  padding-bottom: 4px;
}

.nav-dropdown-content hr {
  margin-top: 4px;
  margin-bottom: 4px;
  border: none;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.nav-dropdown-active {
  display: block;
}

.nav-dropdown-content a, .nav-dropdown-content .nav-dropdown-header {
  color: black;
  padding: 6px 24px;
  text-decoration: none;
  display: block;
  text-align: left;
}

.nav-dropdown-content .nav-dropdown-header {
  display: block;
  padding: 5px 24px;
  padding-bottom: 0;
  text-transform: uppercase;
  font-size: 14px;
  color: #999999;
  white-space: nowrap;
}

.nav-dropdown:hover .nav-dropbtn {
  color: white;
}

.nav-dropdown-content a:hover {
  background-color: #ddd;
  color: black;
}

.nav-right .nav-dropdown-content {
  margin-left: -45%;
  right: 0;
}

@media screen and (max-width: 768px) {
  .distill-site-header a, .distill-site-header .nav-dropdown  {display: none;}
  .distill-site-header a.nav-toggle {
    float: right;
    display: block;
  }
  .distill-site-header .title {
    margin-left: 0;
  }
  .distill-site-header .nav-right {
    margin-right: 0;
  }
  .distill-site-header {
    overflow: hidden;
  }
  .nav-right .nav-dropdown-content {
    margin-left: 0;
  }
}


@media screen and (max-width: 768px) {
  .distill-site-header.responsive {position: relative; min-height: 500px; }
  .distill-site-header.responsive a.nav-toggle {
    position: absolute;
    right: 0;
    top: 0;
  }
  .distill-site-header.responsive a,
  .distill-site-header.responsive .nav-dropdown {
    display: block;
    text-align: left;
  }
  .distill-site-header.responsive .nav-left,
  .distill-site-header.responsive .nav-right {
    width: 100%;
  }
  .distill-site-header.responsive .nav-dropdown {float: none;}
  .distill-site-header.responsive .nav-dropdown-content {position: relative;}
  .distill-site-header.responsive .nav-dropdown .nav-dropbtn {
    display: block;
    width: 100%;
    text-align: left;
  }
}

/* Site Footer */

.distill-site-footer {
  width: 100%;
  overflow: hidden;
  box-sizing: border-box;
  z-index: 3;
  margin-top: 30px;
  padding-top: 30px;
  padding-bottom: 30px;
  text-align: center;
}

/* Headroom */

d-title {
  padding-top: 6rem;
}

@media print {
  d-title {
    padding-top: 4rem;
  }
}

.headroom {
  z-index: 1000;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
}

.headroom--transition {
  transition: all .4s ease-in-out;
}

.headroom--unpinned {
  top: -100px;
}

.headroom--pinned {
  top: 0;
}

/* adjust viewport for navbar height */
/* helps vertically center bootstrap (non-distill) content */
.min-vh-100 {
  min-height: calc(100vh - 100px) !important;
}

</style>

<script src="../../site_libs/jquery-1.11.3/jquery.min.js"></script>
<link href="../../site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet"/>
<link href="../../site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet"/>
<script src="../../site_libs/headroom-0.9.4/headroom.min.js"></script>
<script src="../../site_libs/autocomplete-0.37.1/autocomplete.min.js"></script>
<script src="../../site_libs/fuse-6.4.1/fuse.min.js"></script>

<script type="application/javascript">

function getMeta(metaName) {
  var metas = document.getElementsByTagName('meta');
  for (let i = 0; i < metas.length; i++) {
    if (metas[i].getAttribute('name') === metaName) {
      return metas[i].getAttribute('content');
    }
  }
  return '';
}

function offsetURL(url) {
  var offset = getMeta('distill:offset');
  return offset ? offset + '/' + url : url;
}

function createFuseIndex() {

  // create fuse index
  var options = {
    keys: [
      { name: 'title', weight: 20 },
      { name: 'categories', weight: 15 },
      { name: 'description', weight: 10 },
      { name: 'contents', weight: 5 },
    ],
    ignoreLocation: true,
    threshold: 0
  };
  var fuse = new window.Fuse([], options);

  // fetch the main search.json
  return fetch(offsetURL('search.json'))
    .then(function(response) {
      if (response.status == 200) {
        return response.json().then(function(json) {
          // index main articles
          json.articles.forEach(function(article) {
            fuse.add(article);
          });
          // download collections and index their articles
          return Promise.all(json.collections.map(function(collection) {
            return fetch(offsetURL(collection)).then(function(response) {
              if (response.status === 200) {
                return response.json().then(function(articles) {
                  articles.forEach(function(article) {
                    fuse.add(article);
                  });
                })
              } else {
                return Promise.reject(
                  new Error('Unexpected status from search index request: ' +
                            response.status)
                );
              }
            });
          })).then(function() {
            return fuse;
          });
        });

      } else {
        return Promise.reject(
          new Error('Unexpected status from search index request: ' +
                      response.status)
        );
      }
    });
}

window.document.addEventListener("DOMContentLoaded", function (event) {

  // get search element (bail if we don't have one)
  var searchEl = window.document.getElementById('distill-search');
  if (!searchEl)
    return;

  createFuseIndex()
    .then(function(fuse) {

      // make search box visible
      searchEl.classList.remove('hidden');

      // initialize autocomplete
      var options = {
        autoselect: true,
        hint: false,
        minLength: 2,
      };
      window.autocomplete(searchEl, options, [{
        source: function(query, callback) {
          const searchOptions = {
            isCaseSensitive: false,
            shouldSort: true,
            minMatchCharLength: 2,
            limit: 10,
          };
          var results = fuse.search(query, searchOptions);
          callback(results
            .map(function(result) { return result.item; })
          );
        },
        templates: {
          suggestion: function(suggestion) {
            var img = suggestion.preview && Object.keys(suggestion.preview).length > 0
              ? `<img src="${offsetURL(suggestion.preview)}"</img>`
              : '';
            var html = `
              <div class="search-item">
                <h3>${suggestion.title}</h3>
                <div class="search-item-description">
                  ${suggestion.description || ''}
                </div>
                <div class="search-item-preview">
                  ${img}
                </div>
              </div>
            `;
            return html;
          }
        }
      }]).on('autocomplete:selected', function(event, suggestion) {
        window.location.href = offsetURL(suggestion.path);
      });
      // remove inline display style on autocompleter (we want to
      // manage responsive display via css)
      $('.algolia-autocomplete').css("display", "");
    })
    .catch(function(error) {
      console.log(error);
    });

});

</script>

<style type="text/css">

.nav-search {
  font-size: x-small;
}

/* Algolioa Autocomplete */

.algolia-autocomplete {
  display: inline-block;
  margin-left: 10px;
  vertical-align: sub;
  background-color: white;
  color: black;
  padding: 6px;
  padding-top: 8px;
  padding-bottom: 0;
  border-radius: 6px;
  border: 1px #0F2E3D solid;
  width: 180px;
}


@media screen and (max-width: 768px) {
  .distill-site-nav .algolia-autocomplete {
    display: none;
    visibility: hidden;
  }
  .distill-site-nav.responsive .algolia-autocomplete {
    display: inline-block;
    visibility: visible;
  }
  .distill-site-nav.responsive .algolia-autocomplete .aa-dropdown-menu {
    margin-left: 0;
    width: 400px;
    max-height: 400px;
  }
}

.algolia-autocomplete .aa-input, .algolia-autocomplete .aa-hint {
  width: 90%;
  outline: none;
  border: none;
}

.algolia-autocomplete .aa-hint {
  color: #999;
}
.algolia-autocomplete .aa-dropdown-menu {
  width: 550px;
  max-height: 70vh;
  overflow-x: visible;
  overflow-y: scroll;
  padding: 5px;
  margin-top: 3px;
  margin-left: -150px;
  background-color: #fff;
  border-radius: 5px;
  border: 1px solid #999;
  border-top: none;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion {
  cursor: pointer;
  padding: 5px 4px;
  border-bottom: 1px solid #eee;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion:last-of-type {
  border-bottom: none;
  margin-bottom: 2px;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item {
  overflow: hidden;
  font-size: 0.8em;
  line-height: 1.4em;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item h3 {
  font-size: 1rem;
  margin-block-start: 0;
  margin-block-end: 5px;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-description {
  display: inline-block;
  overflow: hidden;
  height: 2.8em;
  width: 80%;
  margin-right: 4%;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview {
  display: inline-block;
  width: 15%;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img {
  height: 3em;
  width: auto;
  display: none;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img[src] {
  display: initial;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion.aa-cursor {
  background-color: #eee;
}
.algolia-autocomplete .aa-dropdown-menu .aa-suggestion em {
  font-weight: bold;
  font-style: normal;
}

</style>


<!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

<style type="text/css">

body {
  background-color: white;
}

.pandoc-table {
  width: 100%;
}

.pandoc-table>caption {
  margin-bottom: 10px;
}

.pandoc-table th:not([align]) {
  text-align: left;
}

.pagedtable-footer {
  font-size: 15px;
}

d-byline .byline {
  grid-template-columns: 2fr 2fr;
}

d-byline .byline h3 {
  margin-block-start: 1.5em;
}

d-byline .byline .authors-affiliations h3 {
  margin-block-start: 0.5em;
}

.authors-affiliations .orcid-id {
  width: 16px;
  height:16px;
  margin-left: 4px;
  margin-right: 4px;
  vertical-align: middle;
  padding-bottom: 2px;
}

d-title .dt-tags {
  margin-top: 1em;
  grid-column: text;
}

.dt-tags .dt-tag {
  text-decoration: none;
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0em 0.4em;
  margin-right: 0.5em;
  margin-bottom: 0.4em;
  font-size: 70%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

d-article table.gt_table td,
d-article table.gt_table th {
  border-bottom: none;
}

.html-widget {
  margin-bottom: 2.0em;
}

.l-screen-inset {
  padding-right: 16px;
}

.l-screen .caption {
  margin-left: 10px;
}

.shaded {
  background: rgb(247, 247, 247);
  padding-top: 20px;
  padding-bottom: 20px;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .html-widget {
  margin-bottom: 0;
  border: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .shaded-content {
  background: white;
}

.text-output {
  margin-top: 0;
  line-height: 1.5em;
}

.hidden {
  display: none !important;
}

d-article {
  padding-top: 2.5rem;
  padding-bottom: 30px;
}

d-appendix {
  padding-top: 30px;
}

d-article>p>img {
  width: 100%;
}

d-article h2 {
  margin: 1rem 0 1.5rem 0;
}

d-article h3 {
  margin-top: 1.5rem;
}

d-article iframe {
  border: 1px solid rgba(0, 0, 0, 0.1);
  margin-bottom: 2.0em;
  width: 100%;
}

/* Tweak code blocks */

d-article div.sourceCode code,
d-article pre code {
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
}

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: auto;
}

d-article div.sourceCode {
  background-color: white;
}

d-article div.sourceCode pre {
  padding-left: 10px;
  font-size: 12px;
  border-left: 2px solid rgba(0,0,0,0.1);
}

d-article pre {
  font-size: 12px;
  color: black;
  background: none;
  margin-top: 0;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

d-article pre a {
  border-bottom: none;
}

d-article pre a:hover {
  border-bottom: none;
  text-decoration: underline;
}

d-article details {
  grid-column: text;
  margin-bottom: 0.8em;
}

@media(min-width: 768px) {

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: visible !important;
}

d-article div.sourceCode pre {
  padding-left: 18px;
  font-size: 14px;
}

d-article pre {
  font-size: 14px;
}

}

figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

/* CSS for d-contents */

.d-contents {
  grid-column: text;
  color: rgba(0,0,0,0.8);
  font-size: 0.9em;
  padding-bottom: 1em;
  margin-bottom: 1em;
  padding-bottom: 0.5em;
  margin-bottom: 1em;
  padding-left: 0.25em;
  justify-self: start;
}

@media(min-width: 1000px) {
  .d-contents.d-contents-float {
    height: 0;
    grid-column-start: 1;
    grid-column-end: 4;
    justify-self: center;
    padding-right: 3em;
    padding-left: 2em;
  }
}

.d-contents nav h3 {
  font-size: 18px;
  margin-top: 0;
  margin-bottom: 1em;
}

.d-contents li {
  list-style-type: none
}

.d-contents nav > ul {
  padding-left: 0;
}

.d-contents ul {
  padding-left: 1em
}

.d-contents nav ul li {
  margin-top: 0.6em;
  margin-bottom: 0.2em;
}

.d-contents nav a {
  font-size: 13px;
  border-bottom: none;
  text-decoration: none
  color: rgba(0, 0, 0, 0.8);
}

.d-contents nav a:hover {
  text-decoration: underline solid rgba(0, 0, 0, 0.6)
}

.d-contents nav > ul > li > a {
  font-weight: 600;
}

.d-contents nav > ul > li > ul {
  font-weight: inherit;
}

.d-contents nav > ul > li > ul > li {
  margin-top: 0.2em;
}


.d-contents nav ul {
  margin-top: 0;
  margin-bottom: 0.25em;
}

.d-article-with-toc h2:nth-child(2) {
  margin-top: 0;
}


/* Figure */

.figure {
  position: relative;
  margin-bottom: 2.5em;
  margin-top: 1.5em;
}

.figure img {
  width: 100%;
}

.figure .caption {
  color: rgba(0, 0, 0, 0.6);
  font-size: 12px;
  line-height: 1.5em;
}

.figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

.figure .caption a {
  color: rgba(0, 0, 0, 0.6);
}

.figure .caption b,
.figure .caption strong, {
  font-weight: 600;
  color: rgba(0, 0, 0, 1.0);
}

/* Citations */

d-article .citation {
  color: inherit;
  cursor: inherit;
}

div.hanging-indent{
  margin-left: 1em; text-indent: -1em;
}

/* Citation hover box */

.tippy-box[data-theme~=light-border] {
  background-color: rgba(250, 250, 250, 0.95);
}

.tippy-content > p {
  margin-bottom: 0;
  padding: 2px;
}


/* Tweak 1000px media break to show more text */

@media(min-width: 1000px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 16px;
  }

  .grid {
    grid-column-gap: 16px;
  }

  d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
  }
  figure .caption, .figure .caption, figure figcaption {
    font-size: 13px;
  }
}

@media(min-width: 1180px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 32px;
  }

  .grid {
    grid-column-gap: 32px;
  }
}


/* Get the citation styles for the appendix (not auto-injected on render since
   we do our own rendering of the citation appendix) */

d-appendix .citation-appendix,
.d-appendix .citation-appendix {
  font-size: 11px;
  line-height: 15px;
  border-left: 1px solid rgba(0, 0, 0, 0.1);
  padding-left: 18px;
  border: 1px solid rgba(0,0,0,0.1);
  background: rgba(0, 0, 0, 0.02);
  padding: 10px 18px;
  border-radius: 3px;
  color: rgba(150, 150, 150, 1);
  overflow: hidden;
  margin-top: -12px;
  white-space: pre-wrap;
  word-wrap: break-word;
}

/* Include appendix styles here so they can be overridden */

d-appendix {
  contain: layout style;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-top: 60px;
  margin-bottom: 0;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  color: rgba(0,0,0,0.5);
  padding-top: 60px;
  padding-bottom: 48px;
}

d-appendix h3 {
  grid-column: page-start / text-start;
  font-size: 15px;
  font-weight: 500;
  margin-top: 1em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.65);
}

d-appendix h3 + * {
  margin-top: 1em;
}

d-appendix ol {
  padding: 0 0 0 15px;
}

@media (min-width: 768px) {
  d-appendix ol {
    padding: 0 0 0 30px;
    margin-left: -30px;
  }
}

d-appendix li {
  margin-bottom: 1em;
}

d-appendix a {
  color: rgba(0, 0, 0, 0.6);
}

d-appendix > * {
  grid-column: text;
}

d-appendix > d-footnote-list,
d-appendix > d-citation-list,
d-appendix > distill-appendix {
  grid-column: screen;
}

/* Include footnote styles here so they can be overridden */

d-footnote-list {
  contain: layout style;
}

d-footnote-list > * {
  grid-column: text;
}

d-footnote-list a.footnote-backlink {
  color: rgba(0,0,0,0.3);
  padding-left: 0.5em;
}



/* Anchor.js */

.anchorjs-link {
  /*transition: all .25s linear; */
  text-decoration: none;
  border-bottom: none;
}
*:hover > .anchorjs-link {
  margin-left: -1.125em !important;
  text-decoration: none;
  border-bottom: none;
}

/* Social footer */

.social_footer {
  margin-top: 30px;
  margin-bottom: 0;
  color: rgba(0,0,0,0.67);
}

.disqus-comments {
  margin-right: 30px;
}

.disqus-comment-count {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  cursor: pointer;
}

#disqus_thread {
  margin-top: 30px;
}

.article-sharing a {
  border-bottom: none;
  margin-right: 8px;
}

.article-sharing a:hover {
  border-bottom: none;
}

.sidebar-section.subscribe {
  font-size: 12px;
  line-height: 1.6em;
}

.subscribe p {
  margin-bottom: 0.5em;
}


.article-footer .subscribe {
  font-size: 15px;
  margin-top: 45px;
}


.sidebar-section.custom {
  font-size: 12px;
  line-height: 1.6em;
}

.custom p {
  margin-bottom: 0.5em;
}

/* Styles for listing layout (hide title) */
.layout-listing d-title, .layout-listing .d-title {
  display: none;
}

/* Styles for posts lists (not auto-injected) */


.posts-with-sidebar {
  padding-left: 45px;
  padding-right: 45px;
}

.posts-list .description h2,
.posts-list .description p {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
}

.posts-list .description h2 {
  font-weight: 700;
  border-bottom: none;
  padding-bottom: 0;
}

.posts-list h2.post-tag {
  border-bottom: 1px solid rgba(0, 0, 0, 0.2);
  padding-bottom: 12px;
}
.posts-list {
  margin-top: 60px;
  margin-bottom: 24px;
}

.posts-list .post-preview {
  text-decoration: none;
  overflow: hidden;
  display: block;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  padding: 24px 0;
}

.post-preview-last {
  border-bottom: none !important;
}

.posts-list .posts-list-caption {
  grid-column: screen;
  font-weight: 400;
}

.posts-list .post-preview h2 {
  margin: 0 0 6px 0;
  line-height: 1.2em;
  font-style: normal;
  font-size: 24px;
}

.posts-list .post-preview p {
  margin: 0 0 12px 0;
  line-height: 1.4em;
  font-size: 16px;
}

.posts-list .post-preview .thumbnail {
  box-sizing: border-box;
  margin-bottom: 24px;
  position: relative;
  max-width: 500px;
}
.posts-list .post-preview img {
  width: 100%;
  display: block;
}

.posts-list .metadata {
  font-size: 12px;
  line-height: 1.4em;
  margin-bottom: 18px;
}

.posts-list .metadata > * {
  display: inline-block;
}

.posts-list .metadata .publishedDate {
  margin-right: 2em;
}

.posts-list .metadata .dt-authors {
  display: block;
  margin-top: 0.3em;
  margin-right: 2em;
}

.posts-list .dt-tags {
  display: block;
  line-height: 1em;
}

.posts-list .dt-tags .dt-tag {
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0.3em 0.4em;
  margin-right: 0.2em;
  margin-bottom: 0.4em;
  font-size: 60%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

.posts-list img {
  opacity: 1;
}

.posts-list img[data-src] {
  opacity: 0;
}

.posts-more {
  clear: both;
}


.posts-sidebar {
  font-size: 16px;
}

.posts-sidebar h3 {
  font-size: 16px;
  margin-top: 0;
  margin-bottom: 0.5em;
  font-weight: 400;
  text-transform: uppercase;
}

.sidebar-section {
  margin-bottom: 30px;
}

.categories ul {
  list-style-type: none;
  margin: 0;
  padding: 0;
}

.categories li {
  color: rgba(0, 0, 0, 0.8);
  margin-bottom: 0;
}

.categories li>a {
  border-bottom: none;
}

.categories li>a:hover {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
}

.categories .active {
  font-weight: 600;
}

.categories .category-count {
  color: rgba(0, 0, 0, 0.4);
}


@media(min-width: 768px) {
  .posts-list .post-preview h2 {
    font-size: 26px;
  }
  .posts-list .post-preview .thumbnail {
    float: right;
    width: 30%;
    margin-bottom: 0;
  }
  .posts-list .post-preview .description {
    float: left;
    width: 45%;
  }
  .posts-list .post-preview .metadata {
    float: left;
    width: 20%;
    margin-top: 8px;
  }
  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.5em;
    font-size: 16px;
  }
  .posts-with-sidebar .posts-list {
    float: left;
    width: 75%;
  }
  .posts-with-sidebar .posts-sidebar {
    float: right;
    width: 20%;
    margin-top: 60px;
    padding-top: 24px;
    padding-bottom: 24px;
  }
}


/* Improve display for browsers without grid (IE/Edge <= 15) */

.downlevel {
  line-height: 1.6em;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  margin: 0;
}

.downlevel .d-title {
  padding-top: 6rem;
  padding-bottom: 1.5rem;
}

.downlevel .d-title h1 {
  font-size: 50px;
  font-weight: 700;
  line-height: 1.1em;
  margin: 0 0 0.5rem;
}

.downlevel .d-title p {
  font-weight: 300;
  font-size: 1.2rem;
  line-height: 1.55em;
  margin-top: 0;
}

.downlevel .d-byline {
  padding-top: 0.8em;
  padding-bottom: 0.8em;
  font-size: 0.8rem;
  line-height: 1.8em;
}

.downlevel .section-separator {
  border: none;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
}

.downlevel .d-article {
  font-size: 1.06rem;
  line-height: 1.7em;
  padding-top: 1rem;
  padding-bottom: 2rem;
}


.downlevel .d-appendix {
  padding-left: 0;
  padding-right: 0;
  max-width: none;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.5);
  padding-top: 40px;
  padding-bottom: 48px;
}

.downlevel .footnotes ol {
  padding-left: 13px;
}

.downlevel .base-grid,
.downlevel .distill-header,
.downlevel .d-title,
.downlevel .d-abstract,
.downlevel .d-article,
.downlevel .d-appendix,
.downlevel .distill-appendix,
.downlevel .d-byline,
.downlevel .d-footnote-list,
.downlevel .d-citation-list,
.downlevel .distill-footer,
.downlevel .appendix-bottom,
.downlevel .posts-container {
  padding-left: 40px;
  padding-right: 40px;
}

@media(min-width: 768px) {
  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
  padding-left: 150px;
  padding-right: 150px;
  max-width: 900px;
}
}

.downlevel pre code {
  display: block;
  border-left: 2px solid rgba(0, 0, 0, .1);
  padding: 0 0 0 20px;
  font-size: 14px;
}

.downlevel code, .downlevel pre {
  color: black;
  background: none;
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

.downlevel .posts-list .post-preview {
  color: inherit;
}



</style>

<script type="application/javascript">

function is_downlevel_browser() {
  if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                 window.navigator.userAgent)) {
    return true;
  } else {
    return window.load_distill_framework === undefined;
  }
}

// show body when load is complete
function on_load_complete() {

  // add anchors
  if (window.anchors) {
    window.anchors.options.placement = 'left';
    window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
  }


  // set body to visible
  document.body.style.visibility = 'visible';

  // force redraw for leaflet widgets
  if (window.HTMLWidgets) {
    var maps = window.HTMLWidgets.findAll(".leaflet");
    $.each(maps, function(i, el) {
      var map = this.getMap();
      map.invalidateSize();
      map.eachLayer(function(layer) {
        if (layer instanceof L.TileLayer)
          layer.redraw();
      });
    });
  }

  // trigger 'shown' so htmlwidgets resize
  $('d-article').trigger('shown');
}

function init_distill() {

  init_common();

  // create front matter
  var front_matter = $('<d-front-matter></d-front-matter>');
  $('#distill-front-matter').wrap(front_matter);

  // create d-title
  $('.d-title').changeElementType('d-title');

  // create d-byline
  var byline = $('<d-byline></d-byline>');
  $('.d-byline').replaceWith(byline);

  // create d-article
  var article = $('<d-article></d-article>');
  $('.d-article').wrap(article).children().unwrap();

  // move posts container into article
  $('.posts-container').appendTo($('d-article'));

  // create d-appendix
  $('.d-appendix').changeElementType('d-appendix');

  // flag indicating that we have appendix items
  var appendix = $('.appendix-bottom').children('h3').length > 0;

  // replace footnotes with <d-footnote>
  $('.footnote-ref').each(function(i, val) {
    appendix = true;
    var href = $(this).attr('href');
    var id = href.replace('#', '');
    var fn = $('#' + id);
    var fn_p = $('#' + id + '>p');
    fn_p.find('.footnote-back').remove();
    var text = fn_p.html();
    var dtfn = $('<d-footnote></d-footnote>');
    dtfn.html(text);
    $(this).replaceWith(dtfn);
  });
  // remove footnotes
  $('.footnotes').remove();

  // move refs into #references-listing
  $('#references-listing').replaceWith($('#refs'));

  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    var id = $(this).attr('id');
    $('.d-contents a[href="#' + id + '"]').parent().remove();
    appendix = true;
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
  });

  // show d-appendix if we have appendix content
  $("d-appendix").css('display', appendix ? 'grid' : 'none');

  // localize layout chunks to just output
  $('.layout-chunk').each(function(i, val) {

    // capture layout
    var layout = $(this).attr('data-layout');

    // apply layout to markdown level block elements
    var elements = $(this).children().not('details, div.sourceCode, pre, script');
    elements.each(function(i, el) {
      var layout_div = $('<div class="' + layout + '"></div>');
      if (layout_div.hasClass('shaded')) {
        var shaded_content = $('<div class="shaded-content"></div>');
        $(this).wrap(shaded_content);
        $(this).parent().wrap(layout_div);
      } else {
        $(this).wrap(layout_div);
      }
    });


    // unwrap the layout-chunk div
    $(this).children().unwrap();
  });

  // remove code block used to force  highlighting css
  $('.distill-force-highlighting-css').parent().remove();

  // remove empty line numbers inserted by pandoc when using a
  // custom syntax highlighting theme
  $('code.sourceCode a:empty').remove();

  // load distill framework
  load_distill_framework();

  // wait for window.distillRunlevel == 4 to do post processing
  function distill_post_process() {

    if (!window.distillRunlevel || window.distillRunlevel < 4)
      return;

    // hide author/affiliations entirely if we have no authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;
    if (!have_authors)
      $('d-byline').addClass('hidden');

    // article with toc class
    $('.d-contents').parent().addClass('d-article-with-toc');

    // strip links that point to #
    $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

    // add orcid ids
    $('.authors-affiliations').find('.author').each(function(i, el) {
      var orcid_id = front_matter.authors[i].orcidID;
      if (orcid_id) {
        var a = $('<a></a>');
        a.attr('href', 'https://orcid.org/' + orcid_id);
        var img = $('<img></img>');
        img.addClass('orcid-id');
        img.attr('alt', 'ORCID ID');
        img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
        a.append(img);
        $(this).append(a);
      }
    });

    // hide elements of author/affiliations grid that have no value
    function hide_byline_column(caption) {
      $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
    }

    // affiliations
    var have_affiliations = false;
    for (var i = 0; i<front_matter.authors.length; ++i) {
      var author = front_matter.authors[i];
      if (author.affiliation !== "&nbsp;") {
        have_affiliations = true;
        break;
      }
    }
    if (!have_affiliations)
      $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

    // published date
    if (!front_matter.publishedDate)
      hide_byline_column("Published");

    // document object identifier
    var doi = $('d-byline').find('h3:contains("DOI")');
    var doi_p = doi.next().empty();
    if (!front_matter.doi) {
      // if we have a citation and valid citationText then link to that
      if ($('#citation').length > 0 && front_matter.citationText) {
        doi.html('Citation');
        $('<a href="#citation"></a>')
          .text(front_matter.citationText)
          .appendTo(doi_p);
      } else {
        hide_byline_column("DOI");
      }
    } else {
      $('<a></a>')
         .attr('href', "https://doi.org/" + front_matter.doi)
         .html(front_matter.doi)
         .appendTo(doi_p);
    }

     // change plural form of authors/affiliations
    if (front_matter.authors.length === 1) {
      var grid = $('.authors-affiliations');
      grid.children('h3:contains("Authors")').text('Author');
      grid.children('h3:contains("Affiliations")').text('Affiliation');
    }

    // remove d-appendix and d-footnote-list local styles
    $('d-appendix > style:first-child').remove();
    $('d-footnote-list > style:first-child').remove();

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // hoverable references
    $('span.citation[data-cites]').each(function() {
      var refHtml = $('#ref-' + $(this).attr('data-cites')).html();
      window.tippy(this, {
        allowHTML: true,
        content: refHtml,
        maxWidth: 500,
        interactive: true,
        interactiveBorder: 10,
        theme: 'light-border',
        placement: 'bottom-start'
      });
    });

    // clear polling timer
    clearInterval(tid);

    // show body now that everything is ready
    on_load_complete();
  }

  var tid = setInterval(distill_post_process, 50);
  distill_post_process();

}

function init_downlevel() {

  init_common();

   // insert hr after d-title
  $('.d-title').after($('<hr class="section-separator"/>'));

  // check if we have authors
  var front_matter = JSON.parse($("#distill-front-matter").html());
  var have_authors = front_matter.authors && front_matter.authors.length > 0;

  // manage byline/border
  if (!have_authors)
    $('.d-byline').remove();
  $('.d-byline').after($('<hr class="section-separator"/>'));
  $('.d-byline a').remove();

  // remove toc
  $('.d-contents').remove();

  // move appendix elements
  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
  });


  // inject headers into references and footnotes
  var refs_header = $('<h3></h3>');
  refs_header.text('References');
  $('#refs').prepend(refs_header);

  var footnotes_header = $('<h3></h3');
  footnotes_header.text('Footnotes');
  $('.footnotes').children('hr').first().replaceWith(footnotes_header);

  // move appendix-bottom entries to the bottom
  $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
  $('.appendix-bottom').remove();

  // remove appendix if it's empty
  if ($('.d-appendix').children().length === 0)
    $('.d-appendix').remove();

  // prepend separator above appendix
  $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

  // trim code
  $('pre>code').each(function(i, val) {
    $(this).html($.trim($(this).html()));
  });

  // move posts-container right before article
  $('.posts-container').insertBefore($('.d-article'));

  $('body').addClass('downlevel');

  on_load_complete();
}


function init_common() {

  // jquery plugin to change element types
  (function($) {
    $.fn.changeElementType = function(newType) {
      var attrs = {};

      $.each(this[0].attributes, function(idx, attr) {
        attrs[attr.nodeName] = attr.nodeValue;
      });

      this.replaceWith(function() {
        return $("<" + newType + "/>", attrs).append($(this).contents());
      });
    };
  })(jQuery);

  // prevent underline for linked images
  $('a > img').parent().css({'border-bottom' : 'none'});

  // mark non-body figures created by knitr chunks as 100% width
  $('.layout-chunk').each(function(i, val) {
    var figures = $(this).find('img, .html-widget');
    if ($(this).attr('data-layout') !== "l-body") {
      figures.css('width', '100%');
    } else {
      figures.css('max-width', '100%');
      figures.filter("[width]").each(function(i, val) {
        var fig = $(this);
        fig.css('width', fig.attr('width') + 'px');
      });

    }
  });

  // auto-append index.html to post-preview links in file: protocol
  // and in rstudio ide preview
  $('.post-preview').each(function(i, val) {
    if (window.location.protocol === "file:")
      $(this).attr('href', $(this).attr('href') + "index.html");
  });

  // get rid of index.html references in header
  if (window.location.protocol !== "file:") {
    $('.distill-site-header a[href]').each(function(i,val) {
      $(this).attr('href', $(this).attr('href').replace("index.html", "./"));
    });
  }

  // add class to pandoc style tables
  $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
  $('.kable-table').children('table').addClass('pandoc-table');

  // add figcaption style to table captions
  $('caption').parent('table').addClass("figcaption");

  // initialize posts list
  if (window.init_posts_list)
    window.init_posts_list();

  // implmement disqus comment link
  $('.disqus-comment-count').click(function() {
    window.headroom_prevent_pin = true;
    $('#disqus_thread').toggleClass('hidden');
    if (!$('#disqus_thread').hasClass('hidden')) {
      var offset = $(this).offset();
      $(window).resize();
      $('html, body').animate({
        scrollTop: offset.top - 35
      });
    }
  });
}

document.addEventListener('DOMContentLoaded', function() {
  if (is_downlevel_browser())
    init_downlevel();
  else
    window.addEventListener('WebComponentsReady', init_distill);
});

</script>

<!--/radix_placeholder_distill-->
  <script src="../../site_libs/header-attrs-2.10/header-attrs.js"></script>
  <script src="../../site_libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
  <script src="../../site_libs/jquery-1.12.4/jquery.min.js"></script>
  <link href="../../site_libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
  <script src="../../site_libs/leaflet-1.3.1/leaflet.js"></script>
  <link href="../../site_libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
  <script src="../../site_libs/proj4-2.6.2/proj4.min.js"></script>
  <script src="../../site_libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
  <link href="../../site_libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
  <script src="../../site_libs/leaflet-binding-2.0.4.1/leaflet.js"></script>
  <script src="../../site_libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
  <script src="../../site_libs/leaflet-providers-plugin-2.0.4.1/leaflet-providers-plugin.js"></script>
  <script src="../../site_libs/Leaflet.Sync-0.0.5/L.Map.Sync.js"></script>
  <script src="../../site_libs/popper-2.6.0/popper.min.js"></script>
  <link href="../../site_libs/tippy-6.2.7/tippy.css" rel="stylesheet" />
  <link href="../../site_libs/tippy-6.2.7/tippy-light-border.css" rel="stylesheet" />
  <script src="../../site_libs/tippy-6.2.7/tippy.umd.min.js"></script>
  <script src="../../site_libs/anchor-4.2.2/anchor.min.js"></script>
  <script src="../../site_libs/bowser-1.9.3/bowser.min.js"></script>
  <script src="../../site_libs/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="../../site_libs/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
<!--/radix_placeholder_site_in_header-->


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"Take Home Exercise 02","description":"Analysing and Visualising the distribution of Airbnb listings in 2019 and 2021, and how Covid-19 affected the distribution.","authors":[{"author":"Kwek Yi Chen","authorURL":"https://example.com/kwekyichen","affiliation":"&nbsp;","affiliationURL":"#","orcidID":""}],"publishedDate":"2021-09-16T00:00:00.000+08:00","citationText":"Chen, 2021"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<header class="header header--fixed" role="banner">
<nav class="distill-site-nav distill-site-header">
<div class="nav-left">
<a href="../../index.html" class="title">IS415 blog</a>
<input id="distill-search" class="nav-search hidden" type="text" placeholder="Search..."/>
</div>
<div class="nav-right">
<div class="nav-dropdown">
<button class="nav-dropbtn">
Take-Home Exercise
 
<span class="down-arrow">&#x25BE;</span>
</button>
<div class="nav-dropdown-content">
<a href="https://kwekyichen-is415.netlify.app/posts/2021-09-06-takehome-ex01/">Take-home Exercise 1</a>
<a href="https://kwekyichen-is415.netlify.app/posts/2021-09-16-takehome-ex02/">Take-home Exercise 2</a>
</div>
</div>
<div class="nav-dropdown">
<button class="nav-dropbtn">
In-class Exercise
 
<span class="down-arrow">&#x25BE;</span>
</button>
<div class="nav-dropdown-content">
<a href="https://kwekyichen-is415.netlify.app/posts/2021-08-23-in-class-exercise-2/">In-class Exercise 2</a>
<a href="https://kwekyichen-is415.netlify.app/posts/2021-08-30-in-class-exercise-3/">In-class Exercise 3</a>
<a href="https://kwekyichen-is415.netlify.app/posts/2021-09-06-in-class-exercise-4/">In-class Exercise 4</a>
<a href="https://kwekyichen-is415.netlify.app/posts/2021-09-13-in-class-exercise-5/">In-class Exercise 5</a>
<a href="https://kwekyichen-is415.netlify.app/posts/2021-09-20-in-class-exercise-6/">In-class Exercise 6</a>
</div>
</div>
<div class="nav-dropdown">
<button class="nav-dropbtn">
Hands-on Exercise
 
<span class="down-arrow">&#x25BE;</span>
</button>
<div class="nav-dropdown-content">
<a href="https://kwekyichen-is415.netlify.app/posts/2021-08-30-hands-onex02/">Hands-on Exercise 2</a>
<a href="https://kwekyichen-is415.netlify.app/posts/2021-08-30-hands-onex03/">Hands-on Exercise 3</a>
<a href="https://kwekyichen-is415.netlify.app/posts/2021-09-05-hands-onex04/">Hands-on Exercise 4</a>
<a href="https://kwekyichen-is415.netlify.app/posts/2021-09-19-hands-onex05/">Hands-on Exercise 5</a>
<a href="https://kwekyichen-is415.netlify.app/posts/2021-09-18-hands-onex06/">Hands-on Exercise 6</a>
</div>
</div>
<a href="../../about.html">About</a>
<a href="javascript:void(0);" class="nav-toggle">&#9776;</a>
</div>
</nav>
</header>
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>Take Home Exercise 02</h1>
<!--radix_placeholder_categories-->
<!--/radix_placeholder_categories-->
<p><p>Analysing and Visualising the distribution of Airbnb listings in 2019 and 2021, and how Covid-19 affected the distribution.</p></p>
</div>

<div class="d-byline">
  Kwek Yi Chen <a href="https://example.com/kwekyichen" class="uri">https://example.com/kwekyichen</a> 
  
<br/>09-16-2021
</div>

<div class="d-article">
<div class="d-contents d-contents-float">
<nav class="l-text toc figcaption" id="TOC">
<h3>Contents</h3>
<ul>
<li><a href="#introduction">1 Introduction</a></li>
<li><a href="#data">2 Data</a></li>
<li><a href="#setting-up-the-environment">3 Setting Up the Environment</a></li>
<li><a href="#spatial-data-wrangling">4 Spatial Data Wrangling</a>
<ul>
<li><a href="#importing-geospatial-data">4.1 Importing Geospatial Data</a>
<ul>
<li><a href="#mrtlrt">4.1.1 MrtLrt</a></li>
<li><a href="#costaloutline">4.1.2 CostalOutline</a></li>
<li><a href="#mpsz">4.1.3 MPSZ</a></li>
</ul></li>
<li><a href="#importing-aspatial-data">4.2 Importing Aspatial Data</a>
<ul>
<li><a href="#hotel">4.2.1 Hotel</a></li>
<li><a href="#tourism">4.2.2 Tourism</a></li>
<li><a href="#airbnb0619">4.2.3 Airbnb0619</a></li>
<li><a href="#airbnb0721">4.2.4 Airbnb0721</a></li>
</ul></li>
<li><a href="#geospatial-data-wrangling">4.3 Geospatial Data wrangling</a>
<ul>
<li><a href="#converting-sf-data-frames-to-sps-spatial-class">4.3.1 Converting sf data frames to sps Spatial* class</a></li>
<li><a href="#converting-the-spatial-class-into-generic-sp-format">4.3.2 Converting the Spatial* class into generic sp format</a></li>
<li><a href="#converting-the-generic-sp-format-into-spatstats-ppp-format">4.3.3 Converting the generic sp format into spatstats ppp format</a></li>
<li><a href="#handling-duplicates-in-ppp-object">4.3.4 Handling duplicates in ppp object</a></li>
<li><a href="#create-owin-objects">4.3.5 Create owin objects</a></li>
<li><a href="#combining-point-events-object-and-owin-object">4.3.6 Combining point events object and owin object</a></li>
</ul></li>
</ul></li>
<li><a href="#section-a-airbnb-distribution-in-2019">5 Section A: Airbnb Distribution in 2019</a>
<ul>
<li><a href="#exploratory-spatial-data-analysis">5.1 Exploratory Spatial Data Analysis</a>
<ul>
<li><a href="#kernel-density-maps">5.1.1 Kernel density maps</a></li>
</ul></li>
<li><a href="#second-order-spatial-point-patterns-analysis">5.2 Second-order Spatial Point Patterns Analysis</a>
<ul>
<li><a href="#nearest-neighbour-analysis">5.2.1 Nearest Neighbour Analysis</a></li>
<li><a href="#g-function">5.2.2 G-FUNCTION</a></li>
<li><a href="#f-function">5.2.3 F-FUNCTION</a></li>
<li><a href="#l-function">5.2.4 L-FUNCTION</a></li>
</ul></li>
</ul></li>
<li><a href="#section-b-impact-of-covid-19">6 Section B: Impact of COVID-19</a>
<ul>
<li><a href="#exploratory-spatial-data-analysis-1">6.1 Exploratory Spatial Data Analysis</a>
<ul>
<li><a href="#kernel-density-maps-1">6.1.1 Kernel density maps</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
</div>
<h1 id="introduction">1 Introduction</h1>
<p>Singapore is one of the global city that has yet to legalise short-term rentals offered by platforms such as Airbnb. However, there are data sets of Airbnb in Singapore, and they can be found from the Inside Airbnb website (<a href="http://insideairbnb.com/about.html" class="uri">http://insideairbnb.com/about.html</a>). Hence, we are interested to analyse Airbnb in Singapore.</p>
<p>This analysis consist of two sections:</p>
<ol type="1">
<li><p>Section A: Airbnb Distribution in 2019</p></li>
<li><p>Section B: Impact of COVID-19</p></li>
</ol>
<h1 id="data">2 Data</h1>
<ul>
<li>Airbnb Listings (June 2019 &amp; July 2021) is the Airbnb Listing in Singapore for the year 2019 and 2021. It is in csv format, and can be taken from <a href="http://insideairbnb.com/get-the-data.html" class="uri">http://insideairbnb.com/get-the-data.html</a></li>
<li>Hotels data is the list of hotels in Singapore. It is in csv format, and can be extracted from SLA OneMap Service using onemapsapi.</li>
<li>Tourist Attractions data is the list of tourist attractions in Singapore. It is in csv format, and can be extracted from SLA OneMap Service using onemapsapi.</li>
<li>MrtLrtStnPtt contains all the Mrt and Lrt stations in Singapore. It is in ESRI shapefile format, and can be taken from <a href="https://datamall.lta.gov.sg/" class="uri">https://datamall.lta.gov.sg/</a></li>
<li>MP14_SUBZONE_WEB_PL is URA 2014 Master Plan Planning Subzone boundary data. It is in ESRI shapefile format, and can be taken from <a href="https://www.data.gov.sg/" class="uri">https://www.data.gov.sg/</a>.</li>
<li>CostalOutline is the national boundary of Singapore. It is in ESRI shapefile format, and can taken from SLA website.</li>
</ul>
<h1 id="setting-up-the-environment">3 Setting Up the Environment</h1>
<p>The following code chunk install the following packages:</p>
<ul>
<li>maptools to convert Spatial objects into ppp format</li>
<li>sf to handle geospatial data</li>
<li>raster to convert image output generate by spatstat into raster format.</li>
<li>spatstat to perform 1st and 2nd-order spatial point patterns analysis and derive kernel density estimation (KDE) layer</li>
<li>tmap to create choropleth maps</li>
<li>tidyr to tidy messy data</li>
<li>readr to import csv</li>
<li>osmdata to get bounding box of a given location name</li>
<li>tmaptools to read open street map data</li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>packages</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>'maptools'</span>, <span class='st'>'sf'</span>, <span class='st'>'raster'</span>,<span class='st'>'spatstat'</span>, <span class='st'>'tmap'</span>, <span class='st'>'tidyr'</span>, <span class='st'>'readr'</span>, <span class='st'>'osmdata'</span>, <span class='st'>'tmaptools'</span><span class='op'>)</span>
<span class='kw'>for</span> <span class='op'>(</span><span class='va'>p</span> <span class='kw'>in</span> <span class='va'>packages</span><span class='op'>)</span><span class='op'>{</span>
  <span class='kw'>if</span><span class='op'>(</span><span class='op'>!</span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>require</a></span><span class='op'>(</span><span class='va'>p</span>, character.only <span class='op'>=</span> <span class='cn'>T</span><span class='op'>)</span><span class='op'>)</span><span class='op'>{</span>
    <span class='fu'><a href='https://rdrr.io/r/utils/install.packages.html'>install.packages</a></span><span class='op'>(</span><span class='va'>p</span><span class='op'>)</span>
  <span class='op'>}</span>
  <span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'>p</span>,character.only <span class='op'>=</span> <span class='cn'>T</span><span class='op'>)</span>
<span class='op'>}</span>
</code></pre>
</div>
</details>
</div>
<h1 id="spatial-data-wrangling">4 Spatial Data Wrangling</h1>
<h2 id="importing-geospatial-data">4.1 Importing Geospatial Data</h2>
<h3 id="mrtlrt">4.1.1 MrtLrt</h3>
<h4 id="importing">4.1.1.1 Importing</h4>
<p>The following code uses st_read function of sf package to import MrtLrt geospatial data sets.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>mrtlrt_sf</span> <span class='op'>&lt;-</span> <span class='fu'>st_read</span><span class='op'>(</span>dsn <span class='op'>=</span> <span class='st'>"data/geospatial"</span>, layer<span class='op'>=</span><span class='st'>"MRTLRTStnPtt"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>Reading layer `MRTLRTStnPtt&#39; from data source 
  `C:\kwekyichen\IS415_blog\_posts\2021-09-16-takehome-ex02\data\geospatial&#39; 
  using driver `ESRI Shapefile&#39;
Simple feature collection with 185 features and 3 fields
Geometry type: POINT
Dimension:     XY
Bounding box:  xmin: 6138.311 ymin: 27555.06 xmax: 45254.86 ymax: 47854.2
Projected CRS: SVY21</code></pre>
</div>
<p>The MrtLrt data have 185 features with 3 fields. The projected CRS is SVY21. The geometry type is point.</p>
<h4 id="check-crs">4.1.1.2 Check CRS</h4>
<p>Next, we use st_crs function of sf package to check the CRS.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>st_crs</span><span class='op'>(</span><span class='va'>mrtlrt_sf</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>Coordinate Reference System:
  User input: SVY21 
  wkt:
PROJCRS[&quot;SVY21&quot;,
    BASEGEOGCRS[&quot;SVY21[WGS84]&quot;,
        DATUM[&quot;World Geodetic System 1984&quot;,
            ELLIPSOID[&quot;WGS 84&quot;,6378137,298.257223563,
                LENGTHUNIT[&quot;metre&quot;,1]],
            ID[&quot;EPSG&quot;,6326]],
        PRIMEM[&quot;Greenwich&quot;,0,
            ANGLEUNIT[&quot;Degree&quot;,0.0174532925199433]]],
    CONVERSION[&quot;unnamed&quot;,
        METHOD[&quot;Transverse Mercator&quot;,
            ID[&quot;EPSG&quot;,9807]],
        PARAMETER[&quot;Latitude of natural origin&quot;,1.36666666666667,
            ANGLEUNIT[&quot;Degree&quot;,0.0174532925199433],
            ID[&quot;EPSG&quot;,8801]],
        PARAMETER[&quot;Longitude of natural origin&quot;,103.833333333333,
            ANGLEUNIT[&quot;Degree&quot;,0.0174532925199433],
            ID[&quot;EPSG&quot;,8802]],
        PARAMETER[&quot;Scale factor at natural origin&quot;,1,
            SCALEUNIT[&quot;unity&quot;,1],
            ID[&quot;EPSG&quot;,8805]],
        PARAMETER[&quot;False easting&quot;,28001.642,
            LENGTHUNIT[&quot;metre&quot;,1],
            ID[&quot;EPSG&quot;,8806]],
        PARAMETER[&quot;False northing&quot;,38744.572,
            LENGTHUNIT[&quot;metre&quot;,1],
            ID[&quot;EPSG&quot;,8807]]],
    CS[Cartesian,2],
        AXIS[&quot;(E)&quot;,east,
            ORDER[1],
            LENGTHUNIT[&quot;metre&quot;,1,
                ID[&quot;EPSG&quot;,9001]]],
        AXIS[&quot;(N)&quot;,north,
            ORDER[2],
            LENGTHUNIT[&quot;metre&quot;,1,
                ID[&quot;EPSG&quot;,9001]]]]</code></pre>
</div>
<p>From the result above, even though the mrtlrt_sf is projected in svy21, the last line indicates that the EPSG is 9001. It is wrong because the correct EPSG code for svy21 should be 3414.</p>
<h4 id="assign-epsg-code-to-a-simple-feature-data-frame">4.1.1.3 Assign EPSG code to a simple feature data frame</h4>
<p>The following code chunk will assign the correct EPSG code to mrtlrt_sf using st_set_crs function of sf package</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>mrtlrt_sf</span> <span class='op'>&lt;-</span> <span class='fu'>st_set_crs</span><span class='op'>(</span><span class='va'>mrtlrt_sf</span>, <span class='fl'>3414</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>Now that we have assign the correct EPSG code to mrtlrt_sf, we will check the CRS again using st_crs function of sf</p>
<h4 id="check-crs-again">4.1.1.4 Check CRS again</h4>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>st_crs</span><span class='op'>(</span><span class='va'>mrtlrt_sf</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>Coordinate Reference System:
  User input: EPSG:3414 
  wkt:
PROJCRS[&quot;SVY21 / Singapore TM&quot;,
    BASEGEOGCRS[&quot;SVY21&quot;,
        DATUM[&quot;SVY21&quot;,
            ELLIPSOID[&quot;WGS 84&quot;,6378137,298.257223563,
                LENGTHUNIT[&quot;metre&quot;,1]]],
        PRIMEM[&quot;Greenwich&quot;,0,
            ANGLEUNIT[&quot;degree&quot;,0.0174532925199433]],
        ID[&quot;EPSG&quot;,4757]],
    CONVERSION[&quot;Singapore Transverse Mercator&quot;,
        METHOD[&quot;Transverse Mercator&quot;,
            ID[&quot;EPSG&quot;,9807]],
        PARAMETER[&quot;Latitude of natural origin&quot;,1.36666666666667,
            ANGLEUNIT[&quot;degree&quot;,0.0174532925199433],
            ID[&quot;EPSG&quot;,8801]],
        PARAMETER[&quot;Longitude of natural origin&quot;,103.833333333333,
            ANGLEUNIT[&quot;degree&quot;,0.0174532925199433],
            ID[&quot;EPSG&quot;,8802]],
        PARAMETER[&quot;Scale factor at natural origin&quot;,1,
            SCALEUNIT[&quot;unity&quot;,1],
            ID[&quot;EPSG&quot;,8805]],
        PARAMETER[&quot;False easting&quot;,28001.642,
            LENGTHUNIT[&quot;metre&quot;,1],
            ID[&quot;EPSG&quot;,8806]],
        PARAMETER[&quot;False northing&quot;,38744.572,
            LENGTHUNIT[&quot;metre&quot;,1],
            ID[&quot;EPSG&quot;,8807]]],
    CS[Cartesian,2],
        AXIS[&quot;northing (N)&quot;,north,
            ORDER[1],
            LENGTHUNIT[&quot;metre&quot;,1]],
        AXIS[&quot;easting (E)&quot;,east,
            ORDER[2],
            LENGTHUNIT[&quot;metre&quot;,1]],
    USAGE[
        SCOPE[&quot;Cadastre, engineering survey, topographic mapping.&quot;],
        AREA[&quot;Singapore - onshore and offshore.&quot;],
        BBOX[1.13,103.59,1.47,104.07]],
    ID[&quot;EPSG&quot;,3414]]</code></pre>
</div>
<p>From the result above, we have successfully assign EPSG 3414 to mrtlrt_sf.</p>
<h3 id="costaloutline">4.1.2 CostalOutline</h3>
<h4 id="importing-1">4.1.2.1 Importing</h4>
<p>The following code uses st_read function of sf package to import CostalOutline geospatial data sets.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>sg_sf</span> <span class='op'>&lt;-</span> <span class='fu'>st_read</span><span class='op'>(</span>dsn <span class='op'>=</span> <span class='st'>"data/geospatial"</span>, layer<span class='op'>=</span><span class='st'>"CostalOutline"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>Reading layer `CostalOutline&#39; from data source 
  `C:\kwekyichen\IS415_blog\_posts\2021-09-16-takehome-ex02\data\geospatial&#39; 
  using driver `ESRI Shapefile&#39;
Simple feature collection with 60 features and 4 fields
Geometry type: POLYGON
Dimension:     XY
Bounding box:  xmin: 2663.926 ymin: 16357.98 xmax: 56047.79 ymax: 50244.03
Projected CRS: SVY21</code></pre>
</div>
<p>The CostalOutline data have 60 features with 4 fields. The projected CRS is SVY21. The geometry type is polygon.</p>
<h4 id="check-crs-1">4.1.2.2 Check CRS</h4>
<p>Next, we use st_crs function of sf package to check the CRS.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>st_crs</span><span class='op'>(</span><span class='va'>sg_sf</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>Coordinate Reference System:
  User input: SVY21 
  wkt:
PROJCRS[&quot;SVY21&quot;,
    BASEGEOGCRS[&quot;SVY21[WGS84]&quot;,
        DATUM[&quot;World Geodetic System 1984&quot;,
            ELLIPSOID[&quot;WGS 84&quot;,6378137,298.257223563,
                LENGTHUNIT[&quot;metre&quot;,1]],
            ID[&quot;EPSG&quot;,6326]],
        PRIMEM[&quot;Greenwich&quot;,0,
            ANGLEUNIT[&quot;Degree&quot;,0.0174532925199433]]],
    CONVERSION[&quot;unnamed&quot;,
        METHOD[&quot;Transverse Mercator&quot;,
            ID[&quot;EPSG&quot;,9807]],
        PARAMETER[&quot;Latitude of natural origin&quot;,1.36666666666667,
            ANGLEUNIT[&quot;Degree&quot;,0.0174532925199433],
            ID[&quot;EPSG&quot;,8801]],
        PARAMETER[&quot;Longitude of natural origin&quot;,103.833333333333,
            ANGLEUNIT[&quot;Degree&quot;,0.0174532925199433],
            ID[&quot;EPSG&quot;,8802]],
        PARAMETER[&quot;Scale factor at natural origin&quot;,1,
            SCALEUNIT[&quot;unity&quot;,1],
            ID[&quot;EPSG&quot;,8805]],
        PARAMETER[&quot;False easting&quot;,28001.642,
            LENGTHUNIT[&quot;metre&quot;,1],
            ID[&quot;EPSG&quot;,8806]],
        PARAMETER[&quot;False northing&quot;,38744.572,
            LENGTHUNIT[&quot;metre&quot;,1],
            ID[&quot;EPSG&quot;,8807]]],
    CS[Cartesian,2],
        AXIS[&quot;(E)&quot;,east,
            ORDER[1],
            LENGTHUNIT[&quot;metre&quot;,1,
                ID[&quot;EPSG&quot;,9001]]],
        AXIS[&quot;(N)&quot;,north,
            ORDER[2],
            LENGTHUNIT[&quot;metre&quot;,1,
                ID[&quot;EPSG&quot;,9001]]]]</code></pre>
</div>
<p>Similarly, even though the sg_sf is projected in svy21, the last line indicates that the EPSG is 9001. It is wrong because the correct EPSG code for svy21 should be 3414.</p>
<h4 id="assign-epsg-code-to-a-simple-feature-data-frame-1">4.1.2.3 Assign EPSG code to a simple feature data frame</h4>
<p>The following code chunk will assign the correct EPSG code to sg_sf using st_set_crs function of sf package</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>sg_sf</span> <span class='op'>&lt;-</span> <span class='fu'>st_set_crs</span><span class='op'>(</span><span class='va'>sg_sf</span>, <span class='fl'>3414</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>Now that we have assign the correct EPSG code to sg_sf, we will check the CRS again using st_crs function of sf</p>
<h4 id="check-crs-again-1">4.1.2.4 Check CRS again</h4>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>st_crs</span><span class='op'>(</span><span class='va'>sg_sf</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>Coordinate Reference System:
  User input: EPSG:3414 
  wkt:
PROJCRS[&quot;SVY21 / Singapore TM&quot;,
    BASEGEOGCRS[&quot;SVY21&quot;,
        DATUM[&quot;SVY21&quot;,
            ELLIPSOID[&quot;WGS 84&quot;,6378137,298.257223563,
                LENGTHUNIT[&quot;metre&quot;,1]]],
        PRIMEM[&quot;Greenwich&quot;,0,
            ANGLEUNIT[&quot;degree&quot;,0.0174532925199433]],
        ID[&quot;EPSG&quot;,4757]],
    CONVERSION[&quot;Singapore Transverse Mercator&quot;,
        METHOD[&quot;Transverse Mercator&quot;,
            ID[&quot;EPSG&quot;,9807]],
        PARAMETER[&quot;Latitude of natural origin&quot;,1.36666666666667,
            ANGLEUNIT[&quot;degree&quot;,0.0174532925199433],
            ID[&quot;EPSG&quot;,8801]],
        PARAMETER[&quot;Longitude of natural origin&quot;,103.833333333333,
            ANGLEUNIT[&quot;degree&quot;,0.0174532925199433],
            ID[&quot;EPSG&quot;,8802]],
        PARAMETER[&quot;Scale factor at natural origin&quot;,1,
            SCALEUNIT[&quot;unity&quot;,1],
            ID[&quot;EPSG&quot;,8805]],
        PARAMETER[&quot;False easting&quot;,28001.642,
            LENGTHUNIT[&quot;metre&quot;,1],
            ID[&quot;EPSG&quot;,8806]],
        PARAMETER[&quot;False northing&quot;,38744.572,
            LENGTHUNIT[&quot;metre&quot;,1],
            ID[&quot;EPSG&quot;,8807]]],
    CS[Cartesian,2],
        AXIS[&quot;northing (N)&quot;,north,
            ORDER[1],
            LENGTHUNIT[&quot;metre&quot;,1]],
        AXIS[&quot;easting (E)&quot;,east,
            ORDER[2],
            LENGTHUNIT[&quot;metre&quot;,1]],
    USAGE[
        SCOPE[&quot;Cadastre, engineering survey, topographic mapping.&quot;],
        AREA[&quot;Singapore - onshore and offshore.&quot;],
        BBOX[1.13,103.59,1.47,104.07]],
    ID[&quot;EPSG&quot;,3414]]</code></pre>
</div>
<p>We have successfully set the EPSG to 3414 for sg_sf.</p>
<h3 id="mpsz">4.1.3 MPSZ</h3>
<h4 id="importing-2">4.1.3.1 Importing</h4>
<p>The following code uses st_read function of sf package to import MP14_SUBZONE_WEB_PL geospatial data sets.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>mpsz_sf</span> <span class='op'>&lt;-</span> <span class='fu'>st_read</span><span class='op'>(</span>dsn <span class='op'>=</span> <span class='st'>"data/geospatial"</span>, layer <span class='op'>=</span> <span class='st'>"MP14_SUBZONE_WEB_PL"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>Reading layer `MP14_SUBZONE_WEB_PL&#39; from data source 
  `C:\kwekyichen\IS415_blog\_posts\2021-09-16-takehome-ex02\data\geospatial&#39; 
  using driver `ESRI Shapefile&#39;
Simple feature collection with 323 features and 15 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: 2667.538 ymin: 15748.72 xmax: 56396.44 ymax: 50256.33
Projected CRS: SVY21</code></pre>
</div>
<p>The mpsz data have 323 features with 15 fields. The projected CRS is SVY21. The geometry type is multipolygon.</p>
<h4 id="check-crs-2">4.1.3.2 Check CRS</h4>
<p>Next, we use st_crs function of sf package to check the CRS.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>st_crs</span><span class='op'>(</span><span class='va'>mpsz_sf</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>Coordinate Reference System:
  User input: SVY21 
  wkt:
PROJCRS[&quot;SVY21&quot;,
    BASEGEOGCRS[&quot;SVY21[WGS84]&quot;,
        DATUM[&quot;World Geodetic System 1984&quot;,
            ELLIPSOID[&quot;WGS 84&quot;,6378137,298.257223563,
                LENGTHUNIT[&quot;metre&quot;,1]],
            ID[&quot;EPSG&quot;,6326]],
        PRIMEM[&quot;Greenwich&quot;,0,
            ANGLEUNIT[&quot;Degree&quot;,0.0174532925199433]]],
    CONVERSION[&quot;unnamed&quot;,
        METHOD[&quot;Transverse Mercator&quot;,
            ID[&quot;EPSG&quot;,9807]],
        PARAMETER[&quot;Latitude of natural origin&quot;,1.36666666666667,
            ANGLEUNIT[&quot;Degree&quot;,0.0174532925199433],
            ID[&quot;EPSG&quot;,8801]],
        PARAMETER[&quot;Longitude of natural origin&quot;,103.833333333333,
            ANGLEUNIT[&quot;Degree&quot;,0.0174532925199433],
            ID[&quot;EPSG&quot;,8802]],
        PARAMETER[&quot;Scale factor at natural origin&quot;,1,
            SCALEUNIT[&quot;unity&quot;,1],
            ID[&quot;EPSG&quot;,8805]],
        PARAMETER[&quot;False easting&quot;,28001.642,
            LENGTHUNIT[&quot;metre&quot;,1],
            ID[&quot;EPSG&quot;,8806]],
        PARAMETER[&quot;False northing&quot;,38744.572,
            LENGTHUNIT[&quot;metre&quot;,1],
            ID[&quot;EPSG&quot;,8807]]],
    CS[Cartesian,2],
        AXIS[&quot;(E)&quot;,east,
            ORDER[1],
            LENGTHUNIT[&quot;metre&quot;,1,
                ID[&quot;EPSG&quot;,9001]]],
        AXIS[&quot;(N)&quot;,north,
            ORDER[2],
            LENGTHUNIT[&quot;metre&quot;,1,
                ID[&quot;EPSG&quot;,9001]]]]</code></pre>
</div>
<p>Similarly, even though the mpsz_sf is projected in svy21, the last line indicates that the EPSG is 9001. It is wrong because the correct EPSG code for svy21 should be 3414.</p>
<h4 id="assign-epsg-code-to-a-simple-feature-data-frame-2">4.1.3.3 Assign EPSG code to a simple feature data frame</h4>
<p>The following code chunk will assign the correct EPSG code to mpsz_sf using st_set_crs function of sf package</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>mpsz_sf</span> <span class='op'>&lt;-</span> <span class='fu'>st_set_crs</span><span class='op'>(</span><span class='va'>mpsz_sf</span>, <span class='fl'>3414</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>Now that we have assign the correct EPSG code to mpsz_sf, we will check the CRS again using st_crs function of sf</p>
<h4 id="check-crs-again-2">4.1.3.4 Check CRS again</h4>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>st_crs</span><span class='op'>(</span><span class='va'>mpsz_sf</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>Coordinate Reference System:
  User input: EPSG:3414 
  wkt:
PROJCRS[&quot;SVY21 / Singapore TM&quot;,
    BASEGEOGCRS[&quot;SVY21&quot;,
        DATUM[&quot;SVY21&quot;,
            ELLIPSOID[&quot;WGS 84&quot;,6378137,298.257223563,
                LENGTHUNIT[&quot;metre&quot;,1]]],
        PRIMEM[&quot;Greenwich&quot;,0,
            ANGLEUNIT[&quot;degree&quot;,0.0174532925199433]],
        ID[&quot;EPSG&quot;,4757]],
    CONVERSION[&quot;Singapore Transverse Mercator&quot;,
        METHOD[&quot;Transverse Mercator&quot;,
            ID[&quot;EPSG&quot;,9807]],
        PARAMETER[&quot;Latitude of natural origin&quot;,1.36666666666667,
            ANGLEUNIT[&quot;degree&quot;,0.0174532925199433],
            ID[&quot;EPSG&quot;,8801]],
        PARAMETER[&quot;Longitude of natural origin&quot;,103.833333333333,
            ANGLEUNIT[&quot;degree&quot;,0.0174532925199433],
            ID[&quot;EPSG&quot;,8802]],
        PARAMETER[&quot;Scale factor at natural origin&quot;,1,
            SCALEUNIT[&quot;unity&quot;,1],
            ID[&quot;EPSG&quot;,8805]],
        PARAMETER[&quot;False easting&quot;,28001.642,
            LENGTHUNIT[&quot;metre&quot;,1],
            ID[&quot;EPSG&quot;,8806]],
        PARAMETER[&quot;False northing&quot;,38744.572,
            LENGTHUNIT[&quot;metre&quot;,1],
            ID[&quot;EPSG&quot;,8807]]],
    CS[Cartesian,2],
        AXIS[&quot;northing (N)&quot;,north,
            ORDER[1],
            LENGTHUNIT[&quot;metre&quot;,1]],
        AXIS[&quot;easting (E)&quot;,east,
            ORDER[2],
            LENGTHUNIT[&quot;metre&quot;,1]],
    USAGE[
        SCOPE[&quot;Cadastre, engineering survey, topographic mapping.&quot;],
        AREA[&quot;Singapore - onshore and offshore.&quot;],
        BBOX[1.13,103.59,1.47,104.07]],
    ID[&quot;EPSG&quot;,3414]]</code></pre>
</div>
<p>We have successfully assign ESPG 3414 to mpsz_sf.</p>
<h2 id="importing-aspatial-data">4.2 Importing Aspatial Data</h2>
<h3 id="hotel">4.2.1 Hotel</h3>
<h4 id="importing-3">4.2.1.1 Importing</h4>
<p>The following code uses read_csv function of readr package to import Hotel aspatial data sets.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>hotels</span> <span class='op'>&lt;-</span> <span class='fu'>read_csv</span><span class='op'>(</span><span class='st'>"data/aspatial/hotels.csv"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<h4 id="examine-the-file">4.2.1.2 Examine the file</h4>
<p>The following code uses list function of base R to examine the imported file</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='va'>hotels</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>[[1]]
# A tibble: 422 x 9
   NAME     ADDRESSPOSTALCODE ADDRESSSTREETNAME HYPERLINK   TOTALROOMS
   &lt;chr&gt;                &lt;dbl&gt; &lt;chr&gt;             &lt;chr&gt;            &lt;dbl&gt;
 1 Jayleen~             59390 25 New Bridge Ro~ jayleencla~         20
 2 JEN Sin~            238858 277 Orchard Road~ singaporeo~        499
 3 JEN Sin~            249716 1A Cuscaden Road  singaporet~        565
 4 JH HOTEL            399041 8 LORONG 10 GEYL~ anguskt@gm~         42
 5 Ji Hote~            238485 11 PENANG LANE I~ &lt;NA&gt;                81
 6 Jin Don~            399007 33 Lorong 12 Gey~ &lt;NA&gt;                33
 7 Joyfor ~            389226 135 Geylang Road  joyfor.sg@~         17
 8 JW Marr~            189763 30 Beach Road     jw.sinjw.c~        634
 9 K Hotel             399199 44 LORONG 6 GEYL~ &lt;NA&gt;                56
10 Holiday~            423371 88 EAST COAST RO~ &lt;NA&gt;               451
# ... with 412 more rows, and 4 more variables: KEEPERNAME &lt;chr&gt;,
#   Lat &lt;dbl&gt;, Lng &lt;dbl&gt;, ICON_NAME &lt;chr&gt;</code></pre>
</div>
<p>The data contains 422 rows and 9 columns. There are Lat and Lng column for coordinates. They are in decimal degree format, hence we will assume the data is wgs84.</p>
<p>We will next check if there are any NA value in Lat and Lng using is.na function of base R package.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>hotels</span><span class='op'>$</span><span class='va'>Lat</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>[1] FALSE</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>hotels</span><span class='op'>$</span><span class='va'>Lng</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>[1] FALSE</code></pre>
</div>
<p>We can confirmed that there are no NA values and we can proceed to create a simple feature data frame.</p>
<h4 id="create-simple-feature-data-frame-from-aspatial-data">4.2.1.3 Create simple feature data frame from aspatial data</h4>
<p>The following code chunk</p>
<ol type="1">
<li><p>convert hotels data into simple feature data frame using st_as_sf feature of sf package.</p></li>
<li><p>Lng and Lat column are set as the coords arguments.</p></li>
<li><p>CRS were set as 4326 since we assumed that the data is wgs84</p></li>
<li><p>st_transform function of sf package then helps to transform the newly created simple feature data frame into svy21</p></li>
<li><p>tm_shape and tm_dots function of tmap plots the transformed hotels_sf</p></li>
</ol>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>hotels_sf</span> <span class='op'>&lt;-</span> <span class='fu'>st_as_sf</span><span class='op'>(</span><span class='va'>hotels</span>,
                    coords <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Lng"</span>, 
                               <span class='st'>"Lat"</span><span class='op'>)</span>,
                    crs<span class='op'>=</span><span class='fl'>4326</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>st_transform</span><span class='op'>(</span>crs <span class='op'>=</span> <span class='fl'>3414</span><span class='op'>)</span>

<span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>hotels_sf</span><span class='op'>)</span><span class='op'>+</span>
  <span class='fu'>tm_dots</span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="takehome-ex02_files/figure-html5/unnamed-chunk-18-1.png" width="624" /></p>
</div>
<h3 id="tourism">4.2.2 Tourism</h3>
<h4 id="importing-4">4.2.2.1 Importing</h4>
<p>The following code uses read_csv function of readr package to import Tourism aspatial data sets.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>tourism</span> <span class='op'>&lt;-</span> <span class='fu'>read_csv</span><span class='op'>(</span><span class='st'>"data/aspatial/tourism.csv"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<h4 id="examine-the-file-1">4.2.2.2 Examine the file</h4>
<p>The following code uses list function of base R to examine the imported file</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='va'>tourism</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>[[1]]
# A tibble: 107 x 17
   NAME   DESCRIPTION  ADDRESSSTREETNA~ HYPERLINK  PHOTOURL  URL_PATH 
   &lt;chr&gt;  &lt;chr&gt;        &lt;chr&gt;            &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt;    
 1 China~ Experience ~ 48 Pagoda Street http://ww~ www.your~ www.your~
 2 Thian~ Beautifully~ 158 Telok Ayer ~ http://ww~ www.your~ www.your~
 3 Euras~ This engagi~ 139 Ceylon Road  http://ww~ www.your~ www.your~
 4 Shoph~ With many b~ &lt;NA&gt;             &lt;NA&gt;       www.your~ www.your~
 5 Capit~ The queen o~ 11 Stamford Road http://ww~ www.your~ www.your~
 6 Espla~ This boldly~ 1 Esplanade Dri~ http://ww~ www.your~ www.your~
 7 Garde~ The lush an~ 18 Marina Garde~ http://ww~ www.your~ www.your~
 8 The I~ Theres mor~ 180-226 Depot R~ http://ww~ &lt;NA&gt;      www.your~
 9 PARKR~ PARKROYAL o~ 3 Upper Pickeri~ http://ww~ www.your~ www.your~
10 Lasal~ How can som~ 1 McNally Street https://w~ www.your~ www.your~
# ... with 97 more rows, and 11 more variables: IMAGE_ALT_TEXT &lt;chr&gt;,
#   PHOTOCREDITS &lt;chr&gt;, LASTMODIFIED &lt;dttm&gt;, LATITUDE &lt;dbl&gt;,
#   LONGTITUDE &lt;dbl&gt;, META_DESCRIPTION &lt;chr&gt;, OPENING_HOURS &lt;chr&gt;,
#   Lat &lt;dbl&gt;, Lng &lt;dbl&gt;, ICON_NAME &lt;chr&gt;, ADDRESSPOSTALCODE &lt;dbl&gt;</code></pre>
</div>
<p>The tourism data contains 107 rows and 17 columns. There are LATITUDE and LONGTITUDE column, as well as Lat and Lng coluumn for coordinates. We will be using LATITUDE and LONGTITUDE column since they are the same. They are in decimal degree format, hence we will assume the data is wgs84.</p>
<p>We will next check if there are any NA value in LATITUDE and LONGTITUDE using is.na function of base R package.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>tourism</span><span class='op'>$</span><span class='va'>LATITUDE</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>[1] TRUE</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>tourism</span><span class='op'>$</span><span class='va'>LATITUDE</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>[1] TRUE</code></pre>
</div>
<p>There are NA values and we will need to drop them before creating a simple feature data frame.</p>
<p>The following code chunk drop rows of data as long as the LATITUDE is NA.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>tourism</span> <span class='op'>&lt;-</span> <span class='va'>tourism</span> <span class='op'>%&gt;%</span>
            <span class='fu'>drop_na</span><span class='op'>(</span><span class='st'>"LATITUDE"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<h4 id="create-simple-feature-data-frame-from-aspatial-data-1">4.2.2.3 Create simple feature data frame from aspatial data</h4>
<p>The following code chunk is similar to the previous when we convert hotels aspatial data to sf. The LONGTITUDE and LATITUDE column are set as the coords arguments.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>tourism_sf</span> <span class='op'>&lt;-</span> <span class='fu'>st_as_sf</span><span class='op'>(</span><span class='va'>tourism</span>,
                    coords <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"LONGTITUDE"</span>, 
                               <span class='st'>"LATITUDE"</span><span class='op'>)</span>,
                    crs<span class='op'>=</span><span class='fl'>4326</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>st_transform</span><span class='op'>(</span>crs <span class='op'>=</span> <span class='fl'>3414</span><span class='op'>)</span>

<span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>tourism_sf</span><span class='op'>)</span><span class='op'>+</span>
  <span class='fu'>tm_dots</span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="takehome-ex02_files/figure-html5/unnamed-chunk-24-1.png" width="624" /></p>
</div>
<h3 id="airbnb0619">4.2.3 Airbnb0619</h3>
<h4 id="importing-5">4.2.3.1 Importing</h4>
<p>The following code uses read_csv function of readr package to import Airbnb listings30062019.csv aspatial data sets.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>airbnb0619</span> <span class='op'>&lt;-</span> <span class='fu'>read_csv</span><span class='op'>(</span><span class='st'>"data/aspatial/listings30062019.csv"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<h4 id="examine-the-file-2">4.2.3.2 Examine the file</h4>
<p>The following code uses list function of base R to examine the imported file</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='va'>airbnb0619</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>[[1]]
# A tibble: 8,293 x 16
       id name        host_id host_name neighbourhood_g~ neighbourhood
    &lt;dbl&gt; &lt;chr&gt;         &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;            &lt;chr&gt;        
 1  49091 &quot;COZICOMFO~  266763 Francesca North Region     Woodlands    
 2  50646 &quot;Pleasant ~  227796 Sujatha   Central Region   Bukit Timah  
 3  56334 &quot;COZICOMFO~  266763 Francesca North Region     Woodlands    
 4  71609 &quot;Ensuite R~  367042 Belinda   East Region      Tampines     
 5  71896 &quot;B&amp;B  Room~  367042 Belinda   East Region      Tampines     
 6  71903 &quot;Room 2-ne~  367042 Belinda   East Region      Tampines     
 7  71907 &quot;3rd level~  367042 Belinda   East Region      Tampines     
 8 151547 &quot;En-suite ~  729617 Kanchuya  Central Region   Orchard      
 9 241503 &quot;Long stay~ 1017645 Bianca    East Region      Bedok        
10 241508 &quot;Long stay~ 1017645 Bianca    East Region      Bedok        
# ... with 8,283 more rows, and 10 more variables: latitude &lt;dbl&gt;,
#   longitude &lt;dbl&gt;, room_type &lt;chr&gt;, price &lt;dbl&gt;,
#   minimum_nights &lt;dbl&gt;, number_of_reviews &lt;dbl&gt;,
#   last_review &lt;date&gt;, reviews_per_month &lt;dbl&gt;,
#   calculated_host_listings_count &lt;dbl&gt;, availability_365 &lt;dbl&gt;</code></pre>
</div>
<p>The airbnb0619 data contains 8293 rows and 16 columns. There are latitude and longitude column for coordinates. They are in decimal degree format, hence we will assume the data is wgs84.</p>
<p>We will next check if there are any NA value in latitude and longitude using is.na function of base R package.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>airbnb0619</span><span class='op'>$</span><span class='va'>latitude</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>[1] FALSE</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>airbnb0619</span><span class='op'>$</span><span class='va'>longitude</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>[1] FALSE</code></pre>
</div>
<p>Since there are no NA values, we can proceed to create simple features data frame for airbnb0619</p>
<h4 id="create-simple-feature-data-frame-from-aspatial-data-2">4.2.3.3 Create simple feature data frame from aspatial data</h4>
<p>The following code chunk is similar to the previous when we convert hotels aspatial data to sf. The longitude and latitude column are set as the coords arguments.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>airbnb0619_sf</span> <span class='op'>&lt;-</span> <span class='fu'>st_as_sf</span><span class='op'>(</span><span class='va'>airbnb0619</span>,
                    coords <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"longitude"</span>, 
                               <span class='st'>"latitude"</span><span class='op'>)</span>,
                    crs<span class='op'>=</span><span class='fl'>4326</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>st_transform</span><span class='op'>(</span>crs <span class='op'>=</span> <span class='fl'>3414</span><span class='op'>)</span>

<span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>airbnb0619_sf</span><span class='op'>)</span><span class='op'>+</span>
  <span class='fu'>tm_dots</span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="takehome-ex02_files/figure-html5/unnamed-chunk-29-1.png" width="624" /></p>
</div>
<h3 id="airbnb0721">4.2.4 Airbnb0721</h3>
<h4 id="importing-6">4.2.4.1 Importing</h4>
<p>The following code uses read_csv function of readr package to import Airbnb listings19072021.csv aspatial data sets.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>airbnb0721</span> <span class='op'>&lt;-</span> <span class='fu'>read_csv</span><span class='op'>(</span><span class='st'>"data/aspatial/listings19072021.csv"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<h4 id="examine-the-file-3">4.2.4.2 Examine the file</h4>
<p>The following code uses list function of base R to examine the imported file</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='va'>airbnb0721</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>[[1]]
# A tibble: 4,252 x 16
       id name        host_id host_name neighbourhood_g~ neighbourhood
    &lt;dbl&gt; &lt;chr&gt;         &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;            &lt;chr&gt;        
 1  50646 Pleasant R~  227796 Sujatha   Central Region   Bukit Timah  
 2  71609 Ensuite Ro~  367042 Belinda   East Region      Tampines     
 3  71896 B&amp;B  Room ~  367042 Belinda   East Region      Tampines     
 4  71903 Room 2-nea~  367042 Belinda   East Region      Tampines     
 5 275343 Convenient~ 1439258 Joyce     Central Region   Bukit Merah  
 6 275344 15 mins to~ 1439258 Joyce     Central Region   Bukit Merah  
 7 294281 5 mins wal~ 1521514 Elizabeth Central Region   Newton       
 8 301247 Nice room ~ 1552002 Rahul     Central Region   Geylang      
 9 324945 20 Mins to~ 1439258 Joyce     Central Region   Bukit Merah  
10 330089 Accomo@ RE~ 1439258 Joyce     Central Region   Bukit Merah  
# ... with 4,242 more rows, and 10 more variables: latitude &lt;dbl&gt;,
#   longitude &lt;dbl&gt;, room_type &lt;chr&gt;, price &lt;dbl&gt;,
#   minimum_nights &lt;dbl&gt;, number_of_reviews &lt;dbl&gt;,
#   last_review &lt;date&gt;, reviews_per_month &lt;dbl&gt;,
#   calculated_host_listings_count &lt;dbl&gt;, availability_365 &lt;dbl&gt;</code></pre>
</div>
<p>The airbnb0721 data contains 4252 rows and 16 columns, lesser than airbnb0619. There are latitude and longitude column for coordinates. They are in decimal degree format, hence we will assume the data is wgs84.</p>
<p>We will next check if there are any NA value in latitude and longitude using is.na function of base R package.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>airbnb0721</span><span class='op'>$</span><span class='va'>latitude</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>[1] FALSE</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>airbnb0721</span><span class='op'>$</span><span class='va'>longitude</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>[1] FALSE</code></pre>
</div>
<p>We can confirm that there are no latitude and longitude with NA value.</p>
<h4 id="create-simple-feature-data-frame-from-aspatial-data-3">4.2.4.3 Create simple feature data frame from aspatial data</h4>
<p>The following code chunk is similar to the previous when we convert hotels aspatial data to sf. The longitude and latitude column are set as the coords arguments.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>airbnb0721_sf</span> <span class='op'>&lt;-</span> <span class='fu'>st_as_sf</span><span class='op'>(</span><span class='va'>airbnb0721</span>,
                    coords <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"longitude"</span>, 
                               <span class='st'>"latitude"</span><span class='op'>)</span>,
                    crs<span class='op'>=</span><span class='fl'>4326</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>st_transform</span><span class='op'>(</span>crs <span class='op'>=</span> <span class='fl'>3414</span><span class='op'>)</span>

<span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>airbnb0721_sf</span><span class='op'>)</span><span class='op'>+</span>
  <span class='fu'>tm_dots</span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="takehome-ex02_files/figure-html5/unnamed-chunk-34-1.png" width="624" /></p>
</div>
<h2 id="geospatial-data-wrangling">4.3 Geospatial Data wrangling</h2>
<p>After importing geospatial and aspatial data, we will convert the simple feature data frame to sps Spatial* class.</p>
<h3 id="converting-sf-data-frames-to-sps-spatial-class">4.3.1 Converting sf data frames to sps Spatial* class</h3>
<p>The following code chunk converts all the geospatial data from simple feature data frame to sps Spatial* class using as_Spatial functions of sf package.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>airbnb0619</span> <span class='op'>&lt;-</span> <span class='fu'>as_Spatial</span><span class='op'>(</span><span class='va'>airbnb0619_sf</span><span class='op'>)</span>
<span class='va'>airbnb0721</span> <span class='op'>&lt;-</span> <span class='fu'>as_Spatial</span><span class='op'>(</span><span class='va'>airbnb0721_sf</span><span class='op'>)</span>
<span class='va'>hotels</span> <span class='op'>&lt;-</span> <span class='fu'>as_Spatial</span><span class='op'>(</span><span class='va'>hotels_sf</span><span class='op'>)</span>
<span class='va'>tourism</span> <span class='op'>&lt;-</span> <span class='fu'>as_Spatial</span><span class='op'>(</span><span class='va'>tourism_sf</span><span class='op'>)</span>
<span class='va'>mrtlrt</span> <span class='op'>&lt;-</span> <span class='fu'>as_Spatial</span><span class='op'>(</span><span class='va'>mrtlrt_sf</span><span class='op'>)</span>
<span class='va'>sg</span> <span class='op'>&lt;-</span> <span class='fu'>as_Spatial</span><span class='op'>(</span><span class='va'>sg_sf</span><span class='op'>)</span>
<span class='va'>mpsz</span> <span class='op'>&lt;-</span> <span class='fu'>as_Spatial</span><span class='op'>(</span><span class='va'>mpsz_sf</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>Check each Spatial* class</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>airbnb0619</span>
</code></pre>
</div>
</details>
<pre><code>class       : SpatialPointsDataFrame 
features    : 8293 
extent      : 7215.566, 44098.31, 25166.35, 49226.35  (xmin, xmax, ymin, ymax)
crs         : +proj=tmerc +lat_0=1.36666666666667 +lon_0=103.833333333333 +k=1 +x_0=28001.642 +y_0=38744.572 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs 
variables   : 14
names       :       id,                                              name,   host_id,                host_name, neighbourhood_group, neighbourhood,       room_type, price, minimum_nights, number_of_reviews, last_review, reviews_per_month, calculated_host_listings_count, availability_365 
min values  :    49091,                                                 -,     23666, (Email hidden by Airbnb),      Central Region,    Ang Mo Kio, Entire home/apt,     0,              1,                 0,       15656,              0.01,                              1,                0 
max values  : 36053005, ZR2- NEW! Sunny &amp; Modern Apt 4 mins to Orchard Rd, 271165196,                   Zuzana,         West Region,        Yishun,     Shared room, 13999,           1000,               308,       18072,             12.09,                            277,              365 </code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>airbnb0721</span>
</code></pre>
</div>
</details>
<pre><code>class       : SpatialPointsDataFrame 
features    : 4252 
extent      : 7406.989, 43337.89, 25330, 48391.55  (xmin, xmax, ymin, ymax)
crs         : +proj=tmerc +lat_0=1.36666666666667 +lon_0=103.833333333333 +k=1 +x_0=28001.642 +y_0=38744.572 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs 
variables   : 14
names       :       id,                                               name,   host_id,        host_name, neighbourhood_group, neighbourhood,       room_type, price, minimum_nights, number_of_reviews, last_review, reviews_per_month, calculated_host_listings_count, availability_365 
min values  :    50646, !! CozyRoom@City Center,Little India,FarrerParkMRT,     23666, &lt;U+4F73&gt;&lt;U+4F73&gt;,      Central Region,    Ang Mo Kio, Entire home/apt,    13,              1,                 0,       15456,              0.01,                              1,                0 
max values  : 51122424,                 Zimmer nah der MRT (Downtown Line), 411376818,             Zuzu,         West Region,        Yishun,     Shared room, 13400,           1000,               370,       18826,                77,                            165,              365 </code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>hotels</span>
</code></pre>
</div>
</details>
<pre><code>class       : SpatialPointsDataFrame 
features    : 422 
extent      : 5939.241, 45334.18, 25379.44, 44562.4  (xmin, xmax, ymin, ymax)
crs         : +proj=tmerc +lat_0=1.36666666666667 +lon_0=103.833333333333 +k=1 +x_0=28001.642 +y_0=38744.572 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs 
variables   : 7
names       :                              NAME, ADDRESSPOSTALCODE,                                 ADDRESSSTREETNAME,         HYPERLINK, TOTALROOMS,     KEEPERNAME, ICON_NAME 
min values  :                      30 BENCOOLEN,             18956,                                 1 Bayfront Avenue, 96ytlim@gmail.com,          4,  Adel Aramouni, hotel.gif 
max values  : YotelAir Singapore Changi Airport,            819666, 99 IRRAWADDY ROAD, # 22-00 ROYAL SQUARE AT NOVENA, zubair@dam.com.sg,       2561, Zhang YuanQing, hotel.gif </code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>tourism</span>
</code></pre>
</div>
</details>
<pre><code>class       : SpatialPointsDataFrame 
features    : 106 
extent      : 11380.23, 43659.54, 22869.34, 47596.73  (xmin, xmax, ymin, ymax)
crs         : +proj=tmerc +lat_0=1.36666666666667 +lon_0=103.833333333333 +k=1 +x_0=28001.642 +y_0=38744.572 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs 
variables   : 15
names       :                                NAME,                                                                                                                                                  DESCRIPTION,                  ADDRESSSTREETNAME,                            HYPERLINK,                                                                                                                             PHOTOURL,                                                                                          URL_PATH,                                                                                                          IMAGE_ALT_TEXT,                 PHOTOCREDITS,   LASTMODIFIED,                                                                                             META_DESCRIPTION,                                                                                                                                                                           OPENING_HOURS,              Lat,              Lng,        ICON_NAME, ADDRESSPOSTALCODE 
min values  : Adventure Cove Waterpark Singapore, A feat of engineering, an architectural statement and a sheer aesthetic triumph, Marina Bay Sands&lt;sup&gt;&lt;/sup&gt; has upped the ante for buildings in Singapore.,                       1 Beach Road,                   http://acm.org.sg/,                                  /content/dam/desktop/global/see-do-singapore/architecture/hajjah-fatimah-mosque-carousel01-rect.jpg, www.yoursingapore.com/en/see-do-singapore/architecture/historical/capitol-building-singapore.html,               Adults and kids of all ages who are not even science buffs will have fun at the Singapore Science Centre., Darren Soh/National Gallery, 1427691447.648, A tranquil patch of imperial China in the west of Singapore is pleasant respite from the bustle of the city.,                                                                                                                                                 50th storey Skybridge, Daily, 9am 10pm, 1.22309649975255, 103.683980000372, tourist_spot.gif,                 0 
max values  :          Victoria Theatre Singapore,                                                    With so many attractions packed into this 15-km stretch of beaches, youll never run out of things to do., Seng Poh Road and Tiong Bahru Road, https://www.pub.gov.sg/marinabarrage, www.yoursingapore.com/content/dam/desktop/global/see-do-singapore/recreation-leisure/universal-studios-singapore-carousel01-rect.jpg,      www.yoursingapore.com/en/see-do-singapore/recreation-leisure/viewpoints/singapore-flyer.html, Whether you prefer water sports, rollerblading or cycling, find a myriad of things to do at East Coast Park, Singapore.,  Wildlife Reserves Singapore, 1446544541.364,                                     With the Henderson Waves bridge, form meets function to stunning effect., Visits are by appointment only.Visitors must sign up in advance for heritage tours which fall on:Monday, 2pm  3pm,Tuesday, 6.30pm  7.30pm,Thursday, 10am  11am,Saturday, 11am  12pm, 1.44672000006097, 103.974030000359, tourist_spot.gif,                 0 </code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>mrtlrt</span>
</code></pre>
</div>
</details>
<pre><code>class       : SpatialPointsDataFrame 
features    : 185 
extent      : 6138.311, 45254.86, 27555.06, 47854.2  (xmin, xmax, ymin, ymax)
crs         : +proj=tmerc +lat_0=1.36666666666667 +lon_0=103.833333333333 +k=1 +x_0=28001.642 +y_0=38744.572 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs 
variables   : 3
names       : OBJECTID,              STN_NAME, STN_NO 
min values  :        0, ADMIRALTY MRT STATION,    BP1 
max values  :      191,    YISHUN MRT STATION,    TE3 </code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>sg</span>
</code></pre>
</div>
</details>
<pre><code>class       : SpatialPolygonsDataFrame 
features    : 60 
extent      : 2663.926, 56047.79, 16357.98, 50244.03  (xmin, xmax, ymin, ymax)
crs         : +proj=tmerc +lat_0=1.36666666666667 +lon_0=103.833333333333 +k=1 +x_0=28001.642 +y_0=38744.572 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs 
variables   : 4
names       : GDO_GID, MSLINK, MAPID,              COSTAL_NAM 
min values  :       1,      1,     0,             ISLAND LINK 
max values  :      60,     67,     0, SINGAPORE - MAIN ISLAND </code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>mpsz</span>
</code></pre>
</div>
</details>
<pre><code>class       : SpatialPolygonsDataFrame 
features    : 323 
extent      : 2667.538, 56396.44, 15748.72, 50256.33  (xmin, xmax, ymin, ymax)
crs         : +proj=tmerc +lat_0=1.36666666666667 +lon_0=103.833333333333 +k=1 +x_0=28001.642 +y_0=38744.572 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs 
variables   : 15
names       : OBJECTID, SUBZONE_NO, SUBZONE_N, SUBZONE_C, CA_IND, PLN_AREA_N, PLN_AREA_C,       REGION_N, REGION_C,          INC_CRC, FMEL_UPD_D,     X_ADDR,     Y_ADDR,    SHAPE_Leng,    SHAPE_Area 
min values  :        1,          1, ADMIRALTY,    AMSZ01,      N, ANG MO KIO,         AM, CENTRAL REGION,       CR, 00F5E30B5C9B7AD8,      16409,  5092.8949,  19579.069, 871.554887798, 39437.9352703 
max values  :      323,         17,    YUNNAN,    YSSZ09,      Y,     YISHUN,         YS,    WEST REGION,       WR, FFCCF172717C2EAF,      16409, 50424.7923, 49552.7904, 68083.9364708,  69748298.792 </code></pre>
</div>
<p>We can see that all the geospatial data are converted to their respective Spatial* Classes.</p>
<h3 id="converting-the-spatial-class-into-generic-sp-format">4.3.2 Converting the Spatial* class into generic sp format</h3>
<p>Next, we will convert Spatial* classes into Spatial object so that we can convert it into ppp object.</p>
<p>The following code chunk converts Spatial* classes into generic sp format using as function which sets the classes to their respective sp format.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>airbnb0619_sp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>airbnb0619</span>, <span class='st'>"SpatialPoints"</span><span class='op'>)</span>
<span class='va'>airbnb0721_sp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>airbnb0721</span>, <span class='st'>"SpatialPoints"</span><span class='op'>)</span>
<span class='va'>hotels_sp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>hotels</span>, <span class='st'>"SpatialPoints"</span><span class='op'>)</span>
<span class='va'>tourism_sp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>tourism</span>, <span class='st'>"SpatialPoints"</span><span class='op'>)</span>
<span class='va'>mrtlrt_sp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>mrtlrt</span>, <span class='st'>"SpatialPoints"</span><span class='op'>)</span>
<span class='va'>sg_sp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>sg</span>, <span class='st'>"SpatialPolygons"</span><span class='op'>)</span>
<span class='va'>mpsz_sp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>mpsz</span>, <span class='st'>"SpatialPolygons"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<h3 id="converting-the-generic-sp-format-into-spatstats-ppp-format">4.3.3 Converting the generic sp format into spatstats ppp format</h3>
<p>We will next convert the spatial data into spatstats ppp format.</p>
<p>The following code chunk converts spatial data into spatstats ppp format using as function.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>airbnb0619_ppp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>airbnb0619_sp</span>, <span class='st'>"ppp"</span><span class='op'>)</span>
<span class='va'>airbnb0721_ppp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>airbnb0721_sp</span>, <span class='st'>"ppp"</span><span class='op'>)</span>
<span class='va'>hotels_ppp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>hotels_sp</span>, <span class='st'>"ppp"</span><span class='op'>)</span>
<span class='va'>tourism_ppp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>tourism_sp</span>, <span class='st'>"ppp"</span><span class='op'>)</span>
<span class='va'>mrtlrt_ppp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>mrtlrt_sp</span>, <span class='st'>"ppp"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<h3 id="handling-duplicates-in-ppp-object">4.3.4 Handling duplicates in ppp object</h3>
<h4 id="check-for-dupliciates-duplicates-in-each-ppp-object">4.3.4.1 Check for dupliciates duplicates in each ppp object</h4>
<p>The following code chunk use any and duplicated function of base R package to check for duplicates, and sum up the count of duplicated points using sum function of base R package and multiplicity function of spatstat package.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/duplicated.html'>duplicated</a></span><span class='op'>(</span><span class='va'>airbnb0619_ppp</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>[1] TRUE</code></pre>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='fu'>multiplicity</span><span class='op'>(</span><span class='va'>airbnb0619_ppp</span><span class='op'>)</span> <span class='op'>&gt;</span> <span class='fl'>1</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>[1] 6</code></pre>
</div>
<p>From the result above, there are 6 duplicates in airbnb0619_ppp object.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/duplicated.html'>duplicated</a></span><span class='op'>(</span><span class='va'>airbnb0721_ppp</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>[1] TRUE</code></pre>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='fu'>multiplicity</span><span class='op'>(</span><span class='va'>airbnb0721_ppp</span><span class='op'>)</span> <span class='op'>&gt;</span> <span class='fl'>1</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>[1] 224</code></pre>
</div>
<p>From the result above, there are 224 duplicates in airbnb0721_ppp object.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/duplicated.html'>duplicated</a></span><span class='op'>(</span><span class='va'>hotels_ppp</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>[1] TRUE</code></pre>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='fu'>multiplicity</span><span class='op'>(</span><span class='va'>hotels_ppp</span><span class='op'>)</span> <span class='op'>&gt;</span> <span class='fl'>1</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>[1] 10</code></pre>
</div>
<p>From the result above, there are 10 duplicates in hotels_ppp object.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/duplicated.html'>duplicated</a></span><span class='op'>(</span><span class='va'>tourism_ppp</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>[1] TRUE</code></pre>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='fu'>multiplicity</span><span class='op'>(</span><span class='va'>tourism_ppp</span><span class='op'>)</span> <span class='op'>&gt;</span> <span class='fl'>1</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>[1] 7</code></pre>
</div>
<p>From the result above, there are 7 duplicates in tourism_ppp object.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/duplicated.html'>duplicated</a></span><span class='op'>(</span><span class='va'>mrtlrt_ppp</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>[1] FALSE</code></pre>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='fu'>multiplicity</span><span class='op'>(</span><span class='va'>mrtlrt_ppp</span><span class='op'>)</span> <span class='op'>&gt;</span> <span class='fl'>1</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>[1] 0</code></pre>
</div>
<p>From the result above, there are no duplicate in mrtlrt_ppp object.</p>
<h4 id="handling-duplicates">4.3.4.2 Handling duplicates</h4>
<p>We will use jittering to handle duplicates so that we will not lose useful points. Jittering adds a small perturbation to the duplicated points so that they do not occupy the exact same space.</p>
<p>The following code chunk uses rjitter function of spatstat to jitter the ppp object with duplicates.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>airbnb0619_ppp_jit</span> <span class='op'>&lt;-</span> <span class='fu'>rjitter</span><span class='op'>(</span><span class='va'>airbnb0619_ppp</span>, 
                             retry<span class='op'>=</span><span class='cn'>TRUE</span>, 
                             nsim<span class='op'>=</span><span class='fl'>1</span>, 
                             drop<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>

<span class='va'>airbnb0721_ppp_jit</span> <span class='op'>&lt;-</span> <span class='fu'>rjitter</span><span class='op'>(</span><span class='va'>airbnb0721_ppp</span>, 
                             retry<span class='op'>=</span><span class='cn'>TRUE</span>, 
                             nsim<span class='op'>=</span><span class='fl'>1</span>, 
                             drop<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>

<span class='va'>hotels_ppp_jit</span> <span class='op'>&lt;-</span> <span class='fu'>rjitter</span><span class='op'>(</span><span class='va'>hotels_ppp</span>, 
                             retry<span class='op'>=</span><span class='cn'>TRUE</span>, 
                             nsim<span class='op'>=</span><span class='fl'>1</span>, 
                             drop<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>

<span class='va'>tourism_ppp_jit</span> <span class='op'>&lt;-</span> <span class='fu'>rjitter</span><span class='op'>(</span><span class='va'>tourism_ppp</span>, 
                             retry<span class='op'>=</span><span class='cn'>TRUE</span>, 
                             nsim<span class='op'>=</span><span class='fl'>1</span>, 
                             drop<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<h4 id="check-if-duplicates-still-exist">4.3.4.3 Check if duplicates still exist</h4>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/duplicated.html'>duplicated</a></span><span class='op'>(</span><span class='va'>airbnb0619_ppp_jit</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>[1] FALSE</code></pre>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='fu'>multiplicity</span><span class='op'>(</span><span class='va'>airbnb0619_ppp_jit</span><span class='op'>)</span> <span class='op'>&gt;</span> <span class='fl'>1</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>[1] 0</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/duplicated.html'>duplicated</a></span><span class='op'>(</span><span class='va'>airbnb0721_ppp_jit</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>[1] FALSE</code></pre>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='fu'>multiplicity</span><span class='op'>(</span><span class='va'>airbnb0721_ppp_jit</span><span class='op'>)</span> <span class='op'>&gt;</span> <span class='fl'>1</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>[1] 0</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/duplicated.html'>duplicated</a></span><span class='op'>(</span><span class='va'>hotels_ppp_jit</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>[1] FALSE</code></pre>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='fu'>multiplicity</span><span class='op'>(</span><span class='va'>hotels_ppp_jit</span><span class='op'>)</span> <span class='op'>&gt;</span> <span class='fl'>1</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>[1] 0</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/duplicated.html'>duplicated</a></span><span class='op'>(</span><span class='va'>tourism_ppp_jit</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>[1] FALSE</code></pre>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='fu'>multiplicity</span><span class='op'>(</span><span class='va'>tourism_ppp_jit</span><span class='op'>)</span> <span class='op'>&gt;</span> <span class='fl'>1</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>[1] 0</code></pre>
</div>
<p>We can confirm that there are no duplicated points after jittering.</p>
<h3 id="create-owin-objects">4.3.5 Create owin objects</h3>
<p>We will next create owin object to represent the Singapore boundary.</p>
<p>The following code chunk converts sg SpatialPolygon objects into owin object of spatstat using as function.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>sg_owin</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>sg_sp</span>, <span class='st'>"owin"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>The following code chunk plots sg_owin using plot function of base R package.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>sg_owin</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="takehome-ex02_files/figure-html5/unnamed-chunk-56-1.png" width="624" /></p>
</div>
<h3 id="combining-point-events-object-and-owin-object">4.3.6 Combining point events object and owin object</h3>
<p>The following code chunk combines the point objects of airbnb0619, airbnb0721, hotels, tourism and mrtlrt with the owin object into one ppp object class.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>airbnb0619SG_ppp</span> <span class='op'>=</span> <span class='va'>airbnb0619_ppp_jit</span><span class='op'>[</span><span class='va'>sg_owin</span><span class='op'>]</span>
<span class='va'>airbnb0721SG_ppp</span> <span class='op'>=</span> <span class='va'>airbnb0721_ppp_jit</span><span class='op'>[</span><span class='va'>sg_owin</span><span class='op'>]</span>
<span class='va'>hotelsSG_ppp</span> <span class='op'>=</span> <span class='va'>hotels_ppp_jit</span><span class='op'>[</span><span class='va'>sg_owin</span><span class='op'>]</span>
<span class='va'>tourismSG_ppp</span> <span class='op'>=</span> <span class='va'>tourism_ppp_jit</span><span class='op'>[</span><span class='va'>sg_owin</span><span class='op'>]</span>
<span class='va'>mrtlrtSG_ppp</span> <span class='op'>=</span> <span class='va'>mrtlrt_ppp</span><span class='op'>[</span><span class='va'>sg_owin</span><span class='op'>]</span>
</code></pre>
</div>
</details>
</div>
<p>The following code chunk plots the ppp object class using plot function of base R package.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>airbnb0619SG_ppp</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="takehome-ex02_files/figure-html5/unnamed-chunk-58-1.png" width="624" /></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>airbnb0721SG_ppp</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="takehome-ex02_files/figure-html5/unnamed-chunk-59-1.png" width="624" /></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>hotelsSG_ppp</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="takehome-ex02_files/figure-html5/unnamed-chunk-60-1.png" width="624" /></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>tourismSG_ppp</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="takehome-ex02_files/figure-html5/unnamed-chunk-61-1.png" width="624" /></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>mrtlrtSG_ppp</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="takehome-ex02_files/figure-html5/unnamed-chunk-62-1.png" width="624" /></p>
</div>
<h1 id="section-a-airbnb-distribution-in-2019">5 Section A: Airbnb Distribution in 2019</h1>
<h2 id="exploratory-spatial-data-analysis">5.1 Exploratory Spatial Data Analysis</h2>
<h3 id="kernel-density-maps">5.1.1 Kernel density maps</h3>
<h4 id="airbnb0619-listings">5.1.1.1 Airbnb0619 listings</h4>
<h5 id="compute-kernel-density-estimation-with-automatic-bandwidth-selection-method">5.1.1.1.1 Compute kernel density estimation with automatic bandwidth selection method</h5>
<ol type="1">
<li><p>The following code chunk computes kernel density using density function of spatstat package.</p></li>
<li><p>The code first takes in the ppp object variable.</p></li>
<li><p>bw.diggle automatic bandwidth method to detect a tight cluster</p></li>
<li><p>smoothing kernel is set to default gaussian method</p></li>
</ol>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>kde_airbnb0619SG_bw</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>airbnb0619SG_ppp</span>,
                              sigma<span class='op'>=</span><span class='va'>bw.diggle</span>,
                              edge<span class='op'>=</span><span class='cn'>TRUE</span>,
                            kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>The following code chunk plots the kde_airbnb0619SG_bw using plot function of base R</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_airbnb0619SG_bw</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="takehome-ex02_files/figure-html5/unnamed-chunk-64-1.png" width="624" /></p>
</div>
<p>The density values of the output range is too small because the default unit of measurement of svy21 is in meter. As a result, the density values computed is in number of units per square meter.</p>
<h5 id="rescalling-kde-values">5.1.1.1.2 Rescalling KDE values</h5>
<p>The following code chunk rescale the KDE value of airbnb0619SG_ppp using rescale function of spatstat from meter to kilometer.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>airbnb0619SG_ppp.km</span> <span class='op'>&lt;-</span> <span class='fu'>rescale</span><span class='op'>(</span><span class='va'>airbnb0619SG_ppp</span>, <span class='fl'>1000</span>, <span class='st'>"km"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<h5 id="different-automatic-bandwidth-methods">5.1.1.1.3 Different automatic bandwidth methods</h5>
<p>The following code chunk calculate the bandwidth using different methods</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>bw.CvL</span><span class='op'>(</span><span class='va'>airbnb0619SG_ppp.km</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>   sigma 
5.544852 </code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>bw.scott</span><span class='op'>(</span><span class='va'>airbnb0619SG_ppp.km</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>  sigma.x   sigma.y 
1.0748438 0.7425931 </code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>bw.ppl</span><span class='op'>(</span><span class='va'>airbnb0619SG_ppp.km</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>    sigma 
0.2074875 </code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>bw.diggle</span><span class='op'>(</span><span class='va'>airbnb0619SG_ppp.km</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>     sigma 
0.04196627 </code></pre>
</div>
<p>From the result above, bw.diggle has the lowest sigma compared to other methods. We will be using bw.diggle in this analysis in order to detect close cluster.</p>
<h5 id="kde-map-and-point-map-in-km">5.1.1.1.4 KDE Map and Point Map in km</h5>
<ol type="1">
<li><p>The following code chunk computes kernel density using density function of spatstat package.</p></li>
<li><p>The code first takes in the ppp object variable in km.</p></li>
<li><p>bw.diggle automatic bandwidth method to detect a tight cluster</p></li>
<li><p>smoothing kernel is set to default gaussian method</p></li>
<li><p>plot function of base R package and par function of graphics package is used to plot kde map and ppp point map side by side</p></li>
</ol>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>kde_airbnb0619SG_bw.km</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>airbnb0619SG_ppp.km</span>,
                              sigma<span class='op'>=</span><span class='va'>bw.diggle</span>,
                              edge<span class='op'>=</span><span class='cn'>TRUE</span>,
                            kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span>


<span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span><span class='op'>(</span>mfrow<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_airbnb0619SG_bw.km</span>, main <span class='op'>=</span> <span class='st'>"KDE Map"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>airbnb0619SG_ppp.km</span>, main <span class='op'>=</span> <span class='st'>"Point Map"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="takehome-ex02_files/figure-html5/unnamed-chunk-70-1.png" width="624" /></p>
</div>
<p>Analysis: From the kde map above, we can see that the south-east region near the central area have higher density of Airbnb in 2019 as shown by the pink spots on kde map and the black patches on the point map. The kde map better visualised the density as compared to the point map because it uses different colour tone to represent the density. For example, purple means no/low number of units per square kilometer, pink represents medium density of about 1000 units per square kilometer, and yellow means high density of about 1500 units per square kilometer. The point map on the other hand cannot determine if an area is denser than the other area since it is only represented in one colour tone, black, and black patches can be seen almost every where in the point map.</p>
<h5 id="convert-kde-output-into-grid-object-in-km">5.1.1.1.5 Convert KDE output into grid object in km</h5>
<p>The following code chunk converts KDE output into grid object using as.SpatialGridDataFrame.im function of maptools, and plot the grid object using spplot function of raster package.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>gridded_kde_airbnb0619SG_bw.km</span> <span class='op'>&lt;-</span> <span class='fu'>as.SpatialGridDataFrame.im</span><span class='op'>(</span><span class='va'>kde_airbnb0619SG_bw.km</span><span class='op'>)</span>
<span class='fu'>spplot</span><span class='op'>(</span><span class='va'>gridded_kde_airbnb0619SG_bw.km</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="takehome-ex02_files/figure-html5/unnamed-chunk-71-1.png" width="624" /></p>
</div>
<p>Analysis: The above density map shows a clearer visualization of the density of Airbnb in 2019 using grid. We can see that the Airbnb are scattered all around as seen by the lighter blue grid on the map. The south-east area near the central have higher density with around 500 - 1500 units per square kilometer, represented by the brighter blue, pink-orange grid on the map.</p>
<h5 id="convert-grid-object-into-raster">5.1.1.1.6 Convert grid object into raster</h5>
<p>The following code chunk converts grid object into raster using raster function of raster package. Note that we will be using kde_airbnb0619SG_bw in m.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>gridded_kde_airbnb0619SG_bw</span> <span class='op'>&lt;-</span> <span class='fu'>as.SpatialGridDataFrame.im</span><span class='op'>(</span><span class='va'>kde_airbnb0619SG_bw</span><span class='op'>)</span>
<span class='va'>kde_airbnb0619SG_bw_raster</span> <span class='op'>&lt;-</span> <span class='fu'>raster</span><span class='op'>(</span><span class='va'>gridded_kde_airbnb0619SG_bw</span><span class='op'>)</span>
<span class='va'>kde_airbnb0619SG_bw_raster</span>
</code></pre>
</div>
</details>
<pre><code>class      : RasterLayer 
dimensions : 128, 128, 16384  (nrow, ncol, ncell)
resolution : 417.0614, 264.7348  (x, y)
extent     : 2663.926, 56047.79, 16357.98, 50244.03  (xmin, xmax, ymin, ymax)
crs        : NA 
source     : memory
names      : v 
values     : -2.3431e-19, 0.001811419  (min, max)</code></pre>
</div>
<p>From the result above, the crs is NA.</p>
<h5 id="assign-project-system-and-plot-raster-on-osm">5.1.1.1.7 Assign project system and plot raster on osm</h5>
<ol type="1">
<li><p>The following code chunk first assign CRS to kde_airbnb0619SG_bw_raster</p></li>
<li><p>Plot the raster on OpenstreetMap basemap in interactive mode</p></li>
<li><p>tmap_mode is set to view to plot interative map</p></li>
<li><p>tm_shape is the raster layer</p></li>
<li><p>tm_raster with setting of alpha = 0.7 makes the raster layer slightly transparent so that the basemap can be seen, palette set to Purples</p></li>
<li><p>tm_basemap is set to OpenStreetMap</p></li>
<li><p>tmap_mode change back to plot</p></li>
</ol>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>projection</span><span class='op'>(</span><span class='va'>kde_airbnb0619SG_bw_raster</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'>CRS</span><span class='op'>(</span><span class='st'>"+init=EPSG:3414"</span><span class='op'>)</span>
<span class='va'>kde_airbnb0619SG_bw_raster</span>
</code></pre>
</div>
</details>
<pre><code>class      : RasterLayer 
dimensions : 128, 128, 16384  (nrow, ncol, ncell)
resolution : 417.0614, 264.7348  (x, y)
extent     : 2663.926, 56047.79, 16357.98, 50244.03  (xmin, xmax, ymin, ymax)
crs        : +proj=tmerc +lat_0=1.36666666666667 +lon_0=103.833333333333 +k=1 +x_0=28001.642 +y_0=38744.572 +ellps=WGS84 +units=m +no_defs 
source     : memory
names      : v 
values     : -2.3431e-19, 0.001811419  (min, max)</code></pre>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>tmap_mode</span><span class='op'>(</span><span class='st'>"view"</span><span class='op'>)</span>
<span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>kde_airbnb0619SG_bw_raster</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>tm_raster</span><span class='op'>(</span><span class='st'>"v"</span>, palette <span class='op'>=</span> <span class='st'>"Purples"</span>, alpha <span class='op'>=</span> <span class='fl'>0.7</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_basemap</span><span class='op'>(</span><span class='st'>"OpenStreetMap"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<div id="htmlwidget-54ae88e36912251fac41" style="width:624px;height:384px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-54ae88e36912251fac41">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"createMapPane","args":["tmap401",401]},{"method":"addProviderTiles","args":["OpenStreetMap",null,"OpenStreetMap",{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"pane":"tilePane"}]},{"method":"addRasterImage","args":["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKEAAABnCAYAAABo4CIfAAAE10lEQVR4nO2dTXIcKRBGkUNLrTS6giN8Md9ijuPwdo7irSJ0BUkr7eVVTZRoit9MSOC9VXd0NUXBRyZQCdw5cM459/768Xn12+PTw13PvOwGheuuBXgW3/vrxydi1GHrQo1ZvxQIUo4tC7JFfD6IsZ1vozPQG0kBggxbtWItAWIN2zBbeFIDgZ6WDzHWYarQUoIpreRRrhcxlmGmTygtGAQ4DyZEmCsY6eu0GH3/2RjaaiUqy59Qbk1PAqxhGcMKy4pgNECEZQxxxysL0Ln1ny9F6fN3a7E7VUzIEvLu+Rr1QtlJfM7dCjAnOKKUI81VRK36ELsJ8ODx6eEu59lrRBRKd3YxmpiiWY3eU0nvrx+f2g1eM31E2Ikra+UL6PguWelS6WkJEXc8kNQc5+HWYwJOpS/VLdDsh6qIEPHJkqr41vIe3adEhJOQK5Sasl9OhAhQFt+ltlrF0YILIZohBKhD7oKr828zTeXcj84ApDmLq0RIVkXngyWckFnElQvzhBOyWmPHEk6M5HKHkdYVSzgxkm9WRhoQBiYbYN1DiZlg6w+6A1dxjBLpaDLVul7oQ28R0ieEG3obFkQIQXoKscns4orXpadLbl7nAPugJUzcMWRjKrIaK7g30hYREUITEoKcYqs1sIW0JaRPCMPJFiFWELTAEkIRGtM0iBCGgwhhOIgQshn6xoRBCWiCJYQsNAMaCO+HKD2iabJ3Y4L96BXOhSUU4Pnl7f/PP77/MzAncsS2E/GvaQVLCNn4wpQS4eXApMcWtKvx/PL2xSpaxdo2ItnuOHfXT0hzCLWH624R3NV/h0bRPD493PVuRdZabYxDVCFr+O/P/4LXapGqq+P3q+uGrzHJOXtDYova2OaPqb32YK4GGqN6dNzinv0NwY90fFFyCtItK5aHiSma2DFc1q1gj+mZFYV3pvpogtxrY/9N3XdmcUqwuvgOqjbQyd14Z1Qhagj0+eXti6Xzv7eyi+BCVO/iFBNi7ZltUhVhwUr2fOMwOzd9Qi1XF3O1oYFJ6LqVWPW5aqgO5boSTI6r9q+RrpCeFRyaE0RgZXwRYe+D/XLul5Of86GEmmew+YLzJ6BD+Tkf/RCbHN6ZrAOir6g5+C/UV0p1AWpOMbI0gkZ0cYpEWHIaZOy/V+655URKK4ILgQjjfHNu/Hm4EvePvWzXcoG/f/2RTnJLiqZopDbmLqH0gMGDlnOCaznnFeuXj4nXdilqKjQVQXJ8lhYk4iun22q7nNCiXnmpvS8jXB2Kglprb3L+b2zUqmmhYuTObfrdAkLNZLgcHUuemxZKL0eIIwiVgdW8rsK9c3nRK63kdNitVaqfZyyeDsF3x70zYUl8oe5Ci4eANENHx1YrNNZv3SnIohc3hd1SoC1hYJYhHEuXmyka+j3QG9F5wlWtQq/1t7sy/dZwZ8utuWuEdgzkzmRNHJei3XlPTSRr3BP0mN4Slo5kwR5dRKgRvn9+bWbF4iH6OpbZletqP5Wez2GlMcyGSp9wV84L8ym/fKaIJ7QMA6J27i0tCJoVRNdG8RrhncHN6mCuQGkE+2GqglsHSam1zKHAWkQ+HjOT1dL9Uvq582BGhCttIwdlLOWKYuH4uF0A2IPZXjUCAKTBsu2BmdGxD+KD4SBCAAAAAAAAANiHv96Ehoxy3AynAAAAAElFTkSuQmCC",[[1.47066364891549,103.605646858975],[1.16218335265381,104.087962389458]],0.698039215686274,null,"tmap401","kde_airbnb0619SG_bw_raster"]},{"method":"addLegend","args":[{"colors":["#EEECF4","#C6C7E1","#9490C3","#6A51A3"],"labels":["0.0000 to 0.0005","0.0005 to 0.0010","0.0010 to 0.0015","0.0015 to 0.0020"],"na_color":null,"na_label":"NA","opacity":0.698039215686274,"position":"topright","type":"unknown","title":"v","extra":null,"layerId":"legend401","className":"info legend kde_airbnb0619SG_bw_raster","group":"kde_airbnb0619SG_bw_raster"}]},{"method":"addLayersControl","args":[[],"kde_airbnb0619SG_bw_raster",{"collapsed":true,"autoZIndex":true,"position":"topleft"}]}],"limits":{"lat":[1.16218335265381,1.47066364891549],"lng":[103.605646858975,104.087962389458]},"fitBounds":[1.1641988317039,103.605646858975,1.4706519681352,104.085357795856,[]]},"evals":[],"jsHooks":[]}</script>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>tmap_mode</span><span class='op'>(</span><span class='st'>"plot"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>Analysis: From the raster map, we can see that areas such as Geylang, Chinatown and Anson have the higher density of Airbnb with 0.0010 to 0.0020 units per square meter, as shown by the darker purple grid on the map. There are other areas such as Kallang have medium density of 0.0005 to 0.0010 units per square meter. We will look into these regions later.</p>
<h4 id="hotels">5.1.1.2 Hotels</h4>
<h5 id="rescale-kde-values">5.1.1.2.1 Rescale KDE values</h5>
<p>The following code chunk rescale the KDE value of hotelsSG_ppp using rescale function of spatstat from meter to kilometer.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>hotelsSG_ppp.km</span> <span class='op'>&lt;-</span> <span class='fu'>rescale</span><span class='op'>(</span><span class='va'>hotelsSG_ppp</span>, <span class='fl'>1000</span>, <span class='st'>"km"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<h5 id="kde-map-and-point-map-in-km-1">5.1.1.2.2 KDE Map and Point Map in km</h5>
<p>The following code chunk is similar to Airbnb0619s code chunk (5.1.1.1.4).</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>kde_hotelsSG_bw.km</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>hotelsSG_ppp.km</span>,
                              sigma<span class='op'>=</span><span class='va'>bw.diggle</span>,
                              edge<span class='op'>=</span><span class='cn'>TRUE</span>,
                            kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span><span class='op'>(</span>mfrow<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_hotelsSG_bw.km</span>, main <span class='op'>=</span> <span class='st'>"KDE Map"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>hotelsSG_ppp.km</span>, main<span class='op'>=</span><span class='st'>"Point Map"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="takehome-ex02_files/figure-html5/unnamed-chunk-75-1.png" width="624" /></p>
</div>
<p>Analysis: From the kde map above, we can see that the south-east region near the central area have higher density of hotels of about 100 units per square kilometer, as shown by the pink orange spots on kde map. The black patches on the point map also concentrates around the south-east region near the central area.</p>
<h5 id="convert-kde-output-into-grid-object-in-km-1">5.1.1.2.3 Convert KDE output into grid object in km</h5>
<p>The following code chunk converts KDE output into grid object using as.SpatialGridDataFrame.im function of maptools, and plot the grid object using spplot function of raster package.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>gridded_kde_hotelsSG_bw.km</span> <span class='op'>&lt;-</span> <span class='fu'>as.SpatialGridDataFrame.im</span><span class='op'>(</span><span class='va'>kde_hotelsSG_bw.km</span><span class='op'>)</span>
<span class='fu'>spplot</span><span class='op'>(</span><span class='va'>gridded_kde_hotelsSG_bw.km</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="takehome-ex02_files/figure-html5/unnamed-chunk-76-1.png" width="624" /></p>
</div>
<p>Analysis: The above density map shows a clearer visualization of the density of hotels using grid. We can see that south-east area near the central have higher density of about 50 - 120 units per square kilometer as seen by the lighter blue and pink grid on the map. There are some hotels scattered near east area as well as shown by the individual blue grid.</p>
<h5 id="plot-raster-on-osm">5.1.1.2.4 Plot raster on osm</h5>
<ol type="1">
<li><p>The following code chunk first compute kernel density using density function of spatstat package with sigma set as bw.diggle and kernel set as gaussian.</p></li>
<li><p>Note that we will be using ppp in m.</p></li>
<li><p>Convert KDE output into grid object using as.SpatialGridDataFrame.im function of maptools</p></li>
<li><p>Convert grid object into raster using raster function of raster package</p></li>
<li><p>Assign CRS to raster layer</p></li>
<li><p>Plot the raster on OpenstreetMap basemap in interactive mode</p></li>
<li><p>tmap_mode is set to view to plot interative map</p></li>
<li><p>tm_shape is the raster layer</p></li>
<li><p>tm_raster with setting of alpha = 0.7 makes the raster layer slightly transparent so that the basemap can be seen, palette set to Purples</p></li>
<li><p>tm_basemap is set to OpenStreetMap</p></li>
<li><p>tmap_mode change back to plot</p></li>
</ol>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>kde_hotelsSG_bw</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>hotelsSG_ppp</span>,
                              sigma<span class='op'>=</span><span class='va'>bw.diggle</span>,
                              edge<span class='op'>=</span><span class='cn'>TRUE</span>,
                            kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span>

<span class='va'>gridded_kde_hotelsSG_bw</span> <span class='op'>&lt;-</span> <span class='fu'>as.SpatialGridDataFrame.im</span><span class='op'>(</span><span class='va'>kde_hotelsSG_bw</span><span class='op'>)</span>

<span class='va'>kde_hotelsSG_bw_raster</span> <span class='op'>&lt;-</span> <span class='fu'>raster</span><span class='op'>(</span><span class='va'>gridded_kde_hotelsSG_bw</span><span class='op'>)</span>
<span class='fu'>projection</span><span class='op'>(</span><span class='va'>kde_hotelsSG_bw_raster</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'>CRS</span><span class='op'>(</span><span class='st'>"+init=EPSG:3414"</span><span class='op'>)</span>

<span class='fu'>tmap_mode</span><span class='op'>(</span><span class='st'>"view"</span><span class='op'>)</span>
<span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>kde_hotelsSG_bw_raster</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>tm_raster</span><span class='op'>(</span><span class='st'>"v"</span>, palette <span class='op'>=</span> <span class='st'>"Purples"</span>, alpha <span class='op'>=</span> <span class='fl'>0.7</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_basemap</span><span class='op'>(</span><span class='st'>"OpenStreetMap"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<div id="htmlwidget-39a00b6fa0823bf8b2b7" style="width:624px;height:384px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-39a00b6fa0823bf8b2b7">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"createMapPane","args":["tmap401",401]},{"method":"addProviderTiles","args":["OpenStreetMap",null,"OpenStreetMap",{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"pane":"tilePane"}]},{"method":"addRasterImage","args":["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKEAAABnCAYAAABo4CIfAAAE40lEQVR4nO2dvXLVMBCFFSZlqpCajhlaaHgOWoaWt6DkLWgZWp4jTWgzk446SZU+VM4YXVlaSfsn6XxVcu+1LEvHu9JaXp0FEEII4fH+6fnou8urizPNuqwGGjccC3Avvsf7p2eIUYalGzVn/UpAkHws2ZA94ouBGPt5ZV0BbTgFCHhY6i6WEiCsYR9uG49rIqBp+SDGNlw1WkkwtZ1s5XohxjrcjAm5BQMBjoMLEVIFw/07KazPPxqmdy1HZ8UB5d7yOIA1rMOssbwIRgKIsA4TdzyzAEOY//pK1F6/2h27UsekLCGePR8j3igriS+EUwFSFkfUspU5i6hFL2I1AW5cXl2cUa69RUSpckcXo4sQzWxoh5Ie75+epW94yfIhQiWOrFUsoO1/zk7nKk9KiHDHhpRinJtbzwm4VD7XsEByHCoiQoiPl1LH97a39ZgSIhwEqlBa2n46EUKAvMQutdcqWgsuBWuFIEAZqC9c7b8bKZRzbl0BUGYvrhoheRVdDCzhgIwiLiqIEw7IbDc7LOHAcL7uYGldYQkHhvPJiqUBwcRkAbx7KDYT7P1CV+BoHSNHOZIM9V4v0EFbhBgTghO0DQtECJJoCrHL7MIVz4umS+5+zwGsg5Qw4Y4BGVcrq2EF14bbIkKEoAsOQQ6Rag34gtsSYkwIzCGLEFYQSAFLCKqQCNNAhMAciBCYAxECMqZPTDApAZLAEgISkgsasLwfZNFYTUPOxgTWQ2s5FywhSJJLJxL/pheIECTJ5bLh9o6HExONFLTABm9pRMiWkJr1c3Vu7x7Cu7evravxQo/gjo5VW08YC85q+67RxH979xBurv+Gz1/e//f5t6+/X/7+/uOTeD16U4SYv2NC2XuDI0VtLvljKdce8OdWW2memPRYqDgh+FZOLMpRdkG6vXsIIYRwc/03fPj4RtQdj9AetbiYHee24RrBCm6ikxLfjMLb07w1AfW3uWNL5x1FnJsl5Bbh7OLbaEqgQ028Y9WIngRKZRXBpWjO4pQTYuuebVwd4UGEmk8cRudkTCjl6ighH0/WVJpZr6uF5qVcR4KhuOr4N9wdotnB+/ifxflngLQ37xGtG7vErqpkfWvPoxVf/PXzz0lQOmakUJMVIotac8+dNQSiNSYsCTAE7PhOocoS1uwGmTu2x3K17nhpCUSY5zwE3s2fNY/bc+TSrZ55AzpVIRquxNw11G4wuNGzT3Ar+7rC+tFx8diuREuH5o6RtI4QXz1qb9sdhW/232vVpfW82zWUrgXUUbWotfUk+2Nz4RjLNYvxZ6nJUzwswFIzHg5nx5z7pqXKowjRglQbeK3rLCRnxxKNSxmwe+vUuM6weDIknx1rV8KT+FLDhR4PAcqYzo69dmhu3LrSIgstThq7p0F7loF5BsuxZDkJ0WDcA7RhjRPOahW03r9dleFTw+0tt2TWCOk1kCtDChzXIj14LwWSJc4J5BjeEtbOZIE/VEQosXx//9jMi8WD6NuYJitXSoibldS6Di83w2iIjAlXZf9iPtqPzhDrCT2DCVE/595SaowIRNdH9TvCKwM3K4O7BsVNsB6uOrh3kpTKb5grB5bNB26C1dzjUoxzx8GNCJFGbl2mckW55fhwuwCANRjtUSMAAJSBZVsDN7PjGIgPmAMRAgAAAAAAAAAAYB3+Aa2KbhaHcjd0AAAAAElFTkSuQmCC",[[1.47066364891549,103.605646858975],[1.16218335265381,104.087962389458]],0.698039215686274,null,"tmap401","kde_hotelsSG_bw_raster"]},{"method":"addLegend","args":[{"colors":["#EEECF4","#C6C7E1","#9490C3","#6A51A3"],"labels":["0.00000 to 0.00005","0.00005 to 0.00010","0.00010 to 0.00015","0.00015 to 0.00020"],"na_color":null,"na_label":"NA","opacity":0.698039215686274,"position":"topright","type":"unknown","title":"v","extra":null,"layerId":"legend401","className":"info legend kde_hotelsSG_bw_raster","group":"kde_hotelsSG_bw_raster"}]},{"method":"addLayersControl","args":[[],"kde_hotelsSG_bw_raster",{"collapsed":true,"autoZIndex":true,"position":"topleft"}]}],"limits":{"lat":[1.16218335265381,1.47066364891549],"lng":[103.605646858975,104.087962389458]},"fitBounds":[1.1641988317039,103.605646858975,1.4706519681352,104.085357795856,[]]},"evals":[],"jsHooks":[]}</script>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>tmap_mode</span><span class='op'>(</span><span class='st'>"plot"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>Analysis: From the raster map, we can see that areas such as Gelang and Clarke Quay have highest density of hotels with about 0.00015 to 0.00020 units per square meter. Areas like Rochor and Chinatown have high density of about 0.00005 to 0.00010 units per square meter.</p>
<h4 id="mrtlrt-1">5.1.1.3 MRTLRT</h4>
<h5 id="rescale-kde-values-1">5.1.1.3.1 Rescale KDE values</h5>
<p>The following code chunk rescale the KDE value of mrtlrtSG_ppp using rescale function of spatstat from meter to kilometer.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>mrtlrtSG_ppp.km</span> <span class='op'>&lt;-</span> <span class='fu'>rescale</span><span class='op'>(</span><span class='va'>mrtlrtSG_ppp</span>, <span class='fl'>1000</span>, <span class='st'>"km"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<h5 id="kde-map-and-point-map-in-km-2">5.1.1.3.2 KDE Map and Point Map in km</h5>
<p>The following code chunk is similar to Airbnb0619s code chunk (5.1.1.1.4).</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>kde_mrtlrtSG_bw.km</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>mrtlrtSG_ppp.km</span>,
                              sigma<span class='op'>=</span><span class='va'>bw.diggle</span>,
                              edge<span class='op'>=</span><span class='cn'>TRUE</span>,
                            kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span><span class='op'>(</span>mfrow<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_mrtlrtSG_bw.km</span>, main <span class='op'>=</span> <span class='st'>"KDE Map"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>mrtlrtSG_ppp.km</span>, main<span class='op'>=</span><span class='st'>"Point Map"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="takehome-ex02_files/figure-html5/unnamed-chunk-79-1.png" width="624" /></p>
</div>
<p>Analysis: From the kde map above, we can see that the mrt and lrt are available at almost every region. Area with higher density of MRT are North-East, North-West and Central South region with about 2 to 3 units per square kilometer, as shown by the pink orange patch on the kde map. The black patches on the point map also concentrates in these three region.</p>
<h5 id="convert-kde-output-into-grid-object-in-km-2">5.1.1.3.3 Convert KDE output into grid object in km</h5>
<p>The following code chunk converts KDE output into grid object using as.SpatialGridDataFrame.im function of maptools, and plot the grid object using spplot function of raster package.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>gridded_kde_mrtlrtSG_bw.km</span> <span class='op'>&lt;-</span> <span class='fu'>as.SpatialGridDataFrame.im</span><span class='op'>(</span><span class='va'>kde_mrtlrtSG_bw.km</span><span class='op'>)</span>
<span class='fu'>spplot</span><span class='op'>(</span><span class='va'>gridded_kde_mrtlrtSG_bw.km</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="takehome-ex02_files/figure-html5/unnamed-chunk-80-1.png" width="624" /></p>
</div>
<p>Analysis: The above density map shows a clearer visualization of the density of Mrt and Lrt using grid. We can see that the Mrt and Lrt are available almost every region in Singapore as represented by the light blue grid on the map. The north-east, north-west and central south area have higher density of Mrt and Lrt as seen by the pink to yellow grid cluster on the map. There are many regions with 1 units per square meter as shown by blue green.</p>
<h5 id="plot-raster-on-osm-1">5.1.1.3.4 Plot raster on osm</h5>
<p>The following code chunk is similar to Hotels (5.1.1.2.4)</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>kde_mrtlrtSG_bw</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>mrtlrtSG_ppp</span>,
                              sigma<span class='op'>=</span><span class='va'>bw.diggle</span>,
                              edge<span class='op'>=</span><span class='cn'>TRUE</span>,
                            kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span>

<span class='va'>gridded_kde_mrtlrtSG_bw</span> <span class='op'>&lt;-</span> <span class='fu'>as.SpatialGridDataFrame.im</span><span class='op'>(</span><span class='va'>kde_mrtlrtSG_bw</span><span class='op'>)</span>

<span class='va'>kde_mrtlrtSG_bw_raster</span> <span class='op'>&lt;-</span> <span class='fu'>raster</span><span class='op'>(</span><span class='va'>gridded_kde_mrtlrtSG_bw</span><span class='op'>)</span>
<span class='fu'>projection</span><span class='op'>(</span><span class='va'>kde_mrtlrtSG_bw_raster</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'>CRS</span><span class='op'>(</span><span class='st'>"+init=EPSG:3414"</span><span class='op'>)</span>

<span class='fu'>tmap_mode</span><span class='op'>(</span><span class='st'>"view"</span><span class='op'>)</span>
<span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>kde_mrtlrtSG_bw_raster</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>tm_raster</span><span class='op'>(</span><span class='st'>"v"</span>, palette <span class='op'>=</span> <span class='st'>"Purples"</span>, alpha <span class='op'>=</span> <span class='fl'>0.7</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_basemap</span><span class='op'>(</span><span class='st'>"OpenStreetMap"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<div id="htmlwidget-8429c3849df03ae29c3d" style="width:624px;height:384px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-8429c3849df03ae29c3d">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"createMapPane","args":["tmap401",401]},{"method":"addProviderTiles","args":["OpenStreetMap",null,"OpenStreetMap",{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"pane":"tilePane"}]},{"method":"addRasterImage","args":["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKEAAABnCAYAAABo4CIfAAAF4ElEQVR4nO2dO08dMRBGTURJFVKTNEgoJQ1KmvzFFPlDERKIJmUUKU2gJlT0N5XJ4vVjbM/YY/s7UiQC9+7De3b83NkjA4wxxjw9Ph9Cf3v77uSo5bGsBgrXhAXcyvf0+HyAjDIsXaix6JcCQvKxZEHWyOcCGet50/sAWsMpIOBhqbtYSkBEwzrUFh5XR6Bl5IOMZagqtJQwuRe5V9ULGfNQ0ybkFgYCjoMKCanCcH9Oit77H42udy3HxXIHlGu3xwGiYR7dCkuLMBJAwjy6VMczC2jM/OeXIvf8m92xK10YXyTE3HMY8UJZST5j9gJSFkfkYrc5i9SiJ7GagJa3706OKOdeIpFvu6PLqGKIZjZaDyU9PT4fpG94ye1DwkaEopUr0Lev14eb2/vDze0920XnklRKxGOJjYI9qWr029dr7wV2OzSxcVH3/26zQKJ9yoHIzldtC5bw6/dfY4wxP+4eXn53eXX28vPF+WlSktry7i0hquMBoCzssP9aHRMn7NUxoiAdGwVdbFS8vDp7qVK5hmU0isoqIQSkExLQ5eb2/uC2A2OdHPu3kYZy0DFpBFU6H1u5ckTSKp0LJByEbWQLyRXqRWsHEnZm2yv2cXF+uvvdbPPQU0poqz7fBdSET8Dt8EyMEhG1Zplg3XHLjsm2jXVxfhpsc2kS0T1GV0JXQOqxUwXifoaHiynGCVMXVwsX56evxNpK5w5Qc948LeaWa2Azv1cUtISqNk2RcItE5A6tY+TYjiTVbcIed5hb/WqNfDHcc+C4WTRHuxhDPVy+hdq+0hoJtdMyGg4roSU1CAwJy2klYtVOegu4xScjBCxniEioSUDQBikxpxiiAW2QCjxFZiMKrg13RISEoAoOIYdItQZ0wR0J0SYE3SFLiCi459fvv6TFqjULWlcAkRBkITFMQ94gIiEwRkZCRMJJGakJAAkBGakZE5YVuWANpCSc8hkT7XCvI2yB5IIGSAiitFhNk5QQVTEfI3UWjGm3nAuR0KH146JaH0+NpRNxP1MLJHTQJkMvYrlsuGvHoISohstwq9yU1D2kp+bUbkUwnKayfoL/5D7n0rJ3HMvgVfpdbrKqY6lwnNon9/5q2mGcnQtJAVMCpV510f0ZE0puY44UtbFMU6lce6XkVpep71PyyUjJNktSpOKOSU2Est91JXOl1J59ygr48/sfY4wxH7982H2GW0DN5VGKirnj2Gu4tLdDrYDuz5yMnpM6RVYkdPMml0iSm3E0VE2XytmiN/rj7oGc4i3GrNK57CQslYojRzLl8xSJJaOnlZh79mMV4XwUtQl9bbVtdCp9Z9uIF8LXDry8OjOfP71vNuMwOjsJpdphsSEAX8fE97mZmPW8SijumISEoeTI80XR0uPwIXmBUw83baMgoPEqEnJHwNT2KNU3pZr2Sd6zZ31ze3+wbccRhpp6IzJEE0tP22LWRdOwDgRMQ3pLuYVSmCWzLTli1syFcuJ7MaIx/uSckDDOsTG8L39u+b0toeqXc6rRB8d44OpkJdrmSsydQ2qOOUTqHXBcx2fM/6j4+dP7I/uybHRO6AwhoeT2OY8f1W4ZzeaOU3OfvS5g7gsLZ5/H7QF5xqSm0N0X/7VYKpYDdWzTbRb0WF85I8HeMed703zbo4jYA18ZaD3WWfD2jiUKlzIwre2iuseMiCeDd+649UFoks/XXKipIUCaro98ar2gsXbrSossWrEr7JoCpVZXo100LMeSZTdEg3YPaA3rOOGsUSF0XrOeb2tUPOhUwzZyS75cWnoN5MqQBo5zkW68U7NDQJQxGD4S5vZkgT6aSCixfH87baYl4kH6MoISSravJPCJaKNkq/PQcjOMhkibcFW2D+aj/OggSWYl6BDVczxCvhftQLo6sp8RXhlUszKoK1DcBOuh6gLXdpJ8+Q1j20Fk04GawerW2R+AHtRI2CsiQdb+TFUVxZbjo9oFAKzBaFONAACQBpFtDdT0jl0gH+gOJAQAAAAAAAAAAMA6/AN9JQJFc+6ZUAAAAABJRU5ErkJggg==",[[1.47066364891549,103.605646858975],[1.16218335265381,104.087962389458]],0.698039215686274,null,"tmap401","kde_mrtlrtSG_bw_raster"]},{"method":"addLegend","args":[{"colors":["#EEECF4","#C6C7E1","#9490C3","#6A51A3"],"labels":["0.000000 to 0.000001","0.000001 to 0.000002","0.000002 to 0.000003","0.000003 to 0.000004"],"na_color":null,"na_label":"NA","opacity":0.698039215686274,"position":"topright","type":"unknown","title":"v","extra":null,"layerId":"legend401","className":"info legend kde_mrtlrtSG_bw_raster","group":"kde_mrtlrtSG_bw_raster"}]},{"method":"addLayersControl","args":[[],"kde_mrtlrtSG_bw_raster",{"collapsed":true,"autoZIndex":true,"position":"topleft"}]}],"limits":{"lat":[1.16218335265381,1.47066364891549],"lng":[103.605646858975,104.087962389458]},"fitBounds":[1.1641988317039,103.605646858975,1.4706519681352,104.085357795856,[]]},"evals":[],"jsHooks":[]}</script>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>tmap_mode</span><span class='op'>(</span><span class='st'>"plot"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>Analysis: From the raster map above, we can confirm that North-east, North-west and Central south area have higher density of Mrt and Lrt of about 0.000002 to 0.000003 units per square meter, as shown by the purple grid on the map.</p>
<h4 id="tourist-attractions">5.1.1.4 Tourist Attractions</h4>
<h5 id="rescale-kde-values-2">5.1.1.4.1 Rescale KDE values</h5>
<p>The following code chunk rescale the KDE value of mrtlrtSG_ppp using rescale function of spatstat from meter to kilometer.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>tourismSG_ppp.km</span> <span class='op'>&lt;-</span> <span class='fu'>rescale</span><span class='op'>(</span><span class='va'>tourismSG_ppp</span>, <span class='fl'>1000</span>, <span class='st'>"km"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<h5 id="kde-map-and-point-map-in-km-3">5.1.1.4.2 KDE Map and Point Map in km</h5>
<p>The following code chunk is similar to Airbnb0619s code chunk (5.1.1.1.4).</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>kde_tourismSG_bw.km</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>tourismSG_ppp.km</span>,
                              sigma<span class='op'>=</span><span class='va'>bw.diggle</span>,
                              edge<span class='op'>=</span><span class='cn'>TRUE</span>,
                            kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span><span class='op'>(</span>mfrow<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_tourismSG_bw.km</span>, main <span class='op'>=</span> <span class='st'>"KDE Map"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>tourismSG_ppp</span>, main<span class='op'>=</span><span class='st'>"Point Map"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="takehome-ex02_files/figure-html5/unnamed-chunk-83-1.png" width="624" /></p>
</div>
<p>Analysis: From the kde map above, we can see that the south-east region near the central area have higher density of tourist attraction as shown on the pink-yellow spots with about 10 - 20 units per square kilometer. In the point map, the black patches also concentrates at the south-east region near central, with some individual attraction in north, west and east as shown by the individual point.</p>
<h5 id="convert-kde-output-into-grid-object-in-km-3">5.1.1.4.3 Convert KDE output into grid object in km</h5>
<p>The following code chunk converts KDE output into grid object using as.SpatialGridDataFrame.im function of maptools, and plot the grid object using spplot function of raster package.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>gridded_kde_tourismSG_bw.km</span> <span class='op'>&lt;-</span> <span class='fu'>as.SpatialGridDataFrame.im</span><span class='op'>(</span><span class='va'>kde_tourismSG_bw.km</span><span class='op'>)</span>
<span class='fu'>spplot</span><span class='op'>(</span><span class='va'>gridded_kde_tourismSG_bw.km</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="takehome-ex02_files/figure-html5/unnamed-chunk-84-1.png" width="624" /></p>
</div>
<p>Analysis: The above density map shows a clearer visualization of the density of tourist attraction in Singapore using grid. We can see that there are a few attractions in the north, west and east as seen by the light blue grid on the map. The south central area have high density of tourist attractions as seen by the pink yellow grid on the map with about 10 to 20 units per square meter.</p>
<h5 id="plot-raster-on-osm-2">5.1.1.4.4 Plot raster on osm</h5>
<p>The following code chunk is similar to Hotels (5.1.1.2.4)</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>kde_tourismSG_bw</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>tourismSG_ppp</span>,
                              sigma<span class='op'>=</span><span class='va'>bw.diggle</span>,
                              edge<span class='op'>=</span><span class='cn'>TRUE</span>,
                            kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span>

<span class='va'>gridded_kde_tourismSG_bw</span> <span class='op'>&lt;-</span> <span class='fu'>as.SpatialGridDataFrame.im</span><span class='op'>(</span><span class='va'>kde_tourismSG_bw</span><span class='op'>)</span>

<span class='va'>kde_tourismSG_bw_raster</span> <span class='op'>&lt;-</span> <span class='fu'>raster</span><span class='op'>(</span><span class='va'>gridded_kde_tourismSG_bw</span><span class='op'>)</span>
<span class='fu'>projection</span><span class='op'>(</span><span class='va'>kde_tourismSG_bw_raster</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'>CRS</span><span class='op'>(</span><span class='st'>"+init=EPSG:3414"</span><span class='op'>)</span>

<span class='fu'>tmap_mode</span><span class='op'>(</span><span class='st'>"view"</span><span class='op'>)</span>
<span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>kde_tourismSG_bw_raster</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>tm_raster</span><span class='op'>(</span><span class='st'>"v"</span>, palette <span class='op'>=</span> <span class='st'>"Purples"</span>, alpha <span class='op'>=</span> <span class='fl'>0.7</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_basemap</span><span class='op'>(</span><span class='st'>"OpenStreetMap"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<div id="htmlwidget-42c5c8d5ef1378db50aa" style="width:624px;height:384px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-42c5c8d5ef1378db50aa">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"createMapPane","args":["tmap401",401]},{"method":"addProviderTiles","args":["OpenStreetMap",null,"OpenStreetMap",{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"pane":"tilePane"}]},{"method":"addRasterImage","args":["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKEAAABnCAYAAABo4CIfAAAFAklEQVR4nO2dO27cMBCGx4ErFzFcxQiCXGDhE+TkPkBOYKhJaRjGpjLswu2mCGTIXEp8zQxnxP/r9qEX+esnOaKGFwSIiOj15f209tv1zdWF5rmMBgqX1gW4FN/ry/sJYpRh6ELdcr8UECQfQxZki/hCIMZ2vvQ+AW04BQh4GOoulhIg3LANs4XHNRDQdD6IsQ5ThZYSTGkl92p6IcYyzPQJuQUDAfrBhAhzBcP9Pyl6H98bXe9ajsoKA8qt++MAblhGt8KyIhgJIMIyujTHexYg0f6vL0Xp9avdsSNVTMwJ8ex5HfFCGUl8ROcCzJkcUcq8z72IWvQiRhPgzPXN1UXOtdeIKLZf72I0EaLZG9qhpNeX95P0DS+5f4hQiTW3CgU0f+asdK79SQkRzXFHUjHOuVnfEnBq/1zdAsl+qIgIIT5eUhXfWt69+5QQoRNyhVJT9rsTIQTIS9iktrpib8HFYD0hCFCG3Beulr95CuVc9j4BkGYprhIhWRVdCJzQIV7ElQvihA7Z280OJ3QM5+sOPd0VTugYzicrPQ0EA5MBsN5CsVmw9QsdgbV5jBz7kcTVe71AB20Rok8IztA2FogQRNEUYpPtoineL5pNcvN7DmAcpISJ5hhkY2pmNVxwbLgdESIETXAI0kWqNWALbidEnxB0J1uEcEEgBZwQFCERpoEIQXcgQtAdiBBk0/WJCQYlQBI4IchCckIDpveDTTRm02RnYwLjoTWdC04IomylEwn/0wpECKJs5bLhbh1XByYaKWhBH6ylEcl2wtysn8AWLYJb21ZtPmEouF7Ld0H8dbSmCOn+jknO2hscKWq3kj+mcu0Be81qLdUDkxaHChOCz/sJRellFaSn57dPn398/yp2LA/lUYqJ0fHWMlxwwX0Kb0n10gS5/93aNnVcD+J8en6j6eFIRESHu1tWF9y7+GbOnLBWVBw5knP+n5M2V1Og08ORpoe/H59rRTiK4GJUNcexvtrSnWrXbPNaEY+/H4mI6HD37eM7zScO3jkToVRTlxPy8ZRxfuZwd0vTr58fn5+e37Lc0Pp1aVI9lWtNMDk58mIuWnseMXpXcO/jeyNrbd41ahd2CZuqlPuWHkcrvnh//4eI/rthyOyGnkJNvRAJ0eQISlIgGpUexgaJ4oMSCDBNkROWrAa5tW2Lc9WueMnNUoSpPiBEuM0lEe/iz5rbLVlr0qWeeUs+FRmNokTbXIm5SyhdYHCmZZ3gWlrDVKNi4rFdipoK3dpGckYQxFeO2tt2a+Gb5e9a51J73PkaUtcCyiia1Fp7kOW2W+GYnnMWw+9ig6ewW4CpZjysjo45102L7S9HiD2IlYHVc90L0dGxROHmdNitVeo0HT+dMxxPhuizY+2TsCS+ZbM7h2FaWgiQpuvo2GqFbvVbPU6ysM5ZYbcUaG5z5a3SMB1LlrMQDfo9QBvWOOFeXUHr/dtRcZ8abuncklkjpOdAjkxW4LgU6c57KpAscUwgh3snLB3JAnuoiFBi+v7ysZkVx4Po69hNVq6YEGeX1LoOKzeDN0T6hKMyz2GcpuPpcLhF+WXiYj6hZWI3MQRYxqWllBpeQavRRvE7wiODN+dkMFeguAnGw1QFtw6SYvkNt/YDZ7OBmWA1d78U/Vw/mBFhL0eCWPuzq6YofIUAM6IBAOPh7VEjAACkgbONgZnRcQjEB7oDEQIAAAAAAAAAAGAc/gExsGvnENP4RwAAAABJRU5ErkJggg==",[[1.47066364891549,103.605646858975],[1.16218335265381,104.087962389458]],0.698039215686274,null,"tmap401","kde_tourismSG_bw_raster"]},{"method":"addLegend","args":[{"colors":["#F1EFF6","#D5D5E8","#AAA8D0","#7F7BB9","#61409B"],"labels":["0.000000 to 0.000005","0.000005 to 0.000010","0.000010 to 0.000015","0.000015 to 0.000020","0.000020 to 0.000025"],"na_color":null,"na_label":"NA","opacity":0.698039215686274,"position":"topright","type":"unknown","title":"v","extra":null,"layerId":"legend401","className":"info legend kde_tourismSG_bw_raster","group":"kde_tourismSG_bw_raster"}]},{"method":"addLayersControl","args":[[],"kde_tourismSG_bw_raster",{"collapsed":true,"autoZIndex":true,"position":"topleft"}]}],"limits":{"lat":[1.16218335265381,1.47066364891549],"lng":[103.605646858975,104.087962389458]},"fitBounds":[1.1641988317039,103.605646858975,1.4706519681352,104.085357795856,[]]},"evals":[],"jsHooks":[]}</script>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>tmap_mode</span><span class='op'>(</span><span class='st'>"plot"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>Analysis: From the raster map above, we can confirm the the south-east area near central region have highest density of tourist attraction with about 0.000020 to 0.000025 units per square meter as shown by the dark purple grid on the map.</p>
<h4 id="comparison-between-airbnb0619-hotels-mrtlrt-and-tourist-attractions">5.1.1.5 Comparison between Airbnb0619, Hotels, MRTLRT and Tourist Attractions</h4>
<h5 id="kde-map-comparison">5.1.1.5.1 KDE Map Comparison</h5>
<p>The following code chunk plots the KDE map of Airbnb 2019, Hotel, MRTLRT and Tourist Attractions side by side using par functions of graphics package</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span><span class='op'>(</span>mfrow<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>,<span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_airbnb0619SG_bw.km</span>, main <span class='op'>=</span> <span class='st'>"Airbnb 2019"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_hotelsSG_bw.km</span>, main <span class='op'>=</span> <span class='st'>"Hotel"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_mrtlrtSG_bw.km</span>, main <span class='op'>=</span> <span class='st'>"Mrt"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_tourismSG_bw.km</span>, main <span class='op'>=</span> <span class='st'>"Tourist Attraction"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="takehome-ex02_files/figure-html5/unnamed-chunk-86-1.png" width="624" /></p>
</div>
<p>From the above, we can see that the common area with high density (in red and yellow) of Airbnb, hotel, mrt and tourist attraction are concentrated around the south east area near the central region.</p>
<h4 id="comparing-spatial-point-patterns-using-kde">5.1.1.6 Comparing Spatial Point Patterns using KDE</h4>
<p>From the Airbnb kde map above, we noticed that areas such as Kallang, Geylang, Chinatown and Anson have a higher density as shown by the darker purple grid. Hence, we will look into these areas.</p>
<p>Subzone Kallang = Planning Area Kallang</p>
<p>Subzone Geylang = Planning Area Geylang</p>
<p>Subzone Chinatown = Planning Area Outram</p>
<p>Subzone Anson = Planning Area Downtown Core</p>
<h5 id="extract-study-area">5.1.1.6.1 Extract Study Area</h5>
<p>The following code chunk extracts the target areas (Kallang, Geylang, Outram, Downtown Core).</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>kl</span> <span class='op'>=</span> <span class='va'>mpsz</span><span class='op'>[</span><span class='va'>mpsz</span><span class='op'>@</span><span class='va'>data</span><span class='op'>$</span><span class='va'>PLN_AREA_N</span> <span class='op'>==</span> <span class='st'>"KALLANG"</span>,<span class='op'>]</span>
<span class='va'>gl</span> <span class='op'>=</span> <span class='va'>mpsz</span><span class='op'>[</span><span class='va'>mpsz</span><span class='op'>@</span><span class='va'>data</span><span class='op'>$</span><span class='va'>PLN_AREA_N</span> <span class='op'>==</span> <span class='st'>"GEYLANG"</span>,<span class='op'>]</span>
<span class='va'>ot</span> <span class='op'>=</span> <span class='va'>mpsz</span><span class='op'>[</span><span class='va'>mpsz</span><span class='op'>@</span><span class='va'>data</span><span class='op'>$</span><span class='va'>PLN_AREA_N</span> <span class='op'>==</span> <span class='st'>"OUTRAM"</span>,<span class='op'>]</span>
<span class='va'>dc</span> <span class='op'>=</span> <span class='va'>mpsz</span><span class='op'>[</span><span class='va'>mpsz</span><span class='op'>@</span><span class='va'>data</span><span class='op'>$</span><span class='va'>PLN_AREA_N</span> <span class='op'>==</span> <span class='st'>"DOWNTOWN CORE"</span>,<span class='op'>]</span>
</code></pre>
</div>
</details>
</div>
<h5 id="plot-target-areas">5.1.1.6.2 Plot target areas</h5>
<p>The following code chunk plots the target areas side by side in 2x2 using par function of graphics package and plot functions of base R package.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span><span class='op'>(</span>mfrow<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>,<span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kl</span>, main <span class='op'>=</span> <span class='st'>"KALLANG"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>gl</span>, main <span class='op'>=</span> <span class='st'>"GEYLANG"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>ot</span>, main <span class='op'>=</span> <span class='st'>"OUTRAM"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>dc</span>, main <span class='op'>=</span> <span class='st'>"DOWNTOWN CORE"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="takehome-ex02_files/figure-html5/unnamed-chunk-88-1.png" width="624" /></p>
</div>
<h5 id="convert-spatial-polygons-data-fraeme-into-generic-sp-format">5.1.1.6.3 Convert Spatial Polygons Data Fraeme into generic SP format</h5>
<p>The following code chunk converts the four SpatialPolygonsDataFrame layers into generic spatialpolygons layers.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>kl_sp</span> <span class='op'>=</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>kl</span>, <span class='st'>"SpatialPolygons"</span><span class='op'>)</span>
<span class='va'>gl_sp</span> <span class='op'>=</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>gl</span>, <span class='st'>"SpatialPolygons"</span><span class='op'>)</span>
<span class='va'>ot_sp</span> <span class='op'>=</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>ot</span>, <span class='st'>"SpatialPolygons"</span><span class='op'>)</span>
<span class='va'>dc_sp</span> <span class='op'>=</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>dc</span>, <span class='st'>"SpatialPolygons"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<h5 id="create-owin-object-for-each-target-area">5.1.1.6.4 Create owin object for each target area</h5>
<p>The following code chunk convert the SpatialPolygons objects into owin objects required by spatstat.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>kl_owin</span> <span class='op'>=</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>kl_sp</span>, <span class='st'>"owin"</span><span class='op'>)</span>
<span class='va'>gl_owin</span> <span class='op'>=</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>gl_sp</span>, <span class='st'>"owin"</span><span class='op'>)</span>
<span class='va'>ot_owin</span> <span class='op'>=</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>ot_sp</span>, <span class='st'>"owin"</span><span class='op'>)</span>
<span class='va'>dc_owin</span> <span class='op'>=</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>dc_sp</span>, <span class='st'>"owin"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<h5 id="combine-airnbnb0619-hotels-mrt-tourist-attractions-points-with-owin-of-each-target-area">5.1.1.6.5 Combine airnbnb0619, hotels, mrt, tourist attractions points with owin of each target area</h5>
<p>The following code chunk extracts airnbnb0619, hotels, mrt and tourist attractions within each specific region.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>airbnb0619_kl_ppp</span> <span class='op'>=</span> <span class='va'>airbnb0619_ppp_jit</span><span class='op'>[</span><span class='va'>kl_owin</span><span class='op'>]</span>
<span class='va'>airbnb0619_gl_ppp</span> <span class='op'>=</span> <span class='va'>airbnb0619_ppp_jit</span><span class='op'>[</span><span class='va'>gl_owin</span><span class='op'>]</span>
<span class='va'>airbnb0619_ot_ppp</span> <span class='op'>=</span> <span class='va'>airbnb0619_ppp_jit</span><span class='op'>[</span><span class='va'>ot_owin</span><span class='op'>]</span>
<span class='va'>airbnb0619_dc_ppp</span> <span class='op'>=</span> <span class='va'>airbnb0619_ppp_jit</span><span class='op'>[</span><span class='va'>dc_owin</span><span class='op'>]</span>

<span class='va'>hotels_kl_ppp</span> <span class='op'>=</span> <span class='va'>hotels_ppp_jit</span><span class='op'>[</span><span class='va'>kl_owin</span><span class='op'>]</span>
<span class='va'>hotels_gl_ppp</span> <span class='op'>=</span> <span class='va'>hotels_ppp_jit</span><span class='op'>[</span><span class='va'>gl_owin</span><span class='op'>]</span>
<span class='va'>hotels_ot_ppp</span> <span class='op'>=</span> <span class='va'>hotels_ppp_jit</span><span class='op'>[</span><span class='va'>ot_owin</span><span class='op'>]</span>
<span class='va'>hotels_dc_ppp</span> <span class='op'>=</span> <span class='va'>hotels_ppp_jit</span><span class='op'>[</span><span class='va'>dc_owin</span><span class='op'>]</span>

<span class='va'>mrtlrt_kl_ppp</span> <span class='op'>=</span> <span class='va'>mrtlrt_ppp</span><span class='op'>[</span><span class='va'>kl_owin</span><span class='op'>]</span>
<span class='va'>mrtlrt_gl_ppp</span> <span class='op'>=</span> <span class='va'>mrtlrt_ppp</span><span class='op'>[</span><span class='va'>gl_owin</span><span class='op'>]</span>
<span class='va'>mrtlrt_ot_ppp</span> <span class='op'>=</span> <span class='va'>mrtlrt_ppp</span><span class='op'>[</span><span class='va'>ot_owin</span><span class='op'>]</span>
<span class='va'>mrtlrt_dc_ppp</span> <span class='op'>=</span> <span class='va'>mrtlrt_ppp</span><span class='op'>[</span><span class='va'>dc_owin</span><span class='op'>]</span>

<span class='va'>tourism_kl_ppp</span> <span class='op'>=</span> <span class='va'>tourism_ppp_jit</span><span class='op'>[</span><span class='va'>kl_owin</span><span class='op'>]</span>
<span class='va'>tourism_gl_ppp</span> <span class='op'>=</span> <span class='va'>tourism_ppp_jit</span><span class='op'>[</span><span class='va'>gl_owin</span><span class='op'>]</span>
<span class='va'>tourism_ot_ppp</span> <span class='op'>=</span> <span class='va'>tourism_ppp_jit</span><span class='op'>[</span><span class='va'>ot_owin</span><span class='op'>]</span>
<span class='va'>tourism_dc_ppp</span> <span class='op'>=</span> <span class='va'>tourism_ppp_jit</span><span class='op'>[</span><span class='va'>dc_owin</span><span class='op'>]</span>
</code></pre>
</div>
</details>
</div>
<h5 id="rescale-from-m-to-km">5.1.1.6.6 Rescale from m to km</h5>
<p>The following code chunk transform the unit from m to km using rescale function.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>airbnb0619_kl_ppp.km</span> <span class='op'>=</span> <span class='fu'>rescale</span><span class='op'>(</span><span class='va'>airbnb0619_kl_ppp</span>, <span class='fl'>1000</span>, <span class='st'>"km"</span><span class='op'>)</span>
<span class='va'>airbnb0619_gl_ppp.km</span> <span class='op'>=</span> <span class='fu'>rescale</span><span class='op'>(</span><span class='va'>airbnb0619_gl_ppp</span>, <span class='fl'>1000</span>, <span class='st'>"km"</span><span class='op'>)</span>
<span class='va'>airbnb0619_ot_ppp.km</span> <span class='op'>=</span> <span class='fu'>rescale</span><span class='op'>(</span><span class='va'>airbnb0619_ot_ppp</span>, <span class='fl'>1000</span>, <span class='st'>"km"</span><span class='op'>)</span>
<span class='va'>airbnb0619_dc_ppp.km</span> <span class='op'>=</span> <span class='fu'>rescale</span><span class='op'>(</span><span class='va'>airbnb0619_dc_ppp</span>, <span class='fl'>1000</span>, <span class='st'>"km"</span><span class='op'>)</span>

<span class='va'>hotels_kl_ppp.km</span> <span class='op'>=</span> <span class='fu'>rescale</span><span class='op'>(</span><span class='va'>hotels_kl_ppp</span>, <span class='fl'>1000</span>, <span class='st'>"km"</span><span class='op'>)</span>
<span class='va'>hotels_gl_ppp.km</span> <span class='op'>=</span> <span class='fu'>rescale</span><span class='op'>(</span><span class='va'>hotels_gl_ppp</span>, <span class='fl'>1000</span>, <span class='st'>"km"</span><span class='op'>)</span>
<span class='va'>hotels_ot_ppp.km</span> <span class='op'>=</span> <span class='fu'>rescale</span><span class='op'>(</span><span class='va'>hotels_ot_ppp</span>, <span class='fl'>1000</span>, <span class='st'>"km"</span><span class='op'>)</span>
<span class='va'>hotels_dc_ppp.km</span> <span class='op'>=</span> <span class='fu'>rescale</span><span class='op'>(</span><span class='va'>hotels_dc_ppp</span>, <span class='fl'>1000</span>, <span class='st'>"km"</span><span class='op'>)</span>

<span class='va'>mrtlrt_kl_ppp.km</span> <span class='op'>=</span> <span class='fu'>rescale</span><span class='op'>(</span><span class='va'>mrtlrt_kl_ppp</span>, <span class='fl'>1000</span>, <span class='st'>"km"</span><span class='op'>)</span>
<span class='va'>mrtlrt_gl_ppp.km</span> <span class='op'>=</span> <span class='fu'>rescale</span><span class='op'>(</span><span class='va'>mrtlrt_gl_ppp</span>, <span class='fl'>1000</span>, <span class='st'>"km"</span><span class='op'>)</span>
<span class='va'>mrtlrt_ot_ppp.km</span> <span class='op'>=</span> <span class='fu'>rescale</span><span class='op'>(</span><span class='va'>mrtlrt_ot_ppp</span>, <span class='fl'>1000</span>, <span class='st'>"km"</span><span class='op'>)</span>
<span class='va'>mrtlrt_dc_ppp.km</span> <span class='op'>=</span> <span class='fu'>rescale</span><span class='op'>(</span><span class='va'>mrtlrt_dc_ppp</span>, <span class='fl'>1000</span>, <span class='st'>"km"</span><span class='op'>)</span>

<span class='va'>tourism_kl_ppp.km</span> <span class='op'>=</span> <span class='fu'>rescale</span><span class='op'>(</span><span class='va'>tourism_kl_ppp</span>, <span class='fl'>1000</span>, <span class='st'>"km"</span><span class='op'>)</span>
<span class='va'>tourism_gl_ppp.km</span> <span class='op'>=</span> <span class='fu'>rescale</span><span class='op'>(</span><span class='va'>tourism_gl_ppp</span>, <span class='fl'>1000</span>, <span class='st'>"km"</span><span class='op'>)</span>
<span class='va'>tourism_ot_ppp.km</span> <span class='op'>=</span> <span class='fu'>rescale</span><span class='op'>(</span><span class='va'>tourism_ot_ppp</span>, <span class='fl'>1000</span>, <span class='st'>"km"</span><span class='op'>)</span>
<span class='va'>tourism_dc_ppp.km</span> <span class='op'>=</span> <span class='fu'>rescale</span><span class='op'>(</span><span class='va'>tourism_dc_ppp</span>, <span class='fl'>1000</span>, <span class='st'>"km"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<h5 id="airbnb-comparison-by-area-in-km">5.1.1.6.7 Airbnb comparison by area in km</h5>
<p>The following code chunk plots airbnb within each area using plot and density functions with sigma set to bw.diggle and kernel set to gaussian.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span><span class='op'>(</span>mfrow<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>,<span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>airbnb0619_kl_ppp.km</span>, 
             sigma<span class='op'>=</span><span class='va'>bw.diggle</span>, 
             edge<span class='op'>=</span><span class='cn'>TRUE</span>, 
             kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span>,
     main<span class='op'>=</span><span class='st'>"Kallang"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>airbnb0619_gl_ppp.km</span>, 
             sigma<span class='op'>=</span><span class='va'>bw.diggle</span>, 
             edge<span class='op'>=</span><span class='cn'>TRUE</span>, 
             kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span>,
     main<span class='op'>=</span><span class='st'>"Geylang"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>airbnb0619_ot_ppp.km</span>, 
             sigma<span class='op'>=</span><span class='va'>bw.diggle</span>, 
             edge<span class='op'>=</span><span class='cn'>TRUE</span>, 
             kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span>,
     main<span class='op'>=</span><span class='st'>"Outram"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>airbnb0619_dc_ppp.km</span>, 
             sigma<span class='op'>=</span><span class='va'>bw.diggle</span>, 
             edge<span class='op'>=</span><span class='cn'>TRUE</span>, 
             kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span>,
     main<span class='op'>=</span><span class='st'>"Downtown Core"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="takehome-ex02_files/figure-html5/unnamed-chunk-93-1.png" width="624" /></p>
</div>
<p>Analysis: From the comparison, we noticed that the scale range for each region are different. For example, Kallang have a smaller scale range from 0 - 2000 units per square kilometer as compared to Geylang with a larger scale range of 0 - 5000 units per square kilometer. In Kallang, Airbnb are denser around the North-west area with highest density of around 1500 to 2500 units per square kilometer. In Geylang, Airbnb are denser at South area with highest density of 2000 to 5000 units per square kilometer. In Outram, the Central area are denser with highest density of Airbnb of around 2000 to 4000 units per square kilometer. In Downtown Core, the South-west region have highest density of Airbnb at about 2000 to 4000 units per square kilometer.</p>
<h5 id="airbnb-raster-within-area">5.1.1.6.8 Airbnb raster within area</h5>
<h6 id="kallang">5.1.1.6.8.1 Kallang</h6>
<ol type="1">
<li><p>The following code chunk first get bounding box of the area using getbb function of osmdata package. The function takes in place_name of the area and output format of sf_polygon</p></li>
<li><p>set bb projecion to 3414 using st_set_crs function of sf package</p></li>
<li><p>read open street map data using read_osm function of tmaptools package</p></li>
<li><p>Compute kernel density using density function of spatstat package with sigma set as bw.diggle and kernel set as gaussian.</p></li>
<li><p>Note that we will be using ppp in m.</p></li>
<li><p>Convert KDE output into grid object using as.SpatialGridDataFrame.im function of maptools</p></li>
<li><p>Convert grid object into raster using raster function of raster package</p></li>
<li><p>Assign CRS to raster layer</p></li>
<li><p>Plot the raster on static OpenstreetMap basemap</p></li>
<li><p>first tm_shape is the static osm obtained earlier with tm_rgb of tmao</p></li>
<li><p>second tm_shape is the raster layer</p></li>
<li><p>tm_raster with setting of alpha = 0.7 makes the raster layer slightly transparent so that the basemap can be seen, palette set to Purples, layout of the legend at the bottom right area.</p></li>
</ol>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>kl_bb</span> <span class='op'>&lt;-</span> <span class='fu'>getbb</span><span class='op'>(</span><span class='st'>"kallang singapore"</span>, format_out <span class='op'>=</span> <span class='st'>"sf_polygon"</span><span class='op'>)</span>
<span class='fu'>st_set_crs</span><span class='op'>(</span><span class='va'>kl_bb</span>, <span class='fl'>3414</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>Simple feature collection with 1 feature and 0 fields
Geometry type: POLYGON
Dimension:     XY
Bounding box:  xmin: 103.8444 ymin: 1.293852 xmax: 103.8855 ymax: 1.330438
Projected CRS: SVY21 / Singapore TM
                        geometry
1 POLYGON ((103.8444 1.310547...</code></pre>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>kl_bb_osm</span> <span class='op'>&lt;-</span> <span class='fu'>read_osm</span><span class='op'>(</span><span class='va'>kl_bb</span>, type <span class='op'>=</span> <span class='st'>"osm"</span><span class='op'>)</span>

<span class='va'>kde_airbnb0619_kl_bw</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>airbnb0619_kl_ppp</span>, 
                              sigma<span class='op'>=</span><span class='va'>bw.diggle</span>, 
                               edge<span class='op'>=</span><span class='cn'>TRUE</span>, 
                               kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span>

<span class='va'>gridded_kde_airbnb0619_kl_bw</span> <span class='op'>&lt;-</span> <span class='fu'>as.SpatialGridDataFrame.im</span><span class='op'>(</span><span class='va'>kde_airbnb0619_kl_bw</span><span class='op'>)</span>
<span class='va'>kde_airbnb0619_kl_bw_raster</span> <span class='op'>&lt;-</span> <span class='fu'>raster</span><span class='op'>(</span><span class='va'>gridded_kde_airbnb0619_kl_bw</span><span class='op'>)</span>
<span class='fu'>projection</span><span class='op'>(</span><span class='va'>kde_airbnb0619_kl_bw_raster</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'>CRS</span><span class='op'>(</span><span class='st'>"+init=EPSG:3414"</span><span class='op'>)</span>

<span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>kl_bb_osm</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>tm_rgb</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>kde_airbnb0619_kl_bw_raster</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>tm_raster</span><span class='op'>(</span><span class='st'>"v"</span>, palette <span class='op'>=</span> <span class='st'>"Purples"</span>, alpha <span class='op'>=</span> <span class='fl'>0.7</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_layout</span><span class='op'>(</span>legend.position <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"right"</span>, <span class='st'>"bottom"</span><span class='op'>)</span>, frame <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="takehome-ex02_files/figure-html5/unnamed-chunk-94-1.png" width="624" /></p>
</div>
<h6 id="geylang">5.1.1.6.8.2 Geylang</h6>
<p>The following code chunk is similar to 5.1.1.6.8.1</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>gl_bb</span> <span class='op'>&lt;-</span> <span class='fu'>getbb</span><span class='op'>(</span><span class='st'>"geylang singapore"</span>, format_out <span class='op'>=</span> <span class='st'>"sf_polygon"</span><span class='op'>)</span>
<span class='fu'>st_set_crs</span><span class='op'>(</span><span class='va'>gl_bb</span>, <span class='fl'>3414</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>Simple feature collection with 1 feature and 0 fields
Geometry type: POLYGON
Dimension:     XY
Bounding box:  xmin: 103.8687 ymin: 1.306016 xmax: 103.9068 ymax: 1.337758
Projected CRS: SVY21 / Singapore TM
                        geometry
1 POLYGON ((103.8687 1.327937...</code></pre>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>gl_bb_osm</span> <span class='op'>&lt;-</span> <span class='fu'>read_osm</span><span class='op'>(</span><span class='va'>gl_bb</span>, type <span class='op'>=</span> <span class='st'>"osm"</span><span class='op'>)</span>

<span class='va'>kde_airbnb0619_gl_bw</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>airbnb0619_gl_ppp</span>, 
                              sigma<span class='op'>=</span><span class='va'>bw.diggle</span>, 
                               edge<span class='op'>=</span><span class='cn'>TRUE</span>, 
                               kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span>

<span class='va'>gridded_kde_airbnb0619_gl_bw</span> <span class='op'>&lt;-</span> <span class='fu'>as.SpatialGridDataFrame.im</span><span class='op'>(</span><span class='va'>kde_airbnb0619_gl_bw</span><span class='op'>)</span>
<span class='va'>kde_airbnb0619_gl_bw_raster</span> <span class='op'>&lt;-</span> <span class='fu'>raster</span><span class='op'>(</span><span class='va'>gridded_kde_airbnb0619_gl_bw</span><span class='op'>)</span>
<span class='fu'>projection</span><span class='op'>(</span><span class='va'>kde_airbnb0619_gl_bw_raster</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'>CRS</span><span class='op'>(</span><span class='st'>"+init=EPSG:3414"</span><span class='op'>)</span>

<span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>gl_bb_osm</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>tm_rgb</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>kde_airbnb0619_gl_bw_raster</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>tm_raster</span><span class='op'>(</span><span class='st'>"v"</span>, palette <span class='op'>=</span> <span class='st'>"Purples"</span>, alpha <span class='op'>=</span> <span class='fl'>0.7</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_layout</span><span class='op'>(</span>legend.position <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"right"</span>, <span class='st'>"bottom"</span><span class='op'>)</span>, frame <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="takehome-ex02_files/figure-html5/unnamed-chunk-95-1.png" width="624" /></p>
</div>
<h6 id="outram">5.1.1.6.8.3 Outram</h6>
<p>The following code chunk is similar to 5.1.1.6.8.1</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>ot_bb</span> <span class='op'>&lt;-</span> <span class='fu'>getbb</span><span class='op'>(</span><span class='st'>"outram singapore"</span>, format_out <span class='op'>=</span> <span class='st'>"sf_polygon"</span><span class='op'>)</span>
<span class='fu'>st_set_crs</span><span class='op'>(</span><span class='va'>ot_bb</span>, <span class='fl'>3414</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>Simple feature collection with 1 feature and 0 fields
Geometry type: POLYGON
Dimension:     XY
Bounding box:  xmin: 103.8348 ymin: 1.274151 xmax: 103.8496 ymax: 1.289229
Projected CRS: SVY21 / Singapore TM
                        geometry
1 POLYGON ((103.8348 1.286257...</code></pre>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>ot_bb_osm</span> <span class='op'>&lt;-</span> <span class='fu'>read_osm</span><span class='op'>(</span><span class='va'>ot_bb</span>, type <span class='op'>=</span> <span class='st'>"osm"</span><span class='op'>)</span>

<span class='va'>kde_airbnb0619_ot_bw</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>airbnb0619_ot_ppp</span>, 
                              sigma<span class='op'>=</span><span class='va'>bw.diggle</span>, 
                               edge<span class='op'>=</span><span class='cn'>TRUE</span>, 
                               kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span>

<span class='va'>gridded_kde_airbnb0619_ot_bw</span> <span class='op'>&lt;-</span> <span class='fu'>as.SpatialGridDataFrame.im</span><span class='op'>(</span><span class='va'>kde_airbnb0619_ot_bw</span><span class='op'>)</span>
<span class='va'>kde_airbnb0619_ot_bw_raster</span> <span class='op'>&lt;-</span> <span class='fu'>raster</span><span class='op'>(</span><span class='va'>gridded_kde_airbnb0619_ot_bw</span><span class='op'>)</span>
<span class='fu'>projection</span><span class='op'>(</span><span class='va'>kde_airbnb0619_ot_bw_raster</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'>CRS</span><span class='op'>(</span><span class='st'>"+init=EPSG:3414"</span><span class='op'>)</span>

<span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>ot_bb_osm</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>tm_rgb</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>kde_airbnb0619_ot_bw_raster</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>tm_raster</span><span class='op'>(</span><span class='st'>"v"</span>, palette <span class='op'>=</span> <span class='st'>"Purples"</span>, alpha <span class='op'>=</span> <span class='fl'>0.7</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_layout</span><span class='op'>(</span>legend.position <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"right"</span>, <span class='st'>"bottom"</span><span class='op'>)</span>, frame <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="takehome-ex02_files/figure-html5/unnamed-chunk-96-1.png" width="624" /></p>
</div>
<h6 id="downtown-core">5.1.1.6.8.4 Downtown Core</h6>
<p>The following code chunk is similar to 5.1.1.6.8.1</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>dc_bb</span> <span class='op'>&lt;-</span> <span class='fu'>getbb</span><span class='op'>(</span><span class='st'>"downtown core singapore"</span>, format_out <span class='op'>=</span> <span class='st'>"sf_polygon"</span><span class='op'>)</span>
<span class='fu'>st_set_crs</span><span class='op'>(</span><span class='va'>dc_bb</span>, <span class='fl'>3414</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>Simple feature collection with 1 feature and 0 fields
Geometry type: POLYGON
Dimension:     XY
Bounding box:  xmin: 103.8413 ymin: 1.272075 xmax: 103.865 ymax: 1.303441
Projected CRS: SVY21 / Singapore TM
                        geometry
1 POLYGON ((103.8413 1.274151...</code></pre>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>dc_bb_osm</span> <span class='op'>&lt;-</span> <span class='fu'>read_osm</span><span class='op'>(</span><span class='va'>dc_bb</span>, type <span class='op'>=</span> <span class='st'>"osm"</span><span class='op'>)</span>

<span class='va'>kde_airbnb0619_dc_bw</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>airbnb0619_dc_ppp</span>, 
                              sigma<span class='op'>=</span><span class='va'>bw.diggle</span>, 
                               edge<span class='op'>=</span><span class='cn'>TRUE</span>, 
                               kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span>

<span class='va'>gridded_kde_airbnb0619_dc_bw</span> <span class='op'>&lt;-</span> <span class='fu'>as.SpatialGridDataFrame.im</span><span class='op'>(</span><span class='va'>kde_airbnb0619_dc_bw</span><span class='op'>)</span>
<span class='va'>kde_airbnb0619_dc_bw_raster</span> <span class='op'>&lt;-</span> <span class='fu'>raster</span><span class='op'>(</span><span class='va'>gridded_kde_airbnb0619_dc_bw</span><span class='op'>)</span>
<span class='fu'>projection</span><span class='op'>(</span><span class='va'>kde_airbnb0619_dc_bw_raster</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'>CRS</span><span class='op'>(</span><span class='st'>"+init=EPSG:3414"</span><span class='op'>)</span>

<span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>dc_bb_osm</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>tm_rgb</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>kde_airbnb0619_dc_bw_raster</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>tm_raster</span><span class='op'>(</span><span class='st'>"v"</span>, palette <span class='op'>=</span> <span class='st'>"Purples"</span>, alpha <span class='op'>=</span> <span class='fl'>0.7</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_layout</span><span class='op'>(</span>legend.position <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"right"</span>, <span class='st'>"bottom"</span><span class='op'>)</span>, frame <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="takehome-ex02_files/figure-html5/unnamed-chunk-97-1.png" width="624" /></p>
</div>
<p>Analysis: From the four static raster map above, we can clearly see the exact location with the highest density of Airbnb in each area.</p>
<h5 id="airbnb-hotels-mrt-tourist-attraction-in-each-area-in-km">5.1.1.6.9 Airbnb, Hotels, Mrt, Tourist Attraction in each area in km</h5>
<h6 id="kallang-1">5.1.1.6.9.1 Kallang</h6>
<p>The following code chunk plots airbnb, hotel, mrt and tourist attraction in Kallang.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span><span class='op'>(</span>mfrow<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>,<span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>airbnb0619_kl_ppp.km</span>, main <span class='op'>=</span> <span class='st'>"Airbnb"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>hotels_kl_ppp.km</span>, main <span class='op'>=</span> <span class='st'>"Hotel"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>mrtlrt_kl_ppp.km</span>, main <span class='op'>=</span> <span class='st'>"Mrt"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>tourism_kl_ppp.km</span>, main <span class='op'>=</span> <span class='st'>"Tourist Attraction"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="takehome-ex02_files/figure-html5/unnamed-chunk-98-1.png" width="624" /></p>
</div>
<p>Analysis: Even though there are already some hotels available and only one tourist attraction, there are still many Airbnb in Kallang. There are eight MRT stations, which may be the reason why there are many Airbnb located in this area.</p>
<h6 id="geylang-1">5.1.1.6.9.2 Geylang</h6>
<p>The following code chunk plots airbnb, hotel, mrt and tourist attraction in Geylang.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span><span class='op'>(</span>mfrow<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>,<span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>airbnb0619_gl_ppp.km</span>, main <span class='op'>=</span> <span class='st'>"Airbnb"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>hotels_gl_ppp.km</span>, main <span class='op'>=</span> <span class='st'>"Hotel"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>mrtlrt_gl_ppp.km</span>, main <span class='op'>=</span> <span class='st'>"Mrt"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>tourism_gl_ppp.km</span>, main <span class='op'>=</span> <span class='st'>"Tourist Attraction"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="takehome-ex02_files/figure-html5/unnamed-chunk-99-1.png" width="624" /></p>
</div>
<p>Analysis: Similar to Kallang, even though there are already quite a number of hotels in Geylang and no tourist attraction, there are still many Airbnb. There are a number of Mrt stations, which may be the reason why there are many Airbnb located in this area.</p>
<h6 id="outram-1">5.1.1.6.9.3 Outram</h6>
<p>The following code chunk plots airbnb, hotel, mrt and tourist attraction in Outram.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span><span class='op'>(</span>mfrow<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>,<span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>airbnb0619_ot_ppp.km</span>, main <span class='op'>=</span> <span class='st'>"Airbnb"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>hotels_ot_ppp.km</span>, main <span class='op'>=</span> <span class='st'>"Hotel"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>mrtlrt_ot_ppp.km</span>, main <span class='op'>=</span> <span class='st'>"Mrt"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>tourism_ot_ppp.km</span>, main <span class='op'>=</span> <span class='st'>"Tourist Attraction"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="takehome-ex02_files/figure-html5/unnamed-chunk-100-1.png" width="624" /></p>
</div>
<p>Analysis: Even though there are already a few hotels in Outram, there are still many Airbnb. The accessibility to the few MRT and tourist attractions can be the reason why Outram have many Airbnb. In addition, we can see that the area with most Airbnbs (black patch) area where the tourist attractions are located.</p>
<h6 id="downtown-core-1">5.1.1.6.9.4 Downtown Core</h6>
<p>The following code chunk plots airbnb, hotel, mrt and tourist attraction in Downtown Core.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span><span class='op'>(</span>mfrow<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>,<span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>airbnb0619_dc_ppp.km</span>, main <span class='op'>=</span> <span class='st'>"Airbnb"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>hotels_dc_ppp.km</span>, main <span class='op'>=</span> <span class='st'>"Hotel"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>mrtlrt_dc_ppp.km</span>, main <span class='op'>=</span> <span class='st'>"Mrt"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>tourism_dc_ppp.km</span>, main <span class='op'>=</span> <span class='st'>"Tourist Attraction"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="takehome-ex02_files/figure-html5/unnamed-chunk-101-1.png" width="624" /></p>
</div>
<p>Analysis: In Downtown core, there are still many airbnb despite many hotels already available. The accessibility to many MRTs and multiple tourist attractions may be the reason that many airbnb are located in this area.</p>
<p>Overall, we can conclude that there are no direct relationship between airbnb and hotel as we see that regardless of the number of hotel available in a region, the number of airbnb remained high. Tourist attractions also do not have direct relationship with Airbnb because areas like Kallang and Geylang still have many Airbnb even though they only have one tourist attraction in the area. The accessibility of MRT is one of the possible factor that affects the number of Airbnb in the area.</p>
<h2 id="second-order-spatial-point-patterns-analysis">5.2 Second-order Spatial Point Patterns Analysis</h2>
<h3 id="nearest-neighbour-analysis">5.2.1 Nearest Neighbour Analysis</h3>
<p>We will perform Nearest Neighbour Analysis to determine if the distributions of Airbnb in each area are random distributed or not.</p>
<h4 id="hypothesis">5.2.1.1 Hypothesis</h4>
<p>We will perform the Clark-Evans test of aggregation for a spatial point pattern using clarkevans.test() of statspat.</p>
<p>Test Hypothesis:</p>
<p>H0 = The distribution of airbnbs are randomly distributed.</p>
<p>H1 = The distribution of airbnbs are not randomly distributed.</p>
<p>The 95% confident interval will be used.</p>
<h4 id="testing-and-analysis">5.2.1.2 Testing and Analysis</h4>
<h5 id="testing-spatial-point-patterns-using-clark-and-evans-test">5.2.1.2.1 Testing spatial point patterns using Clark and Evans Test</h5>
<ol type="1">
<li>The following code chunk performs Clark-Evans test using clarkevans.test() of statspat.</li>
<li>The spatial point pattern object is airbnb0619SG_ppp, Singapore airbnb listings in Singapore ppp object.</li>
<li>Correction is set to none</li>
<li>The clipping region is set to sg_owin</li>
<li>The type of alternative for the hypothesis is clustered.</li>
<li>The number of simulations is set to 99.</li>
</ol>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>clarkevans.test</span><span class='op'>(</span><span class='va'>airbnb0619SG_ppp</span>,
                correction<span class='op'>=</span><span class='st'>"none"</span>,
                clipregion<span class='op'>=</span><span class='st'>"sg_owin"</span>,
                alternative<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"clustered"</span><span class='op'>)</span>,
                nsim<span class='op'>=</span><span class='fl'>99</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>
    Clark-Evans test
    No edge correction
    Monte Carlo test based on 99 simulations of CSR with fixed n

data:  airbnb0619SG_ppp
R = 0.35997, p-value = 0.01
alternative hypothesis: clustered (R &lt; 1)</code></pre>
</div>
<p>Analysis: R = 0.36 is less than 1, which means the distribution of airbnb in Singapore are likely clustered. The p-value of 0.01 is smaller than 0.05. Hence, we reject the null hypothesis that the airbnb point patterns in Singapore are randomly distributed.</p>
<h5 id="clark-and-evans-test-kallang">5.2.1.2.2 Clark and Evans Test: Kallang</h5>
<ol type="1">
<li>The following code chunk performs Clark-Evans test of aggregation for airbnb in Kallang using clarkevans.test() of spatstat</li>
<li>The clipping region is set to NULL</li>
<li>The type of alternative for the hypothesis is two.sided</li>
<li>The number of simulations is set to 999</li>
</ol>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>clarkevans.test</span><span class='op'>(</span><span class='va'>airbnb0619_kl_ppp</span>,
                correction<span class='op'>=</span><span class='st'>"none"</span>,
                clipregion<span class='op'>=</span><span class='cn'>NULL</span>,
                alternative<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"two.sided"</span><span class='op'>)</span>,
                nsim<span class='op'>=</span><span class='fl'>999</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>
    Clark-Evans test
    No edge correction
    Monte Carlo test based on 999 simulations of CSR with fixed n

data:  airbnb0619_kl_ppp
R = 0.57901, p-value = 0.002
alternative hypothesis: two-sided</code></pre>
</div>
<p>Analysis: The p-value of 0.002 is smaller than 0.05. Hence, we reject the null hypothesis that the airbnb point patterns in Kallang are randomly distributed.</p>
<h5 id="clark-and-evans-test-geylang">5.2.1.2.3 Clark and Evans Test: Geylang</h5>
<ol type="1">
<li>The following code chunk performs Clark-Evans test of aggregation for airbnb in Geylang using clarkevans.test() of spatstat</li>
<li>The clipping region is set to NULL</li>
<li>The type of alternative for the hypothesis is two.sided</li>
<li>The number of simulations is set to 999</li>
</ol>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>clarkevans.test</span><span class='op'>(</span><span class='va'>airbnb0619_gl_ppp</span>,
                correction<span class='op'>=</span><span class='st'>"none"</span>,
                clipregion<span class='op'>=</span><span class='cn'>NULL</span>,
                alternative<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"two.sided"</span><span class='op'>)</span>,
                nsim<span class='op'>=</span><span class='fl'>999</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>
    Clark-Evans test
    No edge correction
    Monte Carlo test based on 999 simulations of CSR with fixed n

data:  airbnb0619_gl_ppp
R = 0.48868, p-value = 0.002
alternative hypothesis: two-sided</code></pre>
</div>
<p>Analysis: The p-value of 0.002 is smaller than 0.05. Hence, we reject the null hypothesis that the airbnb point patterns in Geylang are randomly distributed.</p>
<h5 id="clark-and-evans-test-outram">5.2.1.2.4 Clark and Evans Test: Outram</h5>
<ol type="1">
<li>The following code chunk performs Clark-Evans test of aggregation for airbnb in Outram using clarkevans.test() of spatstat</li>
<li>The clipping region is set to NULL</li>
<li>The type of alternative for the hypothesis is two.sided</li>
<li>The number of simulations is set to 999</li>
</ol>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>clarkevans.test</span><span class='op'>(</span><span class='va'>airbnb0619_ot_ppp</span>,
                correction<span class='op'>=</span><span class='st'>"none"</span>,
                clipregion<span class='op'>=</span><span class='cn'>NULL</span>,
                alternative<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"two.sided"</span><span class='op'>)</span>,
                nsim<span class='op'>=</span><span class='fl'>999</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>
    Clark-Evans test
    No edge correction
    Monte Carlo test based on 999 simulations of CSR with fixed n

data:  airbnb0619_ot_ppp
R = 0.74325, p-value = 0.002
alternative hypothesis: two-sided</code></pre>
</div>
<p>Analysis: The p-value of 0.002 is smaller than 0.05. Hence, we reject the null hypothesis that the airbnb point patterns in Outram are randomly distributed.</p>
<h5 id="clark-and-evans-test-downtown-core">5.2.1.2.5 Clark and Evans Test: Downtown Core</h5>
<ol type="1">
<li>The following code chunk performs Clark-Evans test of aggregation for airbnb in Downtown Core using clarkevans.test() of spatstat</li>
<li>The clipping region is set to NULL</li>
<li>The type of alternative for the hypothesis is two.sided</li>
<li>The number of simulations is set to 999</li>
</ol>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>clarkevans.test</span><span class='op'>(</span><span class='va'>airbnb0619_dc_ppp</span>,
                correction<span class='op'>=</span><span class='st'>"none"</span>,
                clipregion<span class='op'>=</span><span class='cn'>NULL</span>,
                alternative<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"two.sided"</span><span class='op'>)</span>,
                nsim<span class='op'>=</span><span class='fl'>999</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>
    Clark-Evans test
    No edge correction
    Monte Carlo test based on 999 simulations of CSR with fixed n

data:  airbnb0619_dc_ppp
R = 0.57982, p-value = 0.002
alternative hypothesis: two-sided</code></pre>
</div>
<p>Analysis: The p-value of 0.002 is smaller than 0.05. Hence, we reject the null hypothesis that the airbnb point patterns in Downtown Core are randomly distributed.</p>
<p>Overall, we can conclude that airbnb in the four areas are not randomly distributed. For further analysis, we will narrow down to two areas, Downtown Core and Outram, with R value above 0.5 and 0.7 respectively. When R is nearer to 1, the distribution are likely to be random. Hence, we are interested to further analyse the distribution of airbnb within these two region.</p>
<h3 id="g-function">5.2.2 G-FUNCTION</h3>
<p>The G function measures the distribution of the distances from an arbitrary event to its nearest event.</p>
<h4 id="downtown-core-2">5.2.2.1 Downtown Core</h4>
<h5 id="compute-g-function-estimation">5.2.2.1.1 Compute G-Function Estimation</h5>
<p>The following code chunk computes G-function using Gest() of spatat package.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>G_DC</span> <span class='op'>=</span> <span class='fu'>Gest</span><span class='op'>(</span><span class='va'>airbnb0619_dc_ppp</span>, correction <span class='op'>=</span> <span class='st'>"border"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>G_DC</span>, xlim<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>150</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="takehome-ex02_files/figure-html5/unnamed-chunk-107-1.png" width="624" /></p>
</div>
<p>Analysis: From the G function plot above, we can see that G(r) increase sharply at short distance at the start and eventually increase slowly after around 25. This shows that Airbnb in Downtown Core are likely to be clustered.</p>
<h5 id="complete-spatial-randomness-test">5.2.2.1.2 Complete Spatial Randomness Test</h5>
<p>Hypothesis:</p>
<p>H0 = The distribution of airbnb in Downtown Core are randomly distributed.</p>
<p>H1= The distribution of airbnb in Downtown Core are not randomly distributed.</p>
<p>The null hypothesis will be rejected is p-value is smaller than alpha value of 0.001 (at 99.9% confidence interval)</p>
<p>The following code chunk performs monta carlo simulation test using envelope() and Gest of spatstat package.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>G_DC.csr</span> <span class='op'>&lt;-</span> <span class='fu'>envelope</span><span class='op'>(</span><span class='va'>airbnb0619_dc_ppp</span>, <span class='va'>Gest</span>, nsim <span class='op'>=</span> <span class='fl'>999</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>Generating 999 simulations of CSR  ...
1, 2, 3, ......10.........20.........30.........40.........50.........60
.........70.........80.........90.........100.........110.........120
.........130.........140.........150.........160.........170.........180
.........190.........200.........210.........220.........230.........240
.........250.........260.........270.........280.........290.........300
.........310.........320.........330.........340.........350.........360
.........370.........380.........390.........400.........410.........420
.........430.........440.........450.........460.........470.........480
.........490.........500.........510.........520.........530.........540
.........550.........560.........570.........580.........590.........600
.........610.........620.........630.........640.........650.........660
.........670.........680.........690.........700.........710.........720
.........730.........740.........750.........760.........770.........780
.........790.........800.........810.........820.........830.........840
.........850.........860.........870.........880.........890.........900
.........910.........920.........930.........940.........950.........960
.........970.........980.........990........ 999.

Done.</code></pre>
</div>
<p>The following code chunk plots the csr</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>G_DC.csr</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="takehome-ex02_files/figure-html5/unnamed-chunk-109-1.png" width="624" /></p>
</div>
<p>Analysis: The observed G(r) is above the envelopes which means that Airbnb in Downtown Core area are clustered. Hence, we reject the null hypothesis that Airbnb in Downtown Core are randomly distributed at 99.9% confident interval.</p>
<h4 id="outram-2">5.2.2.2 Outram</h4>
<h5 id="compute-g-function-estimation-1">5.2.2.2.1 Compute G-Function Estimation</h5>
<p>The following code chunk computes G-function using Gest() of spatat package.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>G_OT</span> <span class='op'>=</span> <span class='fu'>Gest</span><span class='op'>(</span><span class='va'>airbnb0619_ot_ppp</span>, correction <span class='op'>=</span> <span class='st'>"border"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>G_OT</span>, xlim<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>100</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="takehome-ex02_files/figure-html5/unnamed-chunk-110-1.png" width="624" /></p>
</div>
<p>Analysis: From the G function plot above, we can see that G(r) increase sharply at short distance at the start and eventually increase slowly after around 25. This shows that Airbnb in Outram are likely to be clustered.</p>
<h5 id="complete-spatial-randomness-test-1">5.2.2.2.2 Complete Spatial Randomness Test</h5>
<p>Hypothesis:</p>
<p>H0 = The distribution of airbnb in Outram are randomly distributed.</p>
<p>H1= The distribution of airbnb in Outram are not randomly distributed.</p>
<p>The null hypothesis will be rejected is p-value is smaller than alpha value of 0.001.</p>
<p>The following code chunk performs monta carlo simulation test using envelope() and Gest of spatstat package.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>G_OT.csr</span> <span class='op'>&lt;-</span> <span class='fu'>envelope</span><span class='op'>(</span><span class='va'>airbnb0619_ot_ppp</span>, <span class='va'>Gest</span>, nsim <span class='op'>=</span> <span class='fl'>999</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>Generating 999 simulations of CSR  ...
1, 2, 3, ......10.........20.........30.........40.........50.........60
.........70.........80.........90.........100.........110.........120
.........130.........140.........150.........160.........170.........180
.........190.........200.........210.........220.........230.........240
.........250.........260.........270.........280.........290.........300
.........310.........320.........330.........340.........350.........360
.........370.........380.........390.........400.........410.........420
.........430.........440.........450.........460.........470.........480
.........490.........500.........510.........520.........530.........540
.........550.........560.........570.........580.........590.........600
.........610.........620.........630.........640.........650.........660
.........670.........680.........690.........700.........710.........720
.........730.........740.........750.........760.........770.........780
.........790.........800.........810.........820.........830.........840
.........850.........860.........870.........880.........890.........900
.........910.........920.........930.........940.........950.........960
.........970.........980.........990........ 999.

Done.</code></pre>
</div>
<p>The following code chunk plots the csr</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>G_OT.csr</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="takehome-ex02_files/figure-html5/unnamed-chunk-112-1.png" width="624" /></p>
</div>
<p>Analysis: The observed G(r) is above the envelopes which means that Airbnb in Outram area are clustered. Hence, we reject the null hypothesis that Airbnb in Outram are randomly distributed at 99.9% confident interval.</p>
<h3 id="f-function">5.2.3 F-FUNCTION</h3>
<p>The F function estimates the empty space function F(r) or its hazard rate h(r) from a point pattern in a window of arbitrary shape.</p>
<h4 id="downtown-core-3">5.2.3.1 Downtown Core</h4>
<h5 id="compute-f-function-estimation">5.2.3.1.1 Compute F-Function Estimation</h5>
<p>The following code chunk compute F-function using Fest() of spatat package.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>F_DC</span> <span class='op'>=</span> <span class='fu'>Fest</span><span class='op'>(</span><span class='va'>airbnb0619_dc_ppp</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>F_DC</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="takehome-ex02_files/figure-html5/unnamed-chunk-113-1.png" width="624" /></p>
</div>
<p>Analysis: From the F plot above, the F(r) rises slowly from the start for quite a distance. This means Airbnb in Downtown Core are likely to be clustered.</p>
<h5 id="complete-spatial-randomness-test-2">5.2.3.1.2 Complete Spatial Randomness Test</h5>
<p>Hypothesis:</p>
<p>H0 = The distribution of airbnb in Downtown Core are randomly distributed.</p>
<p>H1= The distribution of airbnb in Downtown Core are not randomly distributed.</p>
<p>The null hypothesis will be rejected is p-value is smaller than alpha value of 0.001.</p>
<p>The following code chunk performs monta carlo simulation test using envelope() and Fest of spatstat package.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>F_DC.csr</span> <span class='op'>&lt;-</span> <span class='fu'>envelope</span><span class='op'>(</span><span class='va'>airbnb0619_dc_ppp</span>, <span class='va'>Fest</span>, nsim <span class='op'>=</span> <span class='fl'>999</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>Generating 999 simulations of CSR  ...
1, 2, 3, ......10.........20.........30.........40.........50.........60
.........70.........80.........90.........100.........110.........120
.........130.........140.........150.........160.........170.........180
.........190.........200.........210.........220.........230.........240
.........250.........260.........270.........280.........290.........300
.........310.........320.........330.........340.........350.........360
.........370.........380.........390.........400.........410.........420
.........430.........440.........450.........460.........470.........480
.........490.........500.........510.........520.........530.........540
.........550.........560.........570.........580.........590.........600
.........610.........620.........630.........640.........650.........660
.........670.........680.........690.........700.........710.........720
.........730.........740.........750.........760.........770.........780
.........790.........800.........810.........820.........830.........840
.........850.........860.........870.........880.........890.........900
.........910.........920.........930.........940.........950.........960
.........970.........980.........990........ 999.

Done.</code></pre>
</div>
<p>The following code chunk plots the csr</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>F_DC.csr</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="takehome-ex02_files/figure-html5/unnamed-chunk-115-1.png" width="624" /></p>
</div>
<p>Analysis: The observed F(r) is below the envelopes, which means that Airbnb in Downtown Core are in clustered pattern. Hence, we reject the null hypothesis that Airbnb in Downtown Core are randomly distributed at 99.9% confident interval.</p>
<h4 id="outram-3">5.2.3.2 Outram</h4>
<h5 id="compute-f-function-estimation-1">5.2.3.2.1 Compute F-Function Estimation</h5>
<p>The following code chunk compute F-function using Fest() of spatat package.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>F_OT</span> <span class='op'>=</span> <span class='fu'>Fest</span><span class='op'>(</span><span class='va'>airbnb0619_ot_ppp</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>F_OT</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="takehome-ex02_files/figure-html5/unnamed-chunk-116-1.png" width="624" /></p>
</div>
<p>Analysis: From the F plot above, the F(r) rises slowly from the start for quite a distance. This means Airbnb in Outram are likely to be clustered.</p>
<h5 id="complete-spatial-randomness-test-3">5.2.3.2.2 Complete Spatial Randomness Test</h5>
<p>Hypothesis:</p>
<p>H0 = The distribution of airbnb in Outram are randomly distributed.</p>
<p>H1= The distribution of airbnb in Outram are not randomly distributed.</p>
<p>The null hypothesis will be rejected is p-value is smaller than alpha value of 0.001.</p>
<p>The following code chunk performs monta carlo simulation test using envelope() and Fest of spatstat package.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>F_OT.csr</span> <span class='op'>&lt;-</span> <span class='fu'>envelope</span><span class='op'>(</span><span class='va'>airbnb0619_ot_ppp</span>, <span class='va'>Fest</span>, nsim <span class='op'>=</span> <span class='fl'>999</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>Generating 999 simulations of CSR  ...
1, 2, 3, ......10.........20.........30.........40.........50.........60
.........70.........80.........90.........100.........110.........120
.........130.........140.........150.........160.........170.........180
.........190.........200.........210.........220.........230.........240
.........250.........260.........270.........280.........290.........300
.........310.........320.........330.........340.........350.........360
.........370.........380.........390.........400.........410.........420
.........430.........440.........450.........460.........470.........480
.........490.........500.........510.........520.........530.........540
.........550.........560.........570.........580.........590.........600
.........610.........620.........630.........640.........650.........660
.........670.........680.........690.........700.........710.........720
.........730.........740.........750.........760.........770.........780
.........790.........800.........810.........820.........830.........840
.........850.........860.........870.........880.........890.........900
.........910.........920.........930.........940.........950.........960
.........970.........980.........990........ 999.

Done.</code></pre>
</div>
<p>The following code chunk plots the csr</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>F_OT.csr</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="takehome-ex02_files/figure-html5/unnamed-chunk-118-1.png" width="624" /></p>
</div>
<p>Analysis: The observed F(r) is below the envelopes, which means that Airbnb in Outram are in clustered pattern. Hence, we reject the null hypothesis that Airbnb in Outram are randomly distributed at 99.9% confident interval.</p>
<h3 id="l-function">5.2.4 L-FUNCTION</h3>
<p>L function is a transformation of Ripleys K function. K function provides estimation based on all the distances between events in a study area.</p>
<h4 id="downtown-core-4">5.2.4.1 Downtown Core</h4>
<h5 id="compute-l-function-estimation">5.2.4.1.1 Compute L-Function Estimation</h5>
<p>The following code chunk compute L-function using Lest() of spatat package.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>L_DC</span> <span class='op'>=</span> <span class='fu'>Lest</span><span class='op'>(</span><span class='va'>airbnb0619_dc_ppp</span>, correction <span class='op'>=</span> <span class='st'>"Ripley"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>L_DC</span>, <span class='va'>.</span> <span class='op'>-</span><span class='va'>r</span> <span class='op'>~</span> <span class='va'>r</span>, ylab<span class='op'>=</span> <span class='st'>"L(r)"</span>, xlab <span class='op'>=</span> <span class='st'>"r"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="takehome-ex02_files/figure-html5/unnamed-chunk-119-1.png" width="624" /></p>
</div>
<p>Analysis: The above L function plots shows that L(r) is above 0, which means clustering. This means Airbnb in Downtown Core are likely to be clustered.</p>
<h5 id="complete-spatial-randomness-test-4">5.2.4.1.2 Complete Spatial Randomness Test</h5>
<p>Hypothesis:</p>
<p>H0 = The distribution of airbnb in Downtown Core are randomly distributed.</p>
<p>H1= The distribution of airbnb in Downtown Core are not randomly distributed.</p>
<p>The null hypothesis will be rejected is p-value is smaller than alpha value of 0.001.</p>
<p>The following code chunk performs the test using envelope() and Lest of spatstat package.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>L_DC.csr</span> <span class='op'>&lt;-</span> <span class='fu'>envelope</span><span class='op'>(</span><span class='va'>airbnb0619_dc_ppp</span>, <span class='va'>Lest</span>, nsim <span class='op'>=</span> <span class='fl'>99</span>, rank <span class='op'>=</span> <span class='fl'>1</span>, glocal<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>Generating 99 simulations of CSR  ...
1, 2,  [etd 10:04] 3,
 [etd 10:16] 4,  [etd 10:33] 5,  [etd 10:40] 6,
 [etd 10:33] 7,  [etd 10:07] 8,  [etd 10:05] 9,
 [etd 10:10] 10,  [etd 10:02] 11,  [etd 10:00] 12,
 [etd 9:43] 13,  [etd 9:32] 14,  [etd 9:25] 15,
 [etd 9:16] 16,  [etd 9:06] 17,  [etd 8:59] 18,
 [etd 8:56] 19,  [etd 8:49] 20,  [etd 8:44] 21,
 [etd 8:42] 22,  [etd 8:38] 23,  [etd 8:28] 24,
 [etd 8:21] 25,  [etd 8:17] 26,  [etd 8:10] 27,
 [etd 8:02] 28,  [etd 7:58] 29,  [etd 7:53] 30,
 [etd 7:49] 31,  [etd 7:41] 32,  [etd 7:37] 33,
 [etd 7:32] 34,  [etd 7:25] 35,  [etd 7:19] 36,
 [etd 7:12] 37,  [etd 7:06] 38,  [etd 6:58] 39,
 [etd 6:52] 40,  [etd 6:46] 41,  [etd 6:39] 42,
 [etd 6:32] 43,  [etd 6:26] 44,  [etd 6:18] 45,
 [etd 6:11] 46,  [etd 6:06] 47,  [etd 5:59] 48,
 [etd 5:53] 49,  [etd 5:45] 50,  [etd 5:38] 51,
 [etd 5:31] 52,  [etd 5:24] 53,  [etd 5:17] 54,
 [etd 5:10] 55,  [etd 5:03] 56,  [etd 4:55] 57,
 [etd 4:48] 58,  [etd 4:42] 59,  [etd 4:36] 60,
 [etd 4:29] 61,  [etd 4:21] 62,  [etd 4:15] 63,
 [etd 4:08] 64,  [etd 4:01] 65,  [etd 3:55] 66,
 [etd 3:48] 67,  [etd 3:41] 68,  [etd 3:34] 69,
 [etd 3:27] 70,  [etd 3:20] 71,  [etd 3:14] 72,
 [etd 3:07] 73,  [etd 2:59] 74,  [etd 2:52] 75,
 [etd 2:45] 76,  [etd 2:39] 77,  [etd 2:32] 78,
 [etd 2:24] 79,  [etd 2:17] 80,  [etd 2:10] 81,
 [etd 2:04] 82,  [etd 1:57] 83,  [etd 1:50] 84,
 [etd 1:43] 85,  [etd 1:37] 86,  [etd 1:30] 87,
 [etd 1:23] 88,  [etd 1:16] 89,  [etd 1:09] 90,
 [etd 1:02] 91,  [etd 55 sec] 92,  [etd 48 sec] 93,
 [etd 41 sec] 94,  [etd 34 sec] 95,  [etd 28 sec] 96,
 [etd 21 sec] 97,  [etd 14 sec] 98,  [etd 7 sec]  99.

Done.</code></pre>
</div>
<p>The following code chunk plots the csr</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>L_DC.csr</span>, <span class='va'>.</span> <span class='op'>-</span> <span class='va'>r</span> <span class='op'>~</span> <span class='va'>r</span>, xlab<span class='op'>=</span><span class='st'>"r"</span>, ylab<span class='op'>=</span><span class='st'>"L(r)"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="takehome-ex02_files/figure-html5/unnamed-chunk-121-1.png" width="624" /></p>
</div>
<p>Analysis: The above L function plots shows that the observed L(r) is greater than L(theo) and envelops, which means clustering. This means Airbnb in Downtown Core clustered. Hence, we reject the null hypothesis that Airbnb in Downtown Core are randomly distributed at 99.9% confident interval.</p>
<h4 id="outram-4">5.2.4.2 Outram</h4>
<h5 id="compute-l-function-estimation-1">5.2.4.2.1 Compute L-Function Estimation</h5>
<p>The following code chunk compute K-function using Lest() of spatat package.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>L_OT</span> <span class='op'>=</span> <span class='fu'>Lest</span><span class='op'>(</span><span class='va'>airbnb0619_ot_ppp</span>, correction <span class='op'>=</span> <span class='st'>"Ripley"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>L_OT</span>, <span class='va'>.</span> <span class='op'>-</span><span class='va'>r</span> <span class='op'>~</span> <span class='va'>r</span>, ylab<span class='op'>=</span> <span class='st'>"L(r)"</span>, xlab <span class='op'>=</span> <span class='st'>"r"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="takehome-ex02_files/figure-html5/unnamed-chunk-122-1.png" width="624" /></p>
</div>
<p>Analysis: The above L function plots shows that L(r) is above 0, which means clustering. This means Airbnb in Outram are likely to be clustered.</p>
<h5 id="complete-spatial-randomness-test-5">5.2.4.2.2 Complete Spatial Randomness Test</h5>
<p>Hypothesis:</p>
<p>H0 = The distribution of airbnb in Outram are randomly distributed.</p>
<p>H1= The distribution of airbnb in Outram are not randomly distributed.</p>
<p>The null hypothesis will be rejected is p-value is smaller than alpha value of 0.001.</p>
<p>The following code chunk performs the test using envelope() and Lest of spatstat package.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>L_OT.csr</span> <span class='op'>&lt;-</span> <span class='fu'>envelope</span><span class='op'>(</span><span class='va'>airbnb0619_ot_ppp</span>, <span class='va'>Lest</span>, nsim <span class='op'>=</span> <span class='fl'>99</span>, rank <span class='op'>=</span> <span class='fl'>1</span>, glocal<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>Generating 99 simulations of CSR  ...
1, 2,  [etd 7:18] 3,
 [etd 7:45] 4,  [etd 7:24] 5,  [etd 7:23] 6,
 [etd 7:01] 7,  [etd 6:47] 8,  [etd 6:46] 9,
 [etd 6:40] 10,  [etd 6:34] 11,  [etd 6:30] 12,
 [etd 6:23] 13,  [etd 6:24] 14,  [etd 6:21] 15,
 [etd 6:15] 16,  [etd 6:08] 17,  [etd 6:09] 18,
 [etd 6:07] 19,  [etd 6:01] 20,  [etd 5:56] 21,
 [etd 5:53] 22,  [etd 5:46] 23,  [etd 5:43] 24,
 [etd 5:37] 25,  [etd 5:36] 26,  [etd 5:31] 27,
 [etd 5:24] 28,  [etd 5:21] 29,  [etd 5:16] 30,
 [etd 5:14] 31,  [etd 5:09] 32,  [etd 5:04] 33,
 [etd 4:59] 34,  [etd 4:53] 35,  [etd 4:48] 36,
 [etd 4:44] 37,  [etd 4:39] 38,  [etd 4:35] 39,
 [etd 4:30] 40,  [etd 4:26] 41,  [etd 4:21] 42,
 [etd 4:16] 43,  [etd 4:11] 44,  [etd 4:06] 45,
 [etd 4:02] 46,  [etd 3:58] 47,  [etd 3:54] 48,
 [etd 3:50] 49,  [etd 3:45] 50,  [etd 3:41] 51,
 [etd 3:36] 52,  [etd 3:31] 53,  [etd 3:27] 54,
 [etd 3:22] 55,  [etd 3:17] 56,  [etd 3:13] 57,
 [etd 3:08] 58,  [etd 3:04] 59,  [etd 2:59] 60,
 [etd 2:55] 61,  [etd 2:50] 62,  [etd 2:46] 63,
 [etd 2:42] 64,  [etd 2:38] 65,  [etd 2:33] 66,
 [etd 2:29] 67,  [etd 2:25] 68,  [etd 2:20] 69,
 [etd 2:15] 70,  [etd 2:11] 71,  [etd 2:06] 72,
 [etd 2:01] 73,  [etd 1:57] 74,  [etd 1:52] 75,
 [etd 1:48] 76,  [etd 1:43] 77,  [etd 1:39] 78,
 [etd 1:34] 79,  [etd 1:30] 80,  [etd 1:26] 81,
 [etd 1:21] 82,  [etd 1:17] 83,  [etd 1:12] 84,
 [etd 1:08] 85,  [etd 1:03] 86,  [etd 59 sec] 87,
 [etd 54 sec] 88,  [etd 50 sec] 89,  [etd 45 sec] 90,
 [etd 41 sec] 91,  [etd 36 sec] 92,  [etd 32 sec] 93,
 [etd 27 sec] 94,  [etd 22 sec] 95,  [etd 18 sec] 96,
 [etd 13 sec] 97,  [etd 9 sec] 98,  [etd 5 sec]  99.

Done.</code></pre>
</div>
<p>The following code chunk plots the csr</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>L_OT.csr</span>, <span class='va'>.</span> <span class='op'>-</span> <span class='va'>r</span> <span class='op'>~</span> <span class='va'>r</span>, xlab<span class='op'>=</span><span class='st'>"r"</span>, ylab<span class='op'>=</span><span class='st'>"L(r)"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="takehome-ex02_files/figure-html5/unnamed-chunk-124-1.png" width="624" /></p>
</div>
<p>Analysis: The above L function plots shows that the observed L(r) is greater than L(theo) and envelops, which means clustering. This means Airbnb in Outram clustered. Hence, we reject the null hypothesis that Airbnb in Outram are randomly distributed at 99.9% confident interval.</p>
<h1 id="section-b-impact-of-covid-19">6 Section B: Impact of COVID-19</h1>
<h2 id="exploratory-spatial-data-analysis-1">6.1 Exploratory Spatial Data Analysis</h2>
<h3 id="kernel-density-maps-1">6.1.1 Kernel density maps</h3>
<h4 id="airbnb0721-listings">6.1.1.1 Airbnb0721 listings</h4>
<h5 id="rescale-kde-values-3">6.1.1.2.1 Rescale KDE values</h5>
<p>The following code chunk rescale the KDE value of airbnb0721SG_ppp using rescale function of spatstat from meter to kilometer.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>airbnb0721SG_ppp.km</span> <span class='op'>&lt;-</span> <span class='fu'>rescale</span><span class='op'>(</span><span class='va'>airbnb0721SG_ppp</span>, <span class='fl'>1000</span>, <span class='st'>"km"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<h5 id="kde-map-in-km">6.1.1.2.2 KDE Map in km</h5>
<p>The following code chunk is similar to Airbnb0619s code chunk (5.1.1.1.4).</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>kde_airbnb0721SG_bw.km</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>airbnb0721SG_ppp.km</span>,
                              sigma<span class='op'>=</span><span class='va'>bw.diggle</span>,
                              edge<span class='op'>=</span><span class='cn'>TRUE</span>,
                            kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_airbnb0721SG_bw.km</span>, main <span class='op'>=</span> <span class='st'>"KDE Map"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="takehome-ex02_files/figure-html5/unnamed-chunk-126-1.png" width="624" /></p>
</div>
<p>Analysis: From the kde map above, we can see that the south-east region near the central area have higher density of Airbnb with about 200 to 800 units per square kilometer, as shown by the purple, pink and orange spots on kde map.</p>
<h5 id="convert-kde-output-into-grid-object-in-km-4">6.1.1.2.3 Convert KDE output into grid object in km</h5>
<p>The following code chunk converts KDE output into grid object using as.SpatialGridDataFrame.im function of maptools, and plot the grid object using spplot function of raster package.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>gridded_kde_airbnb0721SG_bw.km</span> <span class='op'>&lt;-</span> <span class='fu'>as.SpatialGridDataFrame.im</span><span class='op'>(</span><span class='va'>kde_airbnb0721SG_bw.km</span><span class='op'>)</span>
<span class='fu'>spplot</span><span class='op'>(</span><span class='va'>gridded_kde_airbnb0721SG_bw.km</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="takehome-ex02_files/figure-html5/unnamed-chunk-127-1.png" width="624" /></p>
</div>
<p>Analysis: The above density map shows a clearer visualization of the density of Airbnb in 2021 using grid. We can see that the Airbnb are scattered all around as seen by the lighter blue grid on the map. The south-east area near the central have higher density with around 200 - 800 units per square kilometer, represented by the brighter blue and pink grid on the map.</p>
<h5 id="convert-into-raster">6.1.1.2.4 Convert into raster</h5>
<ol type="1">
<li><p>The following code chunk first compute kernel density using density function of spatstat package with sigma set as bw.diggle and kernel set as gaussian.</p></li>
<li><p>Note that we will be using ppp in m.</p></li>
<li><p>Convert KDE output into grid object using as.SpatialGridDataFrame.im function of maptools</p></li>
<li><p>Convert grid object into raster using raster function of raster package</p></li>
<li><p>Assign CRS to raster layer</p></li>
</ol>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>kde_airbnb0721SG_bw</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>airbnb0721SG_ppp</span>,
                              sigma<span class='op'>=</span><span class='va'>bw.diggle</span>,
                              edge<span class='op'>=</span><span class='cn'>TRUE</span>,
                            kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span>

<span class='va'>gridded_kde_airbnb0721SG_bw</span> <span class='op'>&lt;-</span> <span class='fu'>as.SpatialGridDataFrame.im</span><span class='op'>(</span><span class='va'>kde_airbnb0721SG_bw</span><span class='op'>)</span>

<span class='va'>kde_airbnb0721SG_bw_raster</span> <span class='op'>&lt;-</span> <span class='fu'>raster</span><span class='op'>(</span><span class='va'>gridded_kde_airbnb0721SG_bw</span><span class='op'>)</span>
<span class='fu'>projection</span><span class='op'>(</span><span class='va'>kde_airbnb0721SG_bw_raster</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'>CRS</span><span class='op'>(</span><span class='st'>"+init=EPSG:3414"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<h4 id="comparison-between-airbnb0619-and-airbnb0721">6.1.1.2 Comparison between Airbnb0619 and Airbnb0721</h4>
<p>The following code chunk plots kde map of Airbnb0619 and Airbnb0721 side by side.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span><span class='op'>(</span>mfrow<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_airbnb0619SG_bw.km</span>, main <span class='op'>=</span> <span class='st'>"Airbnb 2019"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_airbnb0721SG_bw.km</span>, main <span class='op'>=</span> <span class='st'>"Airbnb 2021"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="takehome-ex02_files/figure-html5/unnamed-chunk-129-1.png" width="624" /></p>
</div>
<p>From the KDE map, the south-east region still have higher density in 2021. However, we noticed that the density of Airbnb have reduced as seen from the scale. It reduced from range 0-1500 units per square kilometer in 2019 to range 0-1000 units per square kilomete in 2021. We can conclude that Covid-19 did impact the Airbnb listing in Singapore from 2019 to 2021.</p>
<h4 id="comparison-between-airbnb0619-and-airbnb0721-by-room-type">6.1.1.3 Comparison between Airbnb0619 and Airbnb0721 by Room Type</h4>
<h5 id="data-wrangling">6.1.1.3.1 Data Wrangling</h5>
<h6 id="determine-the-unique-room-type">6.1.1.3.1.1 Determine the unique room type</h6>
<p>The following code checks the unique room type using unique features of base R</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>airbnb0619_sf</span><span class='op'>$</span><span class='va'>room_type</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>[1] &quot;Private room&quot;    &quot;Entire home/apt&quot; &quot;Shared room&quot;    </code></pre>
</div>
<p>We have determined that the unique room types are Private room, Entire home/apt and Shared room for Airbnb 2019.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>airbnb0721_sf</span><span class='op'>$</span><span class='va'>room_type</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>[1] &quot;Private room&quot;    &quot;Entire home/apt&quot; &quot;Shared room&quot;    
[4] &quot;Hotel room&quot;     </code></pre>
</div>
<p>We have determined that the unique room types are Private room, Entire home/apt, Shared room and Hotel room for Airbnb 2021.</p>
<h6 id="filter-each-room-type-from-spatialpointsdataframe">6.1.1.3.1.2 Filter each room type from SpatialPointsDataFrame</h6>
<p>The following code chunk filters each room type for both year.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>airbnb0619_pte</span> <span class='op'>=</span> <span class='va'>airbnb0619</span><span class='op'>[</span><span class='va'>airbnb0619</span><span class='op'>@</span><span class='va'>data</span><span class='op'>$</span><span class='va'>room_type</span> <span class='op'>==</span> <span class='st'>"Private room"</span>,<span class='op'>]</span>
<span class='va'>airbnb0619_ent</span> <span class='op'>=</span> <span class='va'>airbnb0619</span><span class='op'>[</span><span class='va'>airbnb0619</span><span class='op'>@</span><span class='va'>data</span><span class='op'>$</span><span class='va'>room_type</span> <span class='op'>==</span> <span class='st'>"Entire home/apt"</span>,<span class='op'>]</span>
<span class='va'>airbnb0619_sh</span> <span class='op'>=</span> <span class='va'>airbnb0619</span><span class='op'>[</span><span class='va'>airbnb0619</span><span class='op'>@</span><span class='va'>data</span><span class='op'>$</span><span class='va'>room_type</span> <span class='op'>==</span> <span class='st'>"Shared room"</span>,<span class='op'>]</span>
<span class='va'>airbnb0721_pte</span> <span class='op'>=</span> <span class='va'>airbnb0721</span><span class='op'>[</span><span class='va'>airbnb0721</span><span class='op'>@</span><span class='va'>data</span><span class='op'>$</span><span class='va'>room_type</span> <span class='op'>==</span> <span class='st'>"Private room"</span>,<span class='op'>]</span>
<span class='va'>airbnb0721_ent</span> <span class='op'>=</span> <span class='va'>airbnb0721</span><span class='op'>[</span><span class='va'>airbnb0721</span><span class='op'>@</span><span class='va'>data</span><span class='op'>$</span><span class='va'>room_type</span> <span class='op'>==</span> <span class='st'>"Entire home/apt"</span>,<span class='op'>]</span>
<span class='va'>airbnb0721_sh</span> <span class='op'>=</span> <span class='va'>airbnb0721</span><span class='op'>[</span><span class='va'>airbnb0721</span><span class='op'>@</span><span class='va'>data</span><span class='op'>$</span><span class='va'>room_type</span> <span class='op'>==</span> <span class='st'>"Shared room"</span>,<span class='op'>]</span>
<span class='va'>airbnb0721_ht</span> <span class='op'>=</span> <span class='va'>airbnb0721</span><span class='op'>[</span><span class='va'>airbnb0721</span><span class='op'>@</span><span class='va'>data</span><span class='op'>$</span><span class='va'>room_type</span> <span class='op'>==</span> <span class='st'>"Hotel room"</span>,<span class='op'>]</span>
</code></pre>
</div>
</details>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>airbnb0721_sh</span>
</code></pre>
</div>
</details>
<pre><code>class       : SpatialPointsDataFrame 
features    : 172 
extent      : 12801.45, 42673.57, 28189.47, 47475.94  (xmin, xmax, ymin, ymax)
crs         : +proj=tmerc +lat_0=1.36666666666667 +lon_0=103.833333333333 +k=1 +x_0=28001.642 +y_0=38744.572 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs 
variables   : 14
names       :       id,                                            name,   host_id,                                            host_name, neighbourhood_group, neighbourhood,   room_type, price, minimum_nights, number_of_reviews, last_review, reviews_per_month, calculated_host_listings_count, availability_365 
min values  :  1277919, (Close to MRT) Single Mixed Dorm with Breakfast,    581033, &lt;U+8BA4&gt;&lt;U+8BC1&gt;&lt;U+624B&gt;&lt;U+673A&gt;&lt;U+7528&gt;&lt;U+6237&gt;9873,      Central Region,    Ang Mo Kio, Shared room,    15,              1,                 0,       16618,              0.01,                              1,                0 
max values  : 50989011,           Your Private Pod Outside The City (2), 374499296,                                                 Zuzu,         West Region,        Yishun, Shared room,  3770,            240,               150,       18793,              2.11,                            165,              365 </code></pre>
</div>
<p>Notice that the data are in SpatialPointsDataFrame format</p>
<h6 id="converting-the-spatial-class-into-generic-sp-format-1">6.1.1.3.1.3 Converting the Spatial* class into generic sp format</h6>
<p>Next, we will convert Spatial* classes into Spatial object so that we can convert it into ppp object.</p>
<p>The following code chunk converts Spatial* classes into generic sp format using as function which sets the classes to their respective sp format.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>airbnb0619_pte_sp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>airbnb0619_pte</span>, <span class='st'>"SpatialPoints"</span><span class='op'>)</span>
<span class='va'>airbnb0619_ent_sp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>airbnb0619_ent</span>, <span class='st'>"SpatialPoints"</span><span class='op'>)</span>
<span class='va'>airbnb0619_sh_sp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>airbnb0619_sh</span>, <span class='st'>"SpatialPoints"</span><span class='op'>)</span>
<span class='va'>airbnb0721_pte_sp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>airbnb0721_pte</span>, <span class='st'>"SpatialPoints"</span><span class='op'>)</span>
<span class='va'>airbnb0721_ent_sp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>airbnb0721_ent</span>, <span class='st'>"SpatialPoints"</span><span class='op'>)</span>
<span class='va'>airbnb0721_sh_sp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>airbnb0721_sh</span>, <span class='st'>"SpatialPoints"</span><span class='op'>)</span>
<span class='va'>airbnb0721_ht_sp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>airbnb0721_ht</span>, <span class='st'>"SpatialPoints"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<h6 id="converting-the-generic-sp-format-into-spatstats-ppp-format-1">6.1.1.3.1.4 Converting the generic sp format into spatstats ppp format</h6>
<p>We will next convert the spatial data into spatstats ppp format.</p>
<p>The following code chunk converts spatial data into spatstats ppp format using as function.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>airbnb0619_pte_ppp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>airbnb0619_pte_sp</span>, <span class='st'>"ppp"</span><span class='op'>)</span>
<span class='va'>airbnb0619_ent_ppp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>airbnb0619_ent_sp</span>, <span class='st'>"ppp"</span><span class='op'>)</span>
<span class='va'>airbnb0619_sh_ppp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>airbnb0619_sh_sp</span>, <span class='st'>"ppp"</span><span class='op'>)</span>
<span class='va'>airbnb0721_pte_ppp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>airbnb0721_pte_sp</span>, <span class='st'>"ppp"</span><span class='op'>)</span>
<span class='va'>airbnb0721_ent_ppp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>airbnb0721_ent_sp</span>, <span class='st'>"ppp"</span><span class='op'>)</span>
<span class='va'>airbnb0721_sh_ppp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>airbnb0721_sh_sp</span>, <span class='st'>"ppp"</span><span class='op'>)</span>
<span class='va'>airbnb0721_ht_ppp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>airbnb0721_ht_sp</span>, <span class='st'>"ppp"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<h6 id="check-for-duplicates-in-each-ppps-objects">6.1.1.3.1.5 Check for duplicates in each ppps objects</h6>
<p>The following code chunk use any and duplicated function of base R package to check for duplicates, and sum up the count of duplicated points using sum function of base R package and multiplicity function of spatstat package.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/duplicated.html'>duplicated</a></span><span class='op'>(</span><span class='va'>airbnb0619_pte_ppp</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>[1] FALSE</code></pre>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='fu'>multiplicity</span><span class='op'>(</span><span class='va'>airbnb0619_pte_ppp</span><span class='op'>)</span> <span class='op'>&gt;</span> <span class='fl'>1</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>[1] 0</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/duplicated.html'>duplicated</a></span><span class='op'>(</span><span class='va'>airbnb0619_ent_ppp</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>[1] TRUE</code></pre>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='fu'>multiplicity</span><span class='op'>(</span><span class='va'>airbnb0619_ent_ppp</span><span class='op'>)</span> <span class='op'>&gt;</span> <span class='fl'>1</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>[1] 2</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/duplicated.html'>duplicated</a></span><span class='op'>(</span><span class='va'>airbnb0619_sh_ppp</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>[1] TRUE</code></pre>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='fu'>multiplicity</span><span class='op'>(</span><span class='va'>airbnb0619_sh_ppp</span><span class='op'>)</span> <span class='op'>&gt;</span> <span class='fl'>1</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>[1] 2</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/duplicated.html'>duplicated</a></span><span class='op'>(</span><span class='va'>airbnb0721_pte_ppp</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>[1] TRUE</code></pre>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='fu'>multiplicity</span><span class='op'>(</span><span class='va'>airbnb0721_pte_ppp</span><span class='op'>)</span> <span class='op'>&gt;</span> <span class='fl'>1</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>[1] 126</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/duplicated.html'>duplicated</a></span><span class='op'>(</span><span class='va'>airbnb0721_ent_ppp</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>[1] TRUE</code></pre>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='fu'>multiplicity</span><span class='op'>(</span><span class='va'>airbnb0721_ent_ppp</span><span class='op'>)</span> <span class='op'>&gt;</span> <span class='fl'>1</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>[1] 40</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/duplicated.html'>duplicated</a></span><span class='op'>(</span><span class='va'>airbnb0721_sh_ppp</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>[1] TRUE</code></pre>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='fu'>multiplicity</span><span class='op'>(</span><span class='va'>airbnb0721_sh_ppp</span><span class='op'>)</span> <span class='op'>&gt;</span> <span class='fl'>1</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>[1] 16</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/duplicated.html'>duplicated</a></span><span class='op'>(</span><span class='va'>airbnb0721_ht_ppp</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>[1] TRUE</code></pre>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='fu'>multiplicity</span><span class='op'>(</span><span class='va'>airbnb0721_ht_ppp</span><span class='op'>)</span> <span class='op'>&gt;</span> <span class='fl'>1</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>[1] 35</code></pre>
</div>
<h6 id="handling-duplicates-1">6.1.1.3.1.6 Handling Duplicates</h6>
<p>We will use jittering to handle duplicates so that we will not lose useful points. Jittering adds a small perturbation to the duplicated points so that they do not occupy the exact same space.</p>
<p>The following code chunk uses rjitter function of spatstat to jitter the ppp object with duplicates.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>airbnb0619_ent_ppp_jit</span> <span class='op'>&lt;-</span> <span class='fu'>rjitter</span><span class='op'>(</span><span class='va'>airbnb0619_ent_ppp</span>, 
                             retry<span class='op'>=</span><span class='cn'>TRUE</span>, 
                             nsim<span class='op'>=</span><span class='fl'>1</span>, 
                             drop<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>

<span class='va'>airbnb0619_sh_ppp_jit</span> <span class='op'>&lt;-</span> <span class='fu'>rjitter</span><span class='op'>(</span><span class='va'>airbnb0619_sh_ppp</span>, 
                             retry<span class='op'>=</span><span class='cn'>TRUE</span>, 
                             nsim<span class='op'>=</span><span class='fl'>1</span>, 
                             drop<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>

<span class='va'>airbnb0721_pte_ppp_jit</span> <span class='op'>&lt;-</span> <span class='fu'>rjitter</span><span class='op'>(</span><span class='va'>airbnb0721_pte_ppp</span>, 
                             retry<span class='op'>=</span><span class='cn'>TRUE</span>, 
                             nsim<span class='op'>=</span><span class='fl'>1</span>, 
                             drop<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>

<span class='va'>airbnb0721_ent_ppp_jit</span> <span class='op'>&lt;-</span> <span class='fu'>rjitter</span><span class='op'>(</span><span class='va'>airbnb0721_ent_ppp</span>, 
                             retry<span class='op'>=</span><span class='cn'>TRUE</span>, 
                             nsim<span class='op'>=</span><span class='fl'>1</span>, 
                             drop<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>

<span class='va'>airbnb0721_sh_ppp_jit</span> <span class='op'>&lt;-</span> <span class='fu'>rjitter</span><span class='op'>(</span><span class='va'>airbnb0721_sh_ppp</span>, 
                             retry<span class='op'>=</span><span class='cn'>TRUE</span>, 
                             nsim<span class='op'>=</span><span class='fl'>1</span>, 
                             drop<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>

<span class='va'>airbnb0721_ht_ppp_jit</span> <span class='op'>&lt;-</span> <span class='fu'>rjitter</span><span class='op'>(</span><span class='va'>airbnb0721_ht_ppp</span>, 
                             retry<span class='op'>=</span><span class='cn'>TRUE</span>, 
                             nsim<span class='op'>=</span><span class='fl'>1</span>, 
                             drop<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<h6 id="check-if-duplicates-still-exist-1">6.1.1.3.1.7 Check if duplicates still exist</h6>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/duplicated.html'>duplicated</a></span><span class='op'>(</span><span class='va'>airbnb0619_ent_ppp_jit</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>[1] FALSE</code></pre>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='fu'>multiplicity</span><span class='op'>(</span><span class='va'>airbnb0619_ent_ppp_jit</span><span class='op'>)</span> <span class='op'>&gt;</span> <span class='fl'>1</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>[1] 0</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/duplicated.html'>duplicated</a></span><span class='op'>(</span><span class='va'>airbnb0619_sh_ppp_jit</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>[1] FALSE</code></pre>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='fu'>multiplicity</span><span class='op'>(</span><span class='va'>airbnb0619_sh_ppp_jit</span><span class='op'>)</span> <span class='op'>&gt;</span> <span class='fl'>1</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>[1] 0</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/duplicated.html'>duplicated</a></span><span class='op'>(</span><span class='va'>airbnb0721_pte_ppp_jit</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>[1] FALSE</code></pre>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='fu'>multiplicity</span><span class='op'>(</span><span class='va'>airbnb0721_pte_ppp_jit</span><span class='op'>)</span> <span class='op'>&gt;</span> <span class='fl'>1</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>[1] 0</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/duplicated.html'>duplicated</a></span><span class='op'>(</span><span class='va'>airbnb0721_ent_ppp_jit</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>[1] FALSE</code></pre>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='fu'>multiplicity</span><span class='op'>(</span><span class='va'>airbnb0721_ent_ppp_jit</span><span class='op'>)</span> <span class='op'>&gt;</span> <span class='fl'>1</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>[1] 0</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/duplicated.html'>duplicated</a></span><span class='op'>(</span><span class='va'>airbnb0721_sh_ppp_jit</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>[1] FALSE</code></pre>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='fu'>multiplicity</span><span class='op'>(</span><span class='va'>airbnb0721_sh_ppp_jit</span><span class='op'>)</span> <span class='op'>&gt;</span> <span class='fl'>1</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>[1] 0</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/duplicated.html'>duplicated</a></span><span class='op'>(</span><span class='va'>airbnb0721_ht_ppp_jit</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>[1] FALSE</code></pre>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='fu'>multiplicity</span><span class='op'>(</span><span class='va'>airbnb0721_ht_ppp_jit</span><span class='op'>)</span> <span class='op'>&gt;</span> <span class='fl'>1</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>[1] 0</code></pre>
</div>
<p>We can confirm that there are no duplicated points after jittering.</p>
<h6 id="combining-point-events-object-and-owin-object-1">6.1.1.3.1.8 Combining point events object and owin object</h6>
<p>The following code chunk combines the point objects with the owin object into one ppp object class.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>airbnb0619SG_pte_ppp</span> <span class='op'>=</span> <span class='va'>airbnb0619_pte_ppp</span><span class='op'>[</span><span class='va'>sg_owin</span><span class='op'>]</span>
<span class='va'>airbnb0619SG_ent_ppp</span> <span class='op'>=</span> <span class='va'>airbnb0619_ent_ppp_jit</span><span class='op'>[</span><span class='va'>sg_owin</span><span class='op'>]</span>
<span class='va'>airbnb0619SG_sh_ppp</span> <span class='op'>=</span> <span class='va'>airbnb0619_sh_ppp_jit</span><span class='op'>[</span><span class='va'>sg_owin</span><span class='op'>]</span>
<span class='va'>airbnb0721SG_pte_ppp</span> <span class='op'>=</span> <span class='va'>airbnb0721_pte_ppp_jit</span><span class='op'>[</span><span class='va'>sg_owin</span><span class='op'>]</span>
<span class='va'>airbnb0721SG_ent_ppp</span> <span class='op'>=</span> <span class='va'>airbnb0721_ent_ppp_jit</span><span class='op'>[</span><span class='va'>sg_owin</span><span class='op'>]</span>
<span class='va'>airbnb0721SG_sh_ppp</span> <span class='op'>=</span> <span class='va'>airbnb0721_sh_ppp_jit</span><span class='op'>[</span><span class='va'>sg_owin</span><span class='op'>]</span>
<span class='va'>airbnb0721SG_ht_ppp</span> <span class='op'>=</span> <span class='va'>airbnb0721_ht_ppp_jit</span><span class='op'>[</span><span class='va'>sg_owin</span><span class='op'>]</span>
</code></pre>
</div>
</details>
</div>
<h6 id="kde">6.1.1.3.1.9 KDE</h6>
<ol type="1">
<li>The following code chunk computes kernel density using density function of spatstat package.</li>
<li>The code first takes in the ppp object variable in km.</li>
<li>bw.diggle automatic bandwidth method to detect a tight cluster</li>
<li>smoothing kernel is set to default gaussian method</li>
</ol>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>kde_airbnb0619SG_pte_bw</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>airbnb0619SG_pte_ppp</span>,
                              sigma<span class='op'>=</span><span class='va'>bw.diggle</span>,
                              edge<span class='op'>=</span><span class='cn'>TRUE</span>,
                            kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span>

<span class='va'>kde_airbnb0619SG_ent_bw</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>airbnb0619SG_ent_ppp</span>,
                              sigma<span class='op'>=</span><span class='va'>bw.diggle</span>,
                              edge<span class='op'>=</span><span class='cn'>TRUE</span>,
                            kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span>

<span class='va'>kde_airbnb0619SG_sh_bw</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>airbnb0619SG_sh_ppp</span>,
                              sigma<span class='op'>=</span><span class='va'>bw.diggle</span>,
                              edge<span class='op'>=</span><span class='cn'>TRUE</span>,
                            kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span>

<span class='va'>kde_airbnb0721SG_pte_bw</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>airbnb0721SG_pte_ppp</span>,
                              sigma<span class='op'>=</span><span class='va'>bw.diggle</span>,
                              edge<span class='op'>=</span><span class='cn'>TRUE</span>,
                            kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span>

<span class='va'>kde_airbnb0721SG_ent_bw</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>airbnb0721SG_ent_ppp</span>,
                              sigma<span class='op'>=</span><span class='va'>bw.diggle</span>,
                              edge<span class='op'>=</span><span class='cn'>TRUE</span>,
                            kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span>

<span class='va'>kde_airbnb0721SG_sh_bw</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>airbnb0721SG_sh_ppp</span>,
                              sigma<span class='op'>=</span><span class='va'>bw.diggle</span>,
                              edge<span class='op'>=</span><span class='cn'>TRUE</span>,
                            kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span>

<span class='va'>kde_airbnb0721SG_ht_bw</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>airbnb0721SG_ht_ppp</span>,
                              sigma<span class='op'>=</span><span class='va'>bw.diggle</span>,
                              edge<span class='op'>=</span><span class='cn'>TRUE</span>,
                            kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<h6 id="convert-kde-output-into-grid-object">6.1.1.3.1.10 Convert KDE output into grid object</h6>
<p>The following code chunk converts KDE output into grid object using as.SpatialGridDataFrame.im function of maptools</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>gridded_kde_airbnb0619SG_pte_bw</span> <span class='op'>&lt;-</span> <span class='fu'>as.SpatialGridDataFrame.im</span><span class='op'>(</span><span class='va'>kde_airbnb0619SG_pte_bw</span><span class='op'>)</span>
<span class='va'>gridded_kde_airbnb0619SG_ent_bw</span> <span class='op'>&lt;-</span> <span class='fu'>as.SpatialGridDataFrame.im</span><span class='op'>(</span><span class='va'>kde_airbnb0619SG_ent_bw</span><span class='op'>)</span>
<span class='va'>gridded_kde_airbnb0619SG_sh_bw</span> <span class='op'>&lt;-</span> <span class='fu'>as.SpatialGridDataFrame.im</span><span class='op'>(</span><span class='va'>kde_airbnb0619SG_sh_bw</span><span class='op'>)</span>
<span class='va'>gridded_kde_airbnb0721SG_pte_bw</span> <span class='op'>&lt;-</span> <span class='fu'>as.SpatialGridDataFrame.im</span><span class='op'>(</span><span class='va'>kde_airbnb0721SG_pte_bw</span><span class='op'>)</span>
<span class='va'>gridded_kde_airbnb0721SG_ent_bw</span> <span class='op'>&lt;-</span> <span class='fu'>as.SpatialGridDataFrame.im</span><span class='op'>(</span><span class='va'>kde_airbnb0721SG_ent_bw</span><span class='op'>)</span>
<span class='va'>gridded_kde_airbnb0721SG_sh_bw</span> <span class='op'>&lt;-</span> <span class='fu'>as.SpatialGridDataFrame.im</span><span class='op'>(</span><span class='va'>kde_airbnb0721SG_sh_bw</span><span class='op'>)</span>
<span class='va'>gridded_kde_airbnb0721SG_ht_bw</span> <span class='op'>&lt;-</span> <span class='fu'>as.SpatialGridDataFrame.im</span><span class='op'>(</span><span class='va'>kde_airbnb0721SG_ht_bw</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<h6 id="convert-grid-object-into-raster-and-assign-project-system">6.1.1.3.1.11 Convert grid object into raster and assign project system</h6>
<p>The following code chunk converts grid object into raster using raster function of raster package, and assign CRS projection of 3414 to the raster layer.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>kde_airbnb0619SG_pte_bw_raster</span> <span class='op'>&lt;-</span> <span class='fu'>raster</span><span class='op'>(</span><span class='va'>gridded_kde_airbnb0619SG_pte_bw</span><span class='op'>)</span>
<span class='fu'>projection</span><span class='op'>(</span><span class='va'>kde_airbnb0619SG_pte_bw_raster</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'>CRS</span><span class='op'>(</span><span class='st'>"+init=EPSG:3414"</span><span class='op'>)</span>

<span class='va'>kde_airbnb0619SG_ent_bw_raster</span> <span class='op'>&lt;-</span> <span class='fu'>raster</span><span class='op'>(</span><span class='va'>gridded_kde_airbnb0619SG_ent_bw</span><span class='op'>)</span>
<span class='fu'>projection</span><span class='op'>(</span><span class='va'>kde_airbnb0619SG_ent_bw_raster</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'>CRS</span><span class='op'>(</span><span class='st'>"+init=EPSG:3414"</span><span class='op'>)</span>

<span class='va'>kde_airbnb0619SG_sh_bw_raster</span> <span class='op'>&lt;-</span> <span class='fu'>raster</span><span class='op'>(</span><span class='va'>gridded_kde_airbnb0619SG_sh_bw</span><span class='op'>)</span>
<span class='fu'>projection</span><span class='op'>(</span><span class='va'>kde_airbnb0619SG_sh_bw_raster</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'>CRS</span><span class='op'>(</span><span class='st'>"+init=EPSG:3414"</span><span class='op'>)</span>

<span class='va'>kde_airbnb0721SG_pte_bw_raster</span> <span class='op'>&lt;-</span> <span class='fu'>raster</span><span class='op'>(</span><span class='va'>gridded_kde_airbnb0721SG_pte_bw</span><span class='op'>)</span>
<span class='fu'>projection</span><span class='op'>(</span><span class='va'>kde_airbnb0721SG_pte_bw_raster</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'>CRS</span><span class='op'>(</span><span class='st'>"+init=EPSG:3414"</span><span class='op'>)</span>

<span class='va'>kde_airbnb0721SG_ent_bw_raster</span> <span class='op'>&lt;-</span> <span class='fu'>raster</span><span class='op'>(</span><span class='va'>gridded_kde_airbnb0721SG_ent_bw</span><span class='op'>)</span>
<span class='fu'>projection</span><span class='op'>(</span><span class='va'>kde_airbnb0721SG_ent_bw_raster</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'>CRS</span><span class='op'>(</span><span class='st'>"+init=EPSG:3414"</span><span class='op'>)</span>

<span class='va'>kde_airbnb0721SG_sh_bw_raster</span> <span class='op'>&lt;-</span> <span class='fu'>raster</span><span class='op'>(</span><span class='va'>gridded_kde_airbnb0721SG_sh_bw</span><span class='op'>)</span>
<span class='fu'>projection</span><span class='op'>(</span><span class='va'>kde_airbnb0721SG_sh_bw_raster</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'>CRS</span><span class='op'>(</span><span class='st'>"+init=EPSG:3414"</span><span class='op'>)</span>

<span class='va'>kde_airbnb0721SG_ht_bw_raster</span> <span class='op'>&lt;-</span> <span class='fu'>raster</span><span class='op'>(</span><span class='va'>gridded_kde_airbnb0721SG_ht_bw</span><span class='op'>)</span>
<span class='fu'>projection</span><span class='op'>(</span><span class='va'>kde_airbnb0721SG_ht_bw_raster</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'>CRS</span><span class='op'>(</span><span class='st'>"+init=EPSG:3414"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<h5 id="kde-map-comparison-by-room-type-and-year">6.1.1.3.2 KDE Map Comparison by Room type and Year</h5>
<p>The following code chunks plot KDE map of Airbnb 2019 and 2021 by each room types side by side.</p>
<h6 id="private-room">6.1.1.3.2.1 Private Room</h6>
<ol type="1">
<li><p>The following code chunk first set tmap_mode to view to plot interactive map</p></li>
<li><p>Create two maps</p></li>
<li><p>Each map is plotted with tm_shape of the raster layer, tm_raster with setting of alpha = 0.7 that makes the raster layer slightly transparent so that the basemap can be seen, palette set to Purples, tm_basemap is set to OpenStreetMap</p></li>
<li><p>tmap_arrange to arrange the plot next to each other.</p></li>
<li><p>tmap_mode change back to plot</p></li>
</ol>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>tmap_mode</span><span class='op'>(</span><span class='st'>"view"</span><span class='op'>)</span>

<span class='va'>airbnb0619_pte_map</span> <span class='op'>&lt;-</span> <span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>kde_airbnb0619SG_pte_bw_raster</span><span class='op'>)</span> <span class='op'>+</span> 
                  <span class='fu'>tm_raster</span><span class='op'>(</span><span class='st'>"v"</span>, palette <span class='op'>=</span> <span class='st'>"Purples"</span>, alpha <span class='op'>=</span> <span class='fl'>0.7</span><span class='op'>)</span> <span class='op'>+</span>
                  <span class='fu'>tm_basemap</span><span class='op'>(</span><span class='st'>"OpenStreetMap"</span><span class='op'>)</span>

<span class='va'>airbnb0721_pte_map</span> <span class='op'>&lt;-</span> <span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>kde_airbnb0721SG_pte_bw_raster</span><span class='op'>)</span> <span class='op'>+</span> 
                  <span class='fu'>tm_raster</span><span class='op'>(</span><span class='st'>"v"</span>, palette <span class='op'>=</span> <span class='st'>"Purples"</span>, alpha <span class='op'>=</span> <span class='fl'>0.7</span><span class='op'>)</span> <span class='op'>+</span>
                  <span class='fu'>tm_basemap</span><span class='op'>(</span><span class='st'>"OpenStreetMap"</span><span class='op'>)</span>

<span class='fu'>tmap_arrange</span><span class='op'>(</span><span class='va'>airbnb0619_pte_map</span>, <span class='va'>airbnb0721_pte_map</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<div style="display:inline;width:49%;float:left;border-style:solid;border-color:#BEBEBE;border-width:1px 1px 1px 1px;">
<div id="htmlwidget-9904" style="width:100%;height:400px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-9904">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"createMapPane","args":["tmap401",401]},{"method":"addProviderTiles","args":["OpenStreetMap",null,"OpenStreetMap",{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"pane":"tilePane"}]},{"method":"addRasterImage","args":["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKEAAABnCAYAAABo4CIfAAAEzUlEQVR4nO2dS07lMBBF/VqMGICYIjbVO+lN9SLYSo+fmCIYMKVHaaXzHH+r7LJ9joQEInEc+6bK5e/FgXPOuY/3r++z/z0+3V9a5mU1KFx3LsC9+D7ev74Row5LF2rI+sVAkHIsWZA14juCGOv50TsDrZEUIMiw1FesJUCsYR1mC08qEGhp+RBjGaYKLSaY3Eru5XoRYx5m2oTSgkGA42BChKmCkb5Oi97PH42uX61EZR07lGvTkwBrmEe3wrIiGA0QYR5d3PHMAnRu/veLkfv+zb7YlSrGZwkZez5HvVBWEp9ztwJMmRyRy5bmLKJWfYnVBLjx+HR/SXn3EhH50h1djCa6aGajdVfSx/vXt/YHr5k+ImzEmbU6Cmj7W7LSpdLTEiLuuCOxPs7NrYcEHEtfqlmg2Q5VESHikyVW8bXl3btNiQgHIVUoJWU/nQgRoCxHl1prFXsLzodohhCgDqkLrvb/G6kr5653BiDOXlw5QrIquiNYwgEZRVyp0E84ILN97FjCgZFc7tDTumIJB0ZyZKWnASEwWQDrHkrMBFt/0RU4m8cokY4mQ63rhTa0FiFtQrihtWFBhOClpRCrzC6ueF5auuTqdQ6wDlrCxB1DMqZmVmMF10baIiJCqEJCkENstQa2kLaEtAmhO8kixAqCFlhCyEKjmwYRQncQIXQHEUIyXUdMCEpAEywhJKE5oYHp/RCkxWya5N2YYD1aTefCEoKX0HYix2tqQYTgJbSXjbR3PA1MWmxBOxvXt093ffvsnY0o1rYRSbaEqbt+wjl7gb48PzR5Zo3gzu6VFnGWO9Yyx7FnjiL+l+cH9/r659/ve1pbyJhQYkdddF9jknL2hsQWtaHNH2N77YE9t1pKcWBSY6GOG4Jv6RxFySlIt8xYHiZGTELHcFm3gkc3q+F2H5/uL9uPeOIGKD6aIPXa0L2x544sTglmFd2Rog10Ujfe6VWILQR6ffsUjXBXEZyP4l2cQkIsPbNNqiIsWMmWIw6jcxOYaLm6kKv1BSa+62Zi1vcqoTgwORNMiqs+XiNdIb0ruPfzR+M/EbY+2C/leSn52R9K2PIs4F8/f0fzsz/6YfYot5SkA6LPKDn4z9dWijUBSk4xOktTOqBIAdGFyRJhzmmQoXvP3HPNiZQWgpEzEGGYO+dkD39ued+eM8snOdQIOmR10UhtzJ1D7gGDGzXnBJeyzyvWL50hJrWWVGjoHk3riPjyaTZ2HIsKe1Ve7oGFRLjyZE1qLX3I/t5QJNyr/Zbat3lsFjDVTIbT6Fjy3DRfeilC7IGvDKzmdRa80bFG4aY02K1V6jHPWDwdvGPHrTNhSXy+5kKNh4A4XaNjqxUaareuNMmiFTeFXVOgNdPALMN0LF1uumho90BrRPsJZ7UKrdbfroqJhU417C235q4R2nMgVyap4zgX7cZ7rCNZ45mgx/CWMDeSBXs0EaHG9P39sJkVi4foy5hmVy6fEDcr2eo9rHwMo6HSJlyV/cJ8yi+dIeYTWoaAqJ67VbbU0ATR1ZG9RnhlcLM6mCtQPoL1MFXBtUFSbC2zb2ItIu+Pmc5q6XYp7dxxMCPCmbeRgzBTuaLQdHzcLgCswWhDjQAAcbBsa2AmOj6C+KA7iBAAAAAAAAAA1uEv5mOJ64iPmHsAAAAASUVORK5CYII=",[[1.47066364891549,103.605646858975],[1.16218335265381,104.087962389458]],0.698039215686274,null,"tmap401","kde_airbnb0619SG_pte_bw_raster"]},{"method":"addLegend","args":[{"colors":["#F1EFF6","#D5D5E8","#AAA8D0","#7F7BB9","#61409B"],"labels":["0.0000 to 0.0002","0.0002 to 0.0004","0.0004 to 0.0006","0.0006 to 0.0008","0.0008 to 0.0010"],"na_color":null,"na_label":"NA","opacity":0.698039215686274,"position":"topright","type":"unknown","title":"v","extra":null,"layerId":"legend401","className":"info legend kde_airbnb0619SG_pte_bw_raster","group":"kde_airbnb0619SG_pte_bw_raster"}]},{"method":"addLayersControl","args":[[],"kde_airbnb0619SG_pte_bw_raster",{"collapsed":true,"autoZIndex":true,"position":"topleft"}]}],"limits":{"lat":[1.16218335265381,1.47066364891549],"lng":[103.605646858975,104.087962389458]},"fitBounds":[1.1641988317039,103.605646858975,1.4706519681352,104.085357795856,[]]},"evals":[],"jsHooks":[]}</script>
</div>
<div style="display:inline;width:49%;float:left;border-style:solid;border-color:#BEBEBE;border-width:1px 1px 1px 1px;">
<div id="htmlwidget-2531" style="width:100%;height:400px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-2531">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"createMapPane","args":["tmap401",401]},{"method":"addProviderTiles","args":["OpenStreetMap",null,"OpenStreetMap",{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"pane":"tilePane"}]},{"method":"addRasterImage","args":["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKEAAABnCAYAAABo4CIfAAAFEUlEQVR4nO2dPW4VMRDHJyhFikeblJyCCk7AKZAQJ+ACuQA34BZI4QJJwQmoI0GRtHlFulAZLX5ef86Mx/b/JyEE771dr/3b8cd67TMCRER0fHp+2fvs8PriTDMtq4HMpX0Bt/Idn55fIKMMS2dqLPqlgJB8LJmRLfL5QMZ2XvVOgDacAgIelrqLpQRENGzDbOZxdQQ0Ix9krMNUpqWEKS3kXlUvZCzDTJuQWxgIOA4mJMwVhvt7UvQ+/2h0vWs5CssfUG49HgeIhmV0yywrwkgACcvoUh3PLCDR/NeXovT61e7YlQomFAnx7Hkf8UxZST6iUwFzJkeU4o45i9SiF7GagI7D64uznGuvkSh03NFlNDFEMxvaQ0nHp+cX6Rte8viQUIm9aOUL5P7NWehcx5MSEdVxR1JjnK5ajwmcOj5Xs0CyHSoiIeTjJVXwrfndu00JCQchV5SavJ9OQgjIi1+ltkbF3sKFYE0QBJQh94Wr7WcjDeWc904ASLOVq0Qkq9L5IBIOyChy5YJxwgGZ7WZHJBwYztcdekZXRMKB4Xyy0jOAoGOyANZrKLYQbP1CV2BvHiPHcSQZ6r1eoIO2hGgTghO0AwskBEE0RWwKu6iK50WzSm5+zwGsg5SYqI5BNqZmViMKrg13RISEoAkOIYdYag3YgjsSok0IupMtIaIgkAKREBQhMUwDCUF3ICHoDiQE2XR9YoJOCZAEkRBkITmhAdP7QRSN2TTZqzGB9dCazoVIaJjbu3t6/+5Nl3PHlhPxv9MKIqFBHh6PRER0dXnonJL/8cXkknA3EkI+fnLlkpYvd/FMLbKrY2sJt0hKsh/ffxER0cdPb9XS1BKt9n6rNp/QF67X9l2jyX/95YZ+//xD324/n3zmJCXSiXYl34+VtzRFayFzipha/DG11p5FHh6PdHV5+Pe3NLOszlU9WN0a5p1kvtjuz2gR0HF7dy8qoMuzWQQkMjJEE9uGawQRt21BCQFnEi5E9dYEud+N/TZ13tHlbGV2+RxVC+jkLrzTKxNHFHQV4UJUr+IUE7F2zzaugrAgoeYTh9E5aRNKVXU5Qz6Woqk0s15XDdW94z1hcqpq/zvcBaJZwNuxvx7nn4H/JNTe2C/nfDnp2Q7tpJoEIWlqeHg80vWXm2Bv2B9qcumZcXiFA5FJrTG5NAagY8d2j85aubo80PXXD1lpgXRxsnYpd5TsBhn77V713LIjpYXOyB6QMM45Ee/mz5q/27LXoZJ85q31eG52ioZouBbmLqF0g0FHyz7BtWzTiuiXj4nHdilqCjT2G8noCPnKUXvbLtUr7FV4pRsWoofLT9Gk1tqTbH8bGwzvOWfR/79Q58lvFow21cwqu71jzn3TQsfLEbEHoTywmtZZCPaOJTI3p8FurVD9NCPiyRB8dqydCEvyhZoLLTUESNO1d2y1QGPt1pUmWWhxktktGdoyDcwymI4ly8kQDdo9QBvWccJZo4LW+7erMvzScNvIzT0VbYv0HMiVyRo4LkW68Z4aSJY4J5Bj+EhY2pMF9lCRUGL6/vaxmZWIB+nr2JVQsn0lQUhEFyW1rsPKzTAaIm3CVdm+mI/8y2eI+YSWQYeonfNVltSQBNK1UfyO8MqgmpXBXIbiJlgPUwXc2knyp1ylhEZks4GZwWrudinaueNgRkIsI7cuU1VFsen4qHYBAGsw2qNGAABIg8i2BmZ6xz6QD3QHEgIAAAAAAAAAAGAd/gIyV6QzXeuFKQAAAABJRU5ErkJggg==",[[1.47066364891549,103.605646858975],[1.16218335265381,104.087962389458]],0.698039215686274,null,"tmap401","kde_airbnb0721SG_pte_bw_raster"]},{"method":"addLegend","args":[{"colors":["#F4F3F8","#DDDDEC","#B8B8D9","#9490C3","#7466AE","#582F93"],"labels":["0.0000 to 0.0001","0.0001 to 0.0002","0.0002 to 0.0003","0.0003 to 0.0004","0.0004 to 0.0005","0.0005 to 0.0006"],"na_color":null,"na_label":"NA","opacity":0.698039215686274,"position":"topright","type":"unknown","title":"v","extra":null,"layerId":"legend401","className":"info legend kde_airbnb0721SG_pte_bw_raster","group":"kde_airbnb0721SG_pte_bw_raster"}]},{"method":"addLayersControl","args":[[],"kde_airbnb0721SG_pte_bw_raster",{"collapsed":true,"autoZIndex":true,"position":"topleft"}]}],"limits":{"lat":[1.16218335265381,1.47066364891549],"lng":[103.605646858975,104.087962389458]},"fitBounds":[1.1641988317039,103.605646858975,1.4706519681352,104.085357795856,[]]},"evals":[],"jsHooks":[]}</script>
</div>
<script>
HTMLWidgets.addPostRenderHandler(function() {
var leaf_widgets = {};
                Array.prototype.map.call(
                 document.querySelectorAll(".leaflet"),
                   function(ldiv){
                     if (HTMLWidgets.find("#" + ldiv.id) && HTMLWidgets.find("#" + ldiv.id).getMap()) {
                        leaf_widgets[ldiv.id] = HTMLWidgets.find("#" + ldiv.id).getMap();
                     }
                   }
                );
               
});
</script>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>tmap_mode</span><span class='op'>(</span><span class='st'>"plot"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>Analysis: In 2019, only Chinatown have high density of private as shown in dark purple. In 2021, Kallang and Jalan Besar are new areas with high density 2021. Chinatowns private room density became lower than Kallangs private room density in 2021.</p>
<h6 id="entire-homeapt">6.1.1.3.2.2 Entire Home/Apt</h6>
<p>The following code chunk is similar to 6.1.1.3.2.1.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>tmap_mode</span><span class='op'>(</span><span class='st'>"view"</span><span class='op'>)</span>

<span class='va'>airbnb0619_ent_map</span> <span class='op'>&lt;-</span> <span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>kde_airbnb0619SG_ent_bw_raster</span><span class='op'>)</span> <span class='op'>+</span> 
                  <span class='fu'>tm_raster</span><span class='op'>(</span><span class='st'>"v"</span>, palette <span class='op'>=</span> <span class='st'>"Purples"</span>, alpha <span class='op'>=</span> <span class='fl'>0.7</span><span class='op'>)</span> <span class='op'>+</span>
                  <span class='fu'>tm_basemap</span><span class='op'>(</span><span class='st'>"OpenStreetMap"</span><span class='op'>)</span>

<span class='va'>airbnb0721_ent_map</span> <span class='op'>&lt;-</span> <span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>kde_airbnb0721SG_ent_bw_raster</span><span class='op'>)</span> <span class='op'>+</span> 
                  <span class='fu'>tm_raster</span><span class='op'>(</span><span class='st'>"v"</span>, palette <span class='op'>=</span> <span class='st'>"Purples"</span>, alpha <span class='op'>=</span> <span class='fl'>0.7</span><span class='op'>)</span> <span class='op'>+</span>
                  <span class='fu'>tm_basemap</span><span class='op'>(</span><span class='st'>"OpenStreetMap"</span><span class='op'>)</span>

<span class='fu'>tmap_arrange</span><span class='op'>(</span><span class='va'>airbnb0619_ent_map</span>, <span class='va'>airbnb0721_ent_map</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<div style="display:inline;width:49%;float:left;border-style:solid;border-color:#BEBEBE;border-width:1px 1px 1px 1px;">
<div id="htmlwidget-440" style="width:100%;height:400px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-440">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"createMapPane","args":["tmap401",401]},{"method":"addProviderTiles","args":["OpenStreetMap",null,"OpenStreetMap",{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"pane":"tilePane"}]},{"method":"addRasterImage","args":["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKEAAABnCAYAAABo4CIfAAAEr0lEQVR4nO2dTXLkIAxG6VS22SbbHCQXmxvMlWbfB8k22eYAmZWrXG4bBEgg4L3VTMWNMXyW+JHFLUAIIYTvr5/fq7+9vr3cWtZlNWjccC3Avfi+v35+EaMNSzdqzPqlQJB6LNmQNeI7ghjreepdgdZoChB0WOotthIg1rAOt42nNRFoafkQYxmuGi0lmNxO7uV6EWMebsaE2oJBgOPgQoRSwWhfZ0Xv+49G17dWo7OOC8q15WmANcyjW2N5EYwFiDCPLu54ZgGGMP/zpch9/mZv7Eodc2YJ2Xu+xrxRVhJfCI8ClARH5LKVOYuoTR9iNQFuvL693CTPXiKis3JHF6OLJZrZaL2U9P3182v9wluWjwgbcWWtjgLa/q/Z6VrlWQkRd9yR1Brn5tZjAk6VrzUssByHmogQ8emS6vja9u49pkSEgyAVSknbTydCBKjL0aXWWsXegjtDtUII0AbpB1f7v420lPPcuwKQZi+uHCF5Fd0RLOGAjCIuKawTDshsLzuWcGA0P3foaV2xhAOjubPS04AwMVkA7x5KzQR7f9AVuIpj1CjHkqG+64U2tBYhY0J4oLVhQYRwSkshVpldXPG8tHTJ1d85wDpYCRN3DGJcRVZjBddG2yIiQqhCQ5BDpFoDX2hbQsaE0B2xCLGCYAWWELKwWKZBhNAdRAjdQYQgpuuOCZMSsARLCCIsAxoI74coLaJpxNmYYD1ahXNhCRW43z9DCCF8fLx3rYcmsXQix2tqwRKCmKMwtUR4OTFpkYIW+uAtjYjYHUuzfq7M/f4pcskt3XeN4K5+2zWK5vXt5db6LfL21saIiervn3/iazVI9dX296vrun9jIjl7QyNFbSz5YyrXHoz1gsYonh3XuOdjQvCtnKMoOQXpkRnbw8USTewYLqzgnMLbU3w0gfTa2G9T911dnLOLb6MogY408U6vRmwhUOlMWMoqgjujOItTTIilZ7ZpdYQHK9lyx2F0HsaEVq4u5mrPJiZn183ErM9VQnEo15VgJK76eI12h/Tu4N73Hw3R2bxXlB7scrYHWeO2rkSubdFLxoEsNaUxCWqN7Tu3WIC2KrtkIoIA02RZwpzTIGO/rbFcpSde9gQRxnkKof95uBr3j222W+15b4EIUEfWEo1WYu4ccg8Y3Kg5J7iUfV2xfnJcbNulKOnQVATJ9m9tQSK+fJp9bScJLWpVl9L7psKfoIysoNbSm+x/G1uOsbRQMaRrm8dhAaFmOlzOjjXPTTsrTyLEHpy1gde6zsJzCLLolVokA3ZvnXqsMxbPhtO949aV8CS+s+FCjYeANF1nx147NDZuXSnIohUPjV3ToDVhYJ4hHMuWhyUaxj3QGtV1wlmtQqvvb1dl+NRwe8ttmTXCOgZyZUQLx7lYD95TC8kW9wQ7hreEuTNZ8EcTEVqE7++3zbxYPERfxjRZua7yqbR8Di8vw2iYjAlXZf9hPu0nZ4h4Qs8wIarneZWUGpYgujqyvxFeGdysDe4alJdgPVx1cO0k6Sy/YawcLJsP3CxWa49LGeeOgxsRzpxGDuJM5Ypi4fi4XQBYg9G2GgEA0mDZ1sDN7PgI4oPuIEIAAAAAAAAAWIf/kEtadAWmBcYAAAAASUVORK5CYII=",[[1.47066364891549,103.605646858975],[1.16218335265381,104.087962389458]],0.698039215686274,null,"tmap401","kde_airbnb0619SG_ent_bw_raster"]},{"method":"addLegend","args":[{"colors":["#EAE9F3","#AEADD3","#7262AC"],"labels":["0.0000 to 0.0005","0.0005 to 0.0010","0.0010 to 0.0015"],"na_color":null,"na_label":"NA","opacity":0.698039215686274,"position":"topright","type":"unknown","title":"v","extra":null,"layerId":"legend401","className":"info legend kde_airbnb0619SG_ent_bw_raster","group":"kde_airbnb0619SG_ent_bw_raster"}]},{"method":"addLayersControl","args":[[],"kde_airbnb0619SG_ent_bw_raster",{"collapsed":true,"autoZIndex":true,"position":"topleft"}]}],"limits":{"lat":[1.16218335265381,1.47066364891549],"lng":[103.605646858975,104.087962389458]},"fitBounds":[1.1641988317039,103.605646858975,1.4706519681352,104.085357795856,[]]},"evals":[],"jsHooks":[]}</script>
</div>
<div style="display:inline;width:49%;float:left;border-style:solid;border-color:#BEBEBE;border-width:1px 1px 1px 1px;">
<div id="htmlwidget-4920" style="width:100%;height:400px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-4920">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"createMapPane","args":["tmap401",401]},{"method":"addProviderTiles","args":["OpenStreetMap",null,"OpenStreetMap",{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"pane":"tilePane"}]},{"method":"addRasterImage","args":["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKEAAABnCAYAAABo4CIfAAAF7ElEQVR4nO2dvWpcRxTHj4xAsAIXWwQHQpoUBoOFH8BgUqRIadwkz2BIYQh+BuPObZw6aUIewahOI2RwY4xBqBAYbiHQgiq5CLO+vnvn+5yZM3f+PxDS7mrnzp3533NmznztESAios3V9Y3ts9XhwV7JvPQGCpfsAhyLb3N1fQMxytB1obqsnw8Iko8uCzJHfFMgxnxu1c5AaTgFCHjo6imWEiCsYR5qC4+rI1DS8kGMaagqNJ9gYiu5luuFGONQ0ybkFgwE2A4qRBgqGO7/k6L29Vuj6lPLUVnTgHJuehzAGsZRrbC0CEYCiDCOKu54yQIkWv79+Yi9/2JPbE8VM2cJMfZsR7xQehIf0a4AQyZHxGLSXIqoRW+iNwEaVocHeyH3niKiuXRbF6OKEM3SKB1K2lxd30g/8JLpQ4SFsFmrqYDMa85K50pPSohwxxXxxTiNW3cJ2Jc+V7NAsh0qIkKIjxdfxeeWd+02JUTYCKFCSSn7xYkQAuRl6lJzrWJtwc3BmiEIUIbQBVfjz1oK5ezXzgDwMxZXjJC0im4KLGGDtCKuUBAnbJClPeywhA3DudyhpnWFJWwYzpGVmgYEHZMO0O6h2Eyw9hvtAds8Ro50JGlqXS8oQ2kRok0IdihtWCBCMEtJIWaZXbji5VLSJWevcwD9ICVMuGMQjKqZ1bCCfcNtESFCkAWHIJvYag3ogtsSok0IqhMsQlhBIAUsIYhCIkwDEYLqQISgOk2K8OT0onYWuqTqiIm2TsnH959qZwEwIraqv3eMtX5wdKdyTniQnNAAEWYwDBs6fvOBHv34AxERrder7fvm79YpMZvG644hQDtn55fb32fnl/TrvVdERBBgJMFbggE7L18cb//+/fkjIvrfGhK1K0jXdiLT/8kFIgxkzsUad/z4yX3R62hhKkwuEVrdcYktaFvBWLXpe2fnl/T4yX0ahg0Nw4ZOTi+CwkfDsKF//3k7+1kJAWrbRiR43XHorp9LZE4Y6/Vq+/74c9NOdPH04Wv69ugbVgtqI0dwtu9yizhq8XtIO4GbGPFrCIt8fP9p9vovXxzTTz/fJSKiv979Jp4Pn1B8R11UX2MScvYGxxa1rs0ffXvt1UJTh0ObW00leRuQHPc83RDcpDMVJfcpSLmN/tDvS3YuliK8MSrGjl3HcHFaQU5hGIt4cnqx7ZhIsTo82DM/YhepSJQIpz3mlEKJ3XF0XAGh35USxHq9+kpww7ChB0d3tsHq0Gs/++XvoOstWXhjkjbQCd14p1YBSrQhT04v6Pvvbm9fc8cHexCbjeRdnFxCTD2zjasiUkRo4nahwjKitLn4kiMOrZN0UhBRvAhdIQDuikoRYUqv19UB8YkQAvxCcsfE5n5jBTj3OpeU9MbB5xrX75mvRFj6YL+Q64XkZ3wooeQZbNNOx59//LedOWPLz7gztfRebipBB0TbSDn4b85N+UIxKacYzaXJGb8zghwP09naiBCdmygRxpwG6fquzT3nnEhZY1QltB0JEbq5RVT/PFyO67sG27lcoIkRmp+nD1/T8ZsPucl2T1SIhmtj7hhiDxg05JwTnMo4r7B+4TRxhETOyIzvM25BQnzxFBs79rnEWpUXe2Aherj8RE1qTb3I+LuunrCkhXIRGtucNgs0TjVrEWvvmPPctLn0tI4kzJWB1rwuhX2iMrNqQxrs2ip1mmdYPBl23HENIWgS31xzIXf6GnBTtXestUJd7VZNU9aWwk5h5xRozjQwzWA6liw7IRq0e0BpWOOES7UKpdbf9oqKhU45jC235K4R0nMgeyYocByLdOPdF0iWuCaQo3lLGNuTBfooIkKJ6fsxS0BLAdGnsZhdueaEaKxkqfvQ8jC0hkibsFfGu0ag/MJpYj6hZtAhymefe7+XHoHo8oheI9wzcLMyqCtQPAT9oaqCcztJvrXMcxNrIfL6qAlWc7dL0c5tBzUiXNI2ciCORbki13R8uF0AQB+0NtQIAAB+YNn6QE3veArEB6oDEQIAAAAAAAAAAKAfPgO8zi6kASYy2QAAAABJRU5ErkJggg==",[[1.47066364891549,103.605646858975],[1.16218335265381,104.087962389458]],0.698039215686274,null,"tmap401","kde_airbnb0721SG_ent_bw_raster"]},{"method":"addLegend","args":[{"colors":["#F6F5F9","#E4E3EF","#C6C7E1","#A5A2CC","#817EBA","#684DA1","#4F1F8B"],"labels":["0.00000 to 0.00005","0.00005 to 0.00010","0.00010 to 0.00015","0.00015 to 0.00020","0.00020 to 0.00025","0.00025 to 0.00030","0.00030 to 0.00035"],"na_color":null,"na_label":"NA","opacity":0.698039215686274,"position":"topright","type":"unknown","title":"v","extra":null,"layerId":"legend401","className":"info legend kde_airbnb0721SG_ent_bw_raster","group":"kde_airbnb0721SG_ent_bw_raster"}]},{"method":"addLayersControl","args":[[],"kde_airbnb0721SG_ent_bw_raster",{"collapsed":true,"autoZIndex":true,"position":"topleft"}]}],"limits":{"lat":[1.16218335265381,1.47066364891549],"lng":[103.605646858975,104.087962389458]},"fitBounds":[1.1641988317039,103.605646858975,1.4706519681352,104.085357795856,[]]},"evals":[],"jsHooks":[]}</script>
</div>
<script>
HTMLWidgets.addPostRenderHandler(function() {
var leaf_widgets = {};
                Array.prototype.map.call(
                 document.querySelectorAll(".leaflet"),
                   function(ldiv){
                     if (HTMLWidgets.find("#" + ldiv.id) && HTMLWidgets.find("#" + ldiv.id).getMap()) {
                        leaf_widgets[ldiv.id] = HTMLWidgets.find("#" + ldiv.id).getMap();
                     }
                   }
                );
               
});
</script>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>tmap_mode</span><span class='op'>(</span><span class='st'>"plot"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>Analysis: In 2019, area with higher density of entire home room type (shown in darker purples) are Anson and Geylang. In 2021, areas with higher density of entire home room are Geylang, Chinatown, Whampoa, Anson and Katong.</p>
<h6 id="shared-room">6.1.1.3.2.3 Shared Room</h6>
<p>The following code chunk is similar to 6.1.1.3.2.1.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>tmap_mode</span><span class='op'>(</span><span class='st'>"view"</span><span class='op'>)</span>

<span class='va'>airbnb0619_sh_map</span> <span class='op'>&lt;-</span> <span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>kde_airbnb0619SG_sh_bw_raster</span><span class='op'>)</span> <span class='op'>+</span> 
                  <span class='fu'>tm_raster</span><span class='op'>(</span><span class='st'>"v"</span>, palette <span class='op'>=</span> <span class='st'>"Purples"</span>, alpha <span class='op'>=</span> <span class='fl'>0.7</span><span class='op'>)</span> <span class='op'>+</span>
                  <span class='fu'>tm_basemap</span><span class='op'>(</span><span class='st'>"OpenStreetMap"</span><span class='op'>)</span>

<span class='va'>airbnb0721_sh_map</span> <span class='op'>&lt;-</span> <span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>kde_airbnb0721SG_sh_bw_raster</span><span class='op'>)</span> <span class='op'>+</span> 
                  <span class='fu'>tm_raster</span><span class='op'>(</span><span class='st'>"v"</span>, palette <span class='op'>=</span> <span class='st'>"Purples"</span>, alpha <span class='op'>=</span> <span class='fl'>0.7</span><span class='op'>)</span> <span class='op'>+</span>
                  <span class='fu'>tm_basemap</span><span class='op'>(</span><span class='st'>"OpenStreetMap"</span><span class='op'>)</span>

<span class='fu'>tmap_arrange</span><span class='op'>(</span><span class='va'>airbnb0619_sh_map</span>, <span class='va'>airbnb0721_sh_map</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<div style="display:inline;width:49%;float:left;border-style:solid;border-color:#BEBEBE;border-width:1px 1px 1px 1px;">
<div id="htmlwidget-3437" style="width:100%;height:400px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-3437">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"createMapPane","args":["tmap401",401]},{"method":"addProviderTiles","args":["OpenStreetMap",null,"OpenStreetMap",{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"pane":"tilePane"}]},{"method":"addRasterImage","args":["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKEAAABnCAYAAABo4CIfAAAEuUlEQVR4nO2dO3LbMBCGoYwqF/G4zaTOVVznJrlUDuGruPa41ciFWqVihgOBwALYF4D/62yRIB4/F6/l4hRACCGE6+V2P/rt+eXppJmX1UDlhmMB7sV3vdzuEKMMS1dqzvqVgCD5WLIie8QXAzH28806A9pwChDwsNRbLCVAWMM+3FYe10RA0/JBjG24qrSSYGob2arrhRjrcDMm5BYMBDgOLkRIFQz3dVJYP380TN9ajsaKF5R70+MA1rAOs8ryIhgJIMI6TLrjmQUYwvzlK1FbfrU3dqWGSVlC7D0fI14pK4kvhEcBUpwjatnSnEXUooVYTYAbzy9PJ0rZW0SUSnd0MbpYopkN7aWk6+V2l37hJdOHCJU4slaxgLa/ORudKz0pIaI7NqS0xrl16zkBl9LnGhZIjkNFRAjx8VJq+N76th5TQoSDQBVKS91PJ0IIkJe4S+21itaCS8GaIQhQBuoHV/vfRlrKOVtnAJTZi6tGSF5FFwNLOCCjiIsK1gkHZLaXHZZwYDg/d7C0rrCEA8O5s2JpQDAxWQDvPRSbCfZe0BU48mPkSEeSob7rBTpoixBjQvCAtmGBCEESTSF2mV10xfOi2SV3f+cA1kFKmOiOARlXntWwgmvDbREhQtAFhyCHCLUGfMFtCTEmBOaQRQgrCKSAJQRVSCzTQITAHIgQmAMRAjKmOyaYlABJYAkBCUmHBrj3gywa3jTkaExgPbTcuWAJQZJcOJH4ml4gQpAkF8uGu3c8nJhohKAFNngLI0K2hNSon6vz8fkVfv74bp2N//QI7uheNX/CWHBWx3eNJv6Pz68QQjAXYm+IEPNvTChnb3CEqM0FfyzF2vOElfC8dautNE9MeixUHBB8SycW5SinIGmKb4T6qMXF7Dh3DJd3KxgjMSacUXh7mo8moF6bu7f03JnE2cLs4ttoCqBDDbxjVYkjCnQVwaVojuKUE2LrmW1cDeFBhJo7DqPzMCaU6uooSz6erKk0s5arhWZXriPBULrq+BruBtFs4D+//5o+fwZIZ/Me0XqwS9xVlaxv7XO01hff3t7D6+uv7DUjLTVZIeLUmtt31hCI1piwJMAQcOI7hSpLWHMaZO7eHsvVeuKlJRBhnnMIvIc/a96356hLt9rzBnSqlmi4AnPXUHvA4EbPOcGt7PMK60fHxbZdiZYGzd0jaR0hvnrUvrY7Wr7Z/66Vl9bnbmUolQXUUeXU2vqQ/b255RhLn8X4f6nJUzwsGMXVzDuHs2POc9NS6VGEaEGqDrzmdRaSs2OJyqUM2L01apxnWDwZknvH2pnwJL7UcKGnhwBlTGfHXhs0N25dyclCi4fK7qnQHjcwz8AdS5aHJRqMe4A2rOuEs1oFre9vV2X40HB7yy0ZNULaB3JlSAvHtUgP3ksLyRLPBHIMbwlrZ7LAHyoilHDf32+bebF4EH0b00TlSglxs5Ja5fDyMoyGyJhwVfYf5qP+6AzhT+gZTIj6Oa8SUkMSiK6P6m+EVwbdrAzuKhQvwXq4auDeSVIqvmEuHVg2H7hZrOYel2KcOw5uRIgwcusyVVeUc8dHtwsAWIPRthoBAKAMLNsauJkdx0B8wByIEAAAAAAAAAAAAOvwD40vZI3LhPQSAAAAAElFTkSuQmCC",[[1.47066364891549,103.605646858975],[1.16218335265381,104.087962389458]],0.698039215686274,null,"tmap401","kde_airbnb0619SG_sh_bw_raster"]},{"method":"addLegend","args":[{"colors":["#F1EFF6","#D5D5E8","#AAA8D0","#7F7BB9","#61409B"],"labels":["0.0000 to 0.0001","0.0001 to 0.0002","0.0002 to 0.0003","0.0003 to 0.0004","0.0004 to 0.0005"],"na_color":null,"na_label":"NA","opacity":0.698039215686274,"position":"topright","type":"unknown","title":"v","extra":null,"layerId":"legend401","className":"info legend kde_airbnb0619SG_sh_bw_raster","group":"kde_airbnb0619SG_sh_bw_raster"}]},{"method":"addLayersControl","args":[[],"kde_airbnb0619SG_sh_bw_raster",{"collapsed":true,"autoZIndex":true,"position":"topleft"}]}],"limits":{"lat":[1.16218335265381,1.47066364891549],"lng":[103.605646858975,104.087962389458]},"fitBounds":[1.1641988317039,103.605646858975,1.4706519681352,104.085357795856,[]]},"evals":[],"jsHooks":[]}</script>
</div>
<div style="display:inline;width:49%;float:left;border-style:solid;border-color:#BEBEBE;border-width:1px 1px 1px 1px;">
<div id="htmlwidget-3038" style="width:100%;height:400px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-3038">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"createMapPane","args":["tmap401",401]},{"method":"addProviderTiles","args":["OpenStreetMap",null,"OpenStreetMap",{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"pane":"tilePane"}]},{"method":"addRasterImage","args":["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKEAAABnCAYAAABo4CIfAAAE8klEQVR4nO2dO3IUMRCGtZTDjRbHZFQRk3AODuFbOCTiCqQuUt+BjARSVzkjXm+0+RJQA4NWI7Wk7lZL+r/Irp2HRvqnW4+e1s4B55xzp+P5svXb4Xa/0yzLbKBy3bYA1+I7Hc8XiFGGqSs1Zv1SQJB8TFmRNeLzgRjredW6ANpwChDwMNVbLCVAWMM6zFYe10BA0/JBjGWYqrSUYHIbuZXrhRjzMNMn5BYMBNgPJkRIFQz3cVK0vn9vNH1rORrLn1CuvR4HsIZ5NKssK4KRACLMo4k7HlmAzo3/fClyn1/tjZ2pYUKWEGvP24hXykzic+5agJTgiFyWa44iatGHmE2AC4fb/Y7y7CUiCl23dzGamKIZDe2ppNPxfJF+4SWvDxEqsWWtfAEt/3M2Otf1pIQId9yQ1Bzn4tZjAk5dn6tbINkPFREhxMdLquFr67t1nxIi7ASqUErqfjgRQoC8+C611iq2FlwI1gJBgDJQP7ha/9bTVM5N6wKANGtx5QjJquh8YAk7pBdxUcE8YYeM9rLDEnYM5+cOLa0rLGHHcK6stDQgGJhMgHUPxWaCrT/oDGzFMXJcR5KuvusFOmiLEH1CcIW2YYEIQRBNIVaZXbjicdF0ydXfOYB5kBIm3DEgYyqyGlZwbrgtIkQIquAQZBep1oAtuC0h+oSgOWQRwgoCKWAJQRYS0zQQIWgORAiaAxECMk1XTDAoAZLAEgISkgENCO8HUTSiacjZmMB8aIVzwRKCILF0Iv4xtUCEIEgslw23d9wcmGikoB2Rp+eX1kVIYi2NCNkSUrN+zs6P77+cc869e/u6cUn+UCO4rXObRtEcbvc77bfI2ltL4eHzt9ZFSLbV8vvWcc2/MaHsvcGRojaW/DGVa88S93ePf//+9OWj2n17fEFDFA9MatyznxB8uY4vyt52QdIQYE/1QaXYEsaOS7ElMP96PfZDvz78dO8/vGHtE44ovDXFWxNQj42dm7pvbI84S+Jc3DG3JRxdfAtFCXSoiXdaVeLpeL48Pb+YGaFSmEVwIYoCGFKCKxlFW7JsHFDqIDY6nYmrgYmUq4u52tDAJHRcDtat4OzCW1McyrUlGIqr9o/hbhDNBr6/e3RPzy//rZRAYHlUjXZLN3bxp2ZS1jf3PpbmF3ucatJGJKg1tu6sIRAL4luAANNkWcKc3SBj59ZYrtIdL1sCEca5cY5382fN89ZsuXTOpUYgQ9Y8IVdi7hxyNxhcqNknuJR1WWH96HQR1FrSoKkIkuVvbkFCfPmofW1HCS3SKkvpfVPhT6CMrKDW0pv4qykaoWI5UOc2/W6BpamgntkcHXMvu1EjcFpbmFAdWC3rKARHxxKVS+mwW2tUv8yweDIE1461C2FJfKHuQo2HAGmajo6tNmis32opZG0Uriq7pkKp7qq3RrO6T/AoXE3RoN8DtGGdJxzVKmh9fzsr3aeGW1tuyawR0jGQM0OaOM5FuvNO/SoPQumD7i1h7kgW2ENFhBLh++tlMysWD6IvY5isXFv5VDSfw8rL0BsifcJZWX+Yj/qj00U8oWUwIKrnxlpKjR6B6OrI/kZ4ZuBmZTBXoXgJ5sNUA9cOkkL5DWPXgWWzgZnJau5+Kfq5/WBGhC3TyLW4L/jHUK4oFo4PtwsAmIPelhoBACANLNscmBkd+0B8oDkQIQAAAAAAAAAAAObhN0RPYeTO0Hw6AAAAAElFTkSuQmCC",[[1.47066364891549,103.605646858975],[1.16218335265381,104.087962389458]],0.698039215686274,null,"tmap401","kde_airbnb0721SG_sh_bw_raster"]},{"method":"addLegend","args":[{"colors":["#EEECF4","#C6C7E1","#9490C3","#6A51A3"],"labels":["0.00000 to 0.00002","0.00002 to 0.00004","0.00004 to 0.00006","0.00006 to 0.00008"],"na_color":null,"na_label":"NA","opacity":0.698039215686274,"position":"topright","type":"unknown","title":"v","extra":null,"layerId":"legend401","className":"info legend kde_airbnb0721SG_sh_bw_raster","group":"kde_airbnb0721SG_sh_bw_raster"}]},{"method":"addLayersControl","args":[[],"kde_airbnb0721SG_sh_bw_raster",{"collapsed":true,"autoZIndex":true,"position":"topleft"}]}],"limits":{"lat":[1.16218335265381,1.47066364891549],"lng":[103.605646858975,104.087962389458]},"fitBounds":[1.1641988317039,103.605646858975,1.4706519681352,104.085357795856,[]]},"evals":[],"jsHooks":[]}</script>
</div>
<script>
HTMLWidgets.addPostRenderHandler(function() {
var leaf_widgets = {};
                Array.prototype.map.call(
                 document.querySelectorAll(".leaflet"),
                   function(ldiv){
                     if (HTMLWidgets.find("#" + ldiv.id) && HTMLWidgets.find("#" + ldiv.id).getMap()) {
                        leaf_widgets[ldiv.id] = HTMLWidgets.find("#" + ldiv.id).getMap();
                     }
                   }
                );
               
});
</script>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>tmap_mode</span><span class='op'>(</span><span class='st'>"plot"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>Analysis: In 2019, area with higher density of shared room type (shown in darker purples) are Clarke Quay. In 2021, areas with higher density of shared room are Rochor, Jalan Besar and Bencoolen.</p>
<h6 id="hotel-room">6.1.1.3.2.4 Hotel Room</h6>
<p>The following code chunk is similar to 6.1.1.3.2.1. The only difference is that this chunk plots only one interactive map since Airbnb0619 do not have Hotel Room as room type.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>tmap_mode</span><span class='op'>(</span><span class='st'>"view"</span><span class='op'>)</span>

<span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>kde_airbnb0721SG_ht_bw_raster</span><span class='op'>)</span> <span class='op'>+</span> 
    <span class='fu'>tm_raster</span><span class='op'>(</span><span class='st'>"v"</span>, palette <span class='op'>=</span> <span class='st'>"Purples"</span>, alpha <span class='op'>=</span> <span class='fl'>0.7</span><span class='op'>)</span> <span class='op'>+</span>
    <span class='fu'>tm_basemap</span><span class='op'>(</span><span class='st'>"OpenStreetMap"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<div id="htmlwidget-6d5aaf084252a14d487d" style="width:624px;height:384px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-6d5aaf084252a14d487d">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"createMapPane","args":["tmap401",401]},{"method":"addProviderTiles","args":["OpenStreetMap",null,"OpenStreetMap",{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"pane":"tilePane"}]},{"method":"addRasterImage","args":["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKEAAABnCAYAAABo4CIfAAAEoklEQVR4nO2dS27kIBCG3aNIkTq7HGNuNNeag/YuLWWVWVnyuDHPqqKA71slahtj+CkeLorbBtu2bdvz6/vn6rf7x/vNMi+rQeFu1wI8iu/59f2DGHVYulBj1i8FgpRjyYJsEd8ZxNjOr94ZsEZSgCDDUq1YS4BYwzbcFp7URMDS8iHGOlwVWkowpZXcq+tFjGW4GRNKCwYBjoMLEeYKRvo6LXo/fzS6tlqJyjovKLemJwHWsIxuheVFMBogwjK6dMczC3Db5n+/FKXvb9ZiV6qYkCXk2/M16oWykvi27VWAOc4RpexpziJq1ZdYTYA794/3W86714golO7oYnSxRDMb1ktJz6/vH+0Gr5k+IjTiylqdBbT/L1npUulpCZHuuCOpNc69W48JOJW+1LBAcxyqIkLEJ0uq4lvLu/eYEhEOQq5Qasp+OhEiQFnOXWqrVewtuBCiGUKAOuRuuDr+NtJSzlvvDECao7hKhORVdGewhAMyirhyYZ1wQGZr7FjCgZHc7tDTumIJB0byy0pPA8LEZAG891BiJtj7i67AlR+jRDqaDLWvF2ywFiFjQnjB2rAgQghiKcQms0tXPC+WXXLzPgdYBy1h0h1DNq48q7GCayNtEREhNCEhyCFCrYEvpC0hY0LoTrYIsYKgBZYQitBYpkGE0B1ECN1BhJBN1y8mTEpAEywhZKHp0IB7P0Sx8KbJjsYE62HlzoUlhCCxcCLna1pBhBAkFstGune8nJhYhKCFPngLI5JtCXOjfoIvWgR3dW9XL5r7x/vNuhV5a7U5PB7P6P8WpOpq//3quu57THLO3pAIURsL/piKtQdjNtAQ1ROTlu75HBB8T+csyhFPQXo8ntvn510t/dHKIwcXs+PYMVxYwTmFd6T6aILca2P3pp67ujhnF99OVQCd3MA7vQpxRIGuIrgQ1VGcYkKsPbNNqiI8iNDyi8PovIwJtbq6WFcbmpiErpuJWd+rhmpXrivB5HTV52ukK8SygkNrgAisjP9EaH2wX87zcvJzPJTQ8izgP7//JvNzPPohtji8MlkHRF9Rc/BfaKyUGgLUnGLkaQaN6OIUibDkNMjYvVfdc8uJlF4EFwIRxnnbNtnDny3vO3Jl+SQ/NYIORUs0UoG5Syg9YHCn5ZzgWo55xfrl4+KzXYqaCk15kOx/SwsS8ZVjttsux7XIKi+1z2WGq0ORU2vtQ473xmatvcZvuWub52EBrmYyXM6OJc9NC6WXI8QehMrAa15nITg71ijcnAG7t0o95xmLp0Pw27F1JjyJLzRcaOkhIE3X2bHXCo2NW1dysrDipbBbCrTFDcwzuGPp8rJEw7gHrBFdJ5zVKljtv12V4UPDHS23ZtQIbR/IlclaOC5Fe/CeWkjWeCboMbwlLJ3Jgj9MRKjhvn/8bObF4iH6OqaJynUVT8XyPbw0htFQGROuynFjPuWXzxD+hJ5hQtTOm6cNQaOC6Noo3iO8MnSzOrgrUBrBeriq4NZJUmovcywQJ/TDzWK19LiUce44uBEhYeTWZaquKOaOT7cLAGsw2qdGAIA0WLY1cDM7PoP4oDuIEAAAAAAAAADW4R+0p3DYsCgZUAAAAABJRU5ErkJggg==",[[1.47066364891549,103.605646858975],[1.16218335265381,104.087962389458]],0.698039215686274,null,"tmap401","kde_airbnb0721SG_ht_bw_raster"]},{"method":"addLegend","args":[{"colors":["#F6F5F9","#E4E3EF","#C6C7E1","#A5A2CC","#817EBA","#684DA1","#4F1F8B"],"labels":["0.00000 to 0.00005","0.00005 to 0.00010","0.00010 to 0.00015","0.00015 to 0.00020","0.00020 to 0.00025","0.00025 to 0.00030","0.00030 to 0.00035"],"na_color":null,"na_label":"NA","opacity":0.698039215686274,"position":"topright","type":"unknown","title":"v","extra":null,"layerId":"legend401","className":"info legend kde_airbnb0721SG_ht_bw_raster","group":"kde_airbnb0721SG_ht_bw_raster"}]},{"method":"addLayersControl","args":[[],"kde_airbnb0721SG_ht_bw_raster",{"collapsed":true,"autoZIndex":true,"position":"topleft"}]}],"limits":{"lat":[1.16218335265381,1.47066364891549],"lng":[103.605646858975,104.087962389458]},"fitBounds":[1.1641988317039,103.605646858975,1.4706519681352,104.085357795856,[]]},"evals":[],"jsHooks":[]}</script>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>tmap_mode</span><span class='op'>(</span><span class='st'>"plot"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>Analysis: Hotel room is a new room type in 2021. Chinatown is the only area with highest density of Hotel room in 2021.</p>
<p>Overall, we can see that there are changes in each type of rooms, some area became denser and some became less dense from 2019 to 2021. We will focus specifically on Chinatown because the area is the most happening for majority of the room type and the area have the highest density in Hotel room type. Chinatown subzone is under Outram planning area and therefore we will focus on Outram area.</p>
<h5 id="kde-map-comparison-by-room-type-and-year-specific-area">6.1.1.3.3 KDE Map Comparison by Room type and Year (Specific Area)</h5>
<h6 id="extract-and-plot-study-area">6.1.1.3.3.1 Extract and plot study area</h6>
<ol type="1">
<li><p>The following code chunk extracts the target areas (Outram)</p></li>
<li><p>Convert Spatial Polygons Data Fraeme into generic SP format</p></li>
<li><p>Create owin object for the target area</p></li>
</ol>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>ot</span> <span class='op'>=</span> <span class='va'>mpsz</span><span class='op'>[</span><span class='va'>mpsz</span><span class='op'>@</span><span class='va'>data</span><span class='op'>$</span><span class='va'>PLN_AREA_N</span> <span class='op'>==</span> <span class='st'>"OUTRAM"</span>,<span class='op'>]</span>
<span class='va'>ot_sp</span> <span class='op'>=</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>ot</span>, <span class='st'>"SpatialPolygons"</span><span class='op'>)</span>
<span class='va'>ot_owin</span> <span class='op'>=</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>ot_sp</span>, <span class='st'>"owin"</span><span class='op'>)</span>

<span class='va'>airbnb0619SG_pte_ot_ppp</span> <span class='op'>=</span> <span class='va'>airbnb0619_pte_ppp</span><span class='op'>[</span><span class='va'>ot_owin</span><span class='op'>]</span>
<span class='va'>airbnb0619SG_ent_ot_ppp</span> <span class='op'>=</span> <span class='va'>airbnb0619_ent_ppp_jit</span><span class='op'>[</span><span class='va'>ot_owin</span><span class='op'>]</span>
<span class='va'>airbnb0619SG_sh_ot_ppp</span> <span class='op'>=</span> <span class='va'>airbnb0619_sh_ppp_jit</span><span class='op'>[</span><span class='va'>ot_owin</span><span class='op'>]</span>
<span class='va'>airbnb0721SG_pte_ot_ppp</span> <span class='op'>=</span> <span class='va'>airbnb0721_pte_ppp_jit</span><span class='op'>[</span><span class='va'>ot_owin</span><span class='op'>]</span>
<span class='va'>airbnb0721SG_ent_ot_ppp</span> <span class='op'>=</span> <span class='va'>airbnb0721_ent_ppp_jit</span><span class='op'>[</span><span class='va'>ot_owin</span><span class='op'>]</span>
<span class='va'>airbnb0721SG_sh_ot_ppp</span> <span class='op'>=</span> <span class='va'>airbnb0721_sh_ppp_jit</span><span class='op'>[</span><span class='va'>ot_owin</span><span class='op'>]</span>
<span class='va'>airbnb0721SG_ht_ot_ppp</span> <span class='op'>=</span> <span class='va'>airbnb0721_ht_ppp_jit</span><span class='op'>[</span><span class='va'>ot_owin</span><span class='op'>]</span>
</code></pre>
</div>
</details>
</div>
<h6 id="get-bounding-box-and-read-osm">6.1.1.3.3.2 Get bounding box and read osm</h6>
<p>The following code chunk</p>
<ol type="1">
<li><p>get bounding box of outram using getbb function of osmdata package</p></li>
<li><p>set the crs to 3414 using st_set_crs function of st package</p></li>
<li><p>read the OSM data using read_osm function of tmaptools</p></li>
</ol>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>ot_bb</span> <span class='op'>&lt;-</span> <span class='fu'>getbb</span><span class='op'>(</span><span class='st'>"outram singapore"</span>, format_out <span class='op'>=</span> <span class='st'>"sf_polygon"</span><span class='op'>)</span>
<span class='fu'>st_set_crs</span><span class='op'>(</span><span class='va'>ot_bb</span>, <span class='fl'>3414</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>Simple feature collection with 1 feature and 0 fields
Geometry type: POLYGON
Dimension:     XY
Bounding box:  xmin: 103.8348 ymin: 1.274151 xmax: 103.8496 ymax: 1.289229
Projected CRS: SVY21 / Singapore TM
                        geometry
1 POLYGON ((103.8348 1.286257...</code></pre>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>ot_bb_osm</span> <span class='op'>&lt;-</span> <span class='fu'>read_osm</span><span class='op'>(</span><span class='va'>ot_bb</span>, type <span class='op'>=</span> <span class='st'>"osm"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<h6 id="calculate-kde">6.1.1.3.3.3 Calculate KDE</h6>
<p>The following code chunk calculates KDE using density function of raster package. Note that we are using ppp in m.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>kde_airbnb0619_pte_ot_bw</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>airbnb0619SG_pte_ot_ppp</span>, 
                              sigma<span class='op'>=</span><span class='va'>bw.diggle</span>, 
                               edge<span class='op'>=</span><span class='cn'>TRUE</span>, 
                               kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span>

<span class='va'>kde_airbnb0619_ent_ot_bw</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>airbnb0619SG_ent_ot_ppp</span>, 
                              sigma<span class='op'>=</span><span class='va'>bw.diggle</span>, 
                               edge<span class='op'>=</span><span class='cn'>TRUE</span>, 
                               kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span>

<span class='va'>kde_airbnb0619_sh_ot_bw</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>airbnb0619SG_sh_ot_ppp</span>, 
                              sigma<span class='op'>=</span><span class='va'>bw.diggle</span>, 
                               edge<span class='op'>=</span><span class='cn'>TRUE</span>, 
                               kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span>

<span class='va'>kde_airbnb0721_pte_ot_bw</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>airbnb0721SG_pte_ot_ppp</span>, 
                              sigma<span class='op'>=</span><span class='va'>bw.diggle</span>, 
                               edge<span class='op'>=</span><span class='cn'>TRUE</span>, 
                               kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span>

<span class='va'>kde_airbnb0721_ent_ot_bw</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>airbnb0721SG_ent_ot_ppp</span>, 
                              sigma<span class='op'>=</span><span class='va'>bw.diggle</span>, 
                               edge<span class='op'>=</span><span class='cn'>TRUE</span>, 
                               kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span>

<span class='va'>kde_airbnb0721_sh_ot_bw</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>airbnb0721SG_sh_ot_ppp</span>, 
                              sigma<span class='op'>=</span><span class='va'>bw.diggle</span>, 
                               edge<span class='op'>=</span><span class='cn'>TRUE</span>, 
                               kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span>

<span class='va'>kde_airbnb0721_ht_ot_bw</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>airbnb0721SG_ht_ot_ppp</span>, 
                              sigma<span class='op'>=</span><span class='va'>bw.diggle</span>, 
                               edge<span class='op'>=</span><span class='cn'>TRUE</span>, 
                               kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<h6 id="create-rasterlayer-object">6.1.1.3.3.4 Create RasterLayer object</h6>
<ol type="1">
<li><p>The following code chunk converts KDE output into grid object using as.SpatialGridDataFrame.im function of maptools package</p></li>
<li><p>create a RasterLayer object using raster function of raster package</p></li>
<li><p>assign CRS of EPSG:3414 to the raster</p></li>
</ol>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>gridded_kde_airbnb0619_pte_ot_bw</span> <span class='op'>&lt;-</span> <span class='fu'>as.SpatialGridDataFrame.im</span><span class='op'>(</span><span class='va'>kde_airbnb0619_pte_ot_bw</span><span class='op'>)</span>
<span class='va'>kde_airbnb0619_pte_ot_bw_raster</span> <span class='op'>&lt;-</span> <span class='fu'>raster</span><span class='op'>(</span><span class='va'>gridded_kde_airbnb0619_pte_ot_bw</span><span class='op'>)</span>
<span class='fu'>projection</span><span class='op'>(</span><span class='va'>kde_airbnb0619_pte_ot_bw_raster</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'>CRS</span><span class='op'>(</span><span class='st'>"+init=EPSG:3414"</span><span class='op'>)</span>

<span class='va'>gridded_kde_airbnb0619_ent_ot_bw</span> <span class='op'>&lt;-</span> <span class='fu'>as.SpatialGridDataFrame.im</span><span class='op'>(</span><span class='va'>kde_airbnb0619_ent_ot_bw</span><span class='op'>)</span>
<span class='va'>kde_airbnb0619_ent_ot_bw_raster</span> <span class='op'>&lt;-</span> <span class='fu'>raster</span><span class='op'>(</span><span class='va'>gridded_kde_airbnb0619_ent_ot_bw</span><span class='op'>)</span>
<span class='fu'>projection</span><span class='op'>(</span><span class='va'>kde_airbnb0619_ent_ot_bw_raster</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'>CRS</span><span class='op'>(</span><span class='st'>"+init=EPSG:3414"</span><span class='op'>)</span>

<span class='va'>gridded_kde_airbnb0619_sh_ot_bw</span> <span class='op'>&lt;-</span> <span class='fu'>as.SpatialGridDataFrame.im</span><span class='op'>(</span><span class='va'>kde_airbnb0619_sh_ot_bw</span><span class='op'>)</span>
<span class='va'>kde_airbnb0619_sh_ot_bw_raster</span> <span class='op'>&lt;-</span> <span class='fu'>raster</span><span class='op'>(</span><span class='va'>gridded_kde_airbnb0619_sh_ot_bw</span><span class='op'>)</span>
<span class='fu'>projection</span><span class='op'>(</span><span class='va'>kde_airbnb0619_sh_ot_bw_raster</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'>CRS</span><span class='op'>(</span><span class='st'>"+init=EPSG:3414"</span><span class='op'>)</span>

<span class='va'>gridded_kde_airbnb0721_pte_ot_bw</span> <span class='op'>&lt;-</span> <span class='fu'>as.SpatialGridDataFrame.im</span><span class='op'>(</span><span class='va'>kde_airbnb0721_pte_ot_bw</span><span class='op'>)</span>
<span class='va'>kde_airbnb0721_pte_ot_bw_raster</span> <span class='op'>&lt;-</span> <span class='fu'>raster</span><span class='op'>(</span><span class='va'>gridded_kde_airbnb0721_pte_ot_bw</span><span class='op'>)</span>
<span class='fu'>projection</span><span class='op'>(</span><span class='va'>kde_airbnb0721_pte_ot_bw_raster</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'>CRS</span><span class='op'>(</span><span class='st'>"+init=EPSG:3414"</span><span class='op'>)</span>

<span class='va'>gridded_kde_airbnb0721_ent_ot_bw</span> <span class='op'>&lt;-</span> <span class='fu'>as.SpatialGridDataFrame.im</span><span class='op'>(</span><span class='va'>kde_airbnb0721_ent_ot_bw</span><span class='op'>)</span>
<span class='va'>kde_airbnb0721_ent_ot_bw_raster</span> <span class='op'>&lt;-</span> <span class='fu'>raster</span><span class='op'>(</span><span class='va'>gridded_kde_airbnb0721_ent_ot_bw</span><span class='op'>)</span>
<span class='fu'>projection</span><span class='op'>(</span><span class='va'>kde_airbnb0721_ent_ot_bw_raster</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'>CRS</span><span class='op'>(</span><span class='st'>"+init=EPSG:3414"</span><span class='op'>)</span>

<span class='va'>gridded_kde_airbnb0721_sh_ot_bw</span> <span class='op'>&lt;-</span> <span class='fu'>as.SpatialGridDataFrame.im</span><span class='op'>(</span><span class='va'>kde_airbnb0721_sh_ot_bw</span><span class='op'>)</span>
<span class='va'>kde_airbnb0721_sh_ot_bw_raster</span> <span class='op'>&lt;-</span> <span class='fu'>raster</span><span class='op'>(</span><span class='va'>gridded_kde_airbnb0721_sh_ot_bw</span><span class='op'>)</span>
<span class='fu'>projection</span><span class='op'>(</span><span class='va'>kde_airbnb0721_sh_ot_bw_raster</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'>CRS</span><span class='op'>(</span><span class='st'>"+init=EPSG:3414"</span><span class='op'>)</span>

<span class='va'>gridded_kde_airbnb0721_ht_ot_bw</span> <span class='op'>&lt;-</span> <span class='fu'>as.SpatialGridDataFrame.im</span><span class='op'>(</span><span class='va'>kde_airbnb0721_ht_ot_bw</span><span class='op'>)</span>
<span class='va'>kde_airbnb0721_ht_ot_bw_raster</span> <span class='op'>&lt;-</span> <span class='fu'>raster</span><span class='op'>(</span><span class='va'>gridded_kde_airbnb0721_ht_ot_bw</span><span class='op'>)</span>
<span class='fu'>projection</span><span class='op'>(</span><span class='va'>kde_airbnb0721_ht_ot_bw_raster</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'>CRS</span><span class='op'>(</span><span class='st'>"+init=EPSG:3414"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<h6 id="private-room-1">6.1.1.3.3.5 Private Room</h6>
<ol type="1">
<li><p>The following code chunk create two maps</p></li>
<li><p>Each map is plotted with tm_shape of the osm and raster layer, tm_raster with setting of alpha = 0.7 that makes the raster layer slightly transparent so that the static osm can be seen, palette set to Purples</p></li>
<li><p>tmap_arrange to arrange the plot next to each other.</p></li>
</ol>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>tmap_mode</span><span class='op'>(</span><span class='st'>"plot"</span><span class='op'>)</span>
<span class='va'>airbnb0619_pte_ot_map</span> <span class='op'>&lt;-</span> <span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>ot_bb_osm</span><span class='op'>)</span> <span class='op'>+</span>
                  <span class='fu'>tm_rgb</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
                  <span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>kde_airbnb0619_pte_ot_bw_raster</span><span class='op'>)</span> <span class='op'>+</span> 
                  <span class='fu'>tm_raster</span><span class='op'>(</span><span class='st'>"v"</span>, palette <span class='op'>=</span> <span class='st'>"Purples"</span>, alpha <span class='op'>=</span> <span class='fl'>0.7</span><span class='op'>)</span> <span class='op'>+</span>
                  <span class='fu'>tm_layout</span><span class='op'>(</span>legend.position <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"right"</span>, <span class='st'>"bottom"</span><span class='op'>)</span>, frame <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>

<span class='va'>airbnb0721_pte_ot_map</span> <span class='op'>&lt;-</span> <span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>ot_bb_osm</span><span class='op'>)</span> <span class='op'>+</span>
                  <span class='fu'>tm_rgb</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span> 
                  <span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>kde_airbnb0721_pte_ot_bw_raster</span><span class='op'>)</span> <span class='op'>+</span> 
                  <span class='fu'>tm_raster</span><span class='op'>(</span><span class='st'>"v"</span>, palette <span class='op'>=</span> <span class='st'>"Purples"</span>, alpha <span class='op'>=</span> <span class='fl'>0.7</span><span class='op'>)</span> <span class='op'>+</span>
                  <span class='fu'>tm_layout</span><span class='op'>(</span>legend.position <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"right"</span>, <span class='st'>"bottom"</span><span class='op'>)</span>, frame <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>

<span class='fu'>tmap_arrange</span><span class='op'>(</span><span class='va'>airbnb0619_pte_ot_map</span>, <span class='va'>airbnb0721_pte_ot_map</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="takehome-ex02_files/figure-html5/unnamed-chunk-162-1.png" width="624" /></p>
</div>
<p>Analysis: From the static raster map, we can see that there are lesser purple area in 2021 which means that there are lesser private room Airbnb from 2021 as compared to 2019.</p>
<h6 id="entire-homeapt-1">6.1.1.3.3.6 Entire Home/Apt</h6>
<p>The following code chunk is similar to 6.1.1.3.3.5</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>airbnb0619_ent_ot_map</span> <span class='op'>&lt;-</span> <span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>ot_bb_osm</span><span class='op'>)</span> <span class='op'>+</span>
                  <span class='fu'>tm_rgb</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
                  <span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>kde_airbnb0619_ent_ot_bw_raster</span><span class='op'>)</span> <span class='op'>+</span> 
                  <span class='fu'>tm_raster</span><span class='op'>(</span><span class='st'>"v"</span>, palette <span class='op'>=</span> <span class='st'>"Purples"</span>, alpha <span class='op'>=</span> <span class='fl'>0.7</span><span class='op'>)</span> <span class='op'>+</span>
                  <span class='fu'>tm_layout</span><span class='op'>(</span>legend.position <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"right"</span>, <span class='st'>"bottom"</span><span class='op'>)</span>, frame <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>

<span class='va'>airbnb0721_ent_ot_map</span> <span class='op'>&lt;-</span> <span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>ot_bb_osm</span><span class='op'>)</span> <span class='op'>+</span>
                  <span class='fu'>tm_rgb</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span> 
                  <span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>kde_airbnb0721_ent_ot_bw_raster</span><span class='op'>)</span> <span class='op'>+</span> 
                  <span class='fu'>tm_raster</span><span class='op'>(</span><span class='st'>"v"</span>, palette <span class='op'>=</span> <span class='st'>"Purples"</span>, alpha <span class='op'>=</span> <span class='fl'>0.7</span><span class='op'>)</span> <span class='op'>+</span>
                  <span class='fu'>tm_layout</span><span class='op'>(</span>legend.position <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"right"</span>, <span class='st'>"bottom"</span><span class='op'>)</span>, frame <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>

<span class='fu'>tmap_arrange</span><span class='op'>(</span><span class='va'>airbnb0619_ent_ot_map</span>, <span class='va'>airbnb0721_ent_ot_map</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="takehome-ex02_files/figure-html5/unnamed-chunk-163-1.png" width="624" /></p>
</div>
<p>Analysis: From the static raster map, we can see that there are not much changes for the entire home Airbnb in this area from 2019 to 2021.</p>
<h6 id="shared-room-1">6.1.1.3.3.7 Shared Room</h6>
<p>The following code chunk is similar to 6.1.1.3.3.5</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>airbnb0619_sh_ot_map</span> <span class='op'>&lt;-</span> <span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>ot_bb_osm</span><span class='op'>)</span> <span class='op'>+</span>
                  <span class='fu'>tm_rgb</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
                  <span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>kde_airbnb0619_sh_ot_bw_raster</span><span class='op'>)</span> <span class='op'>+</span> 
                  <span class='fu'>tm_raster</span><span class='op'>(</span><span class='st'>"v"</span>, palette <span class='op'>=</span> <span class='st'>"Purples"</span>, alpha <span class='op'>=</span> <span class='fl'>0.7</span><span class='op'>)</span> <span class='op'>+</span>
                  <span class='fu'>tm_layout</span><span class='op'>(</span>legend.position <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"right"</span>, <span class='st'>"bottom"</span><span class='op'>)</span>, frame <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>

<span class='va'>airbnb0721_sh_ot_map</span> <span class='op'>&lt;-</span> <span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>ot_bb_osm</span><span class='op'>)</span> <span class='op'>+</span>
                  <span class='fu'>tm_rgb</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span> 
                  <span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>kde_airbnb0721_sh_ot_bw_raster</span><span class='op'>)</span> <span class='op'>+</span> 
                  <span class='fu'>tm_raster</span><span class='op'>(</span><span class='st'>"v"</span>, palette <span class='op'>=</span> <span class='st'>"Purples"</span>, alpha <span class='op'>=</span> <span class='fl'>0.7</span><span class='op'>)</span> <span class='op'>+</span>
                  <span class='fu'>tm_layout</span><span class='op'>(</span>legend.position <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"right"</span>, <span class='st'>"bottom"</span><span class='op'>)</span>, frame <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>

<span class='fu'>tmap_arrange</span><span class='op'>(</span><span class='va'>airbnb0619_sh_ot_map</span>, <span class='va'>airbnb0721_sh_ot_map</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="takehome-ex02_files/figure-html5/unnamed-chunk-164-1.png" width="624" /></p>
</div>
<p>Analysis: From the static raster map, we can see that there are lesser purple area in 2021 which means that there are lesser shared room Airbnb from 2021 as compared to 2019.</p>
<h6 id="hotel-room-1">6.1.1.3.3.8 Hotel Room</h6>
<p>The following code chunk is similar to 6.1.1.3.3.5, just that this code chunk plots one map.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>ot_bb_osm</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_rgb</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>kde_airbnb0721_ht_ot_bw_raster</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>tm_raster</span><span class='op'>(</span><span class='st'>"v"</span>, palette <span class='op'>=</span> <span class='st'>"Purples"</span>, alpha <span class='op'>=</span> <span class='fl'>0.7</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_layout</span><span class='op'>(</span>legend.position <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"right"</span>, <span class='st'>"bottom"</span><span class='op'>)</span>, frame <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="takehome-ex02_files/figure-html5/unnamed-chunk-165-1.png" width="624" /></p>
</div>
<p>Analysis: From the static raster map, we can see the new hotel room Airbnb in 2021.</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<!--radix_placeholder_article_footer-->
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>


<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom"></div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
