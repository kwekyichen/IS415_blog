<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ad0000; } /* Alert */
code span.an { color: #5e5e5e; } /* Annotation */
code span.at { color: #20794d; } /* Attribute */
code span.bn { color: #ad0000; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007ba5; } /* ControlFlow */
code span.ch { color: #20794d; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #5e5e5e; } /* Comment */
code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
code span.dt { color: #ad0000; } /* DataType */
code span.dv { color: #ad0000; } /* DecVal */
code span.er { color: #ad0000; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #ad0000; } /* Float */
code span.fu { color: #4758ab; } /* Function */
code span.im { } /* Import */
code span.in { color: #5e5e5e; } /* Information */
code span.kw { color: #007ba5; } /* Keyword */
code span.op { color: #5e5e5e; } /* Operator */
code span.ot { color: #007ba5; } /* Other */
code span.pp { color: #ad0000; } /* Preprocessor */
code span.sc { color: #20794d; } /* SpecialChar */
code span.ss { color: #20794d; } /* SpecialString */
code span.st { color: #20794d; } /* String */
code span.va { color: #111111; } /* Variable */
code span.vs { color: #20794d; } /* VerbatimString */
code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
</style>

  <!--radix_placeholder_meta_tags-->
  <title>Take Home Exercise 02</title>

  <meta property="description" itemprop="description" content="Analysing and Visualising the distribution of Airbnb listings in 2019 and 2021, and how Covid-19 affected the distribution."/>


  <!--  https://schema.org/Article -->
  <meta property="article:published" itemprop="datePublished" content="2021-09-16"/>
  <meta property="article:created" itemprop="dateCreated" content="2021-09-16"/>
  <meta name="article:author" content="Kwek Yi Chen"/>

  <!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
  <meta property="og:title" content="Take Home Exercise 02"/>
  <meta property="og:type" content="article"/>
  <meta property="og:description" content="Analysing and Visualising the distribution of Airbnb listings in 2019 and 2021, and how Covid-19 affected the distribution."/>
  <meta property="og:locale" content="en_US"/>

  <!--  https://dev.twitter.com/cards/types/summary -->
  <meta property="twitter:card" content="summary"/>
  <meta property="twitter:title" content="Take Home Exercise 02"/>
  <meta property="twitter:description" content="Analysing and Visualising the distribution of Airbnb listings in 2019 and 2021, and how Covid-19 affected the distribution."/>

  <!--/radix_placeholder_meta_tags-->
  <!--radix_placeholder_rmarkdown_metadata-->

  <script type="text/json" id="radix-rmarkdown-metadata">
  {"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","description","author","date","output"]}},"value":[{"type":"character","attributes":{},"value":["Take Home Exercise 02"]},{"type":"character","attributes":{},"value":["Analysing and Visualising the distribution of Airbnb listings in 2019 and 2021, and how Covid-19 affected the distribution.\n"]},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","url"]}},"value":[{"type":"character","attributes":{},"value":["Kwek Yi Chen"]},{"type":"character","attributes":{},"value":["https://example.com/kwekyichen"]}]}]},{"type":"character","attributes":{},"value":["09-16-2021"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["self_contained","toc","toc_float","number_sections","code_folding"]}},"value":[{"type":"logical","attributes":{},"value":[false]},{"type":"logical","attributes":{},"value":[true]},{"type":"logical","attributes":{},"value":[true]},{"type":"logical","attributes":{},"value":[true]},{"type":"logical","attributes":{},"value":[true]}]}]}]}
  </script>
  <!--/radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-resource-manifest">
<<<<<<< HEAD
  {"type":"character","attributes":{},"value":["data/Airbnb_listing_30062019.zip","data/aspatial/hotels.csv","data/aspatial/listings19072021.csv","data/aspatial/listings30062019.csv","data/aspatial/tourism.csv","data/geospatial/CostalOutline.dbf","data/geospatial/CostalOutline.prj","data/geospatial/CostalOutline.sbn","data/geospatial/CostalOutline.sbx","data/geospatial/CostalOutline.shp","data/geospatial/CostalOutline.shx","data/geospatial/MP14_SUBZONE_WEB_PL.dbf","data/geospatial/MP14_SUBZONE_WEB_PL.prj","data/geospatial/MP14_SUBZONE_WEB_PL.sbn","data/geospatial/MP14_SUBZONE_WEB_PL.sbx","data/geospatial/MP14_SUBZONE_WEB_PL.shp","data/geospatial/MP14_SUBZONE_WEB_PL.shp.xml","data/geospatial/MP14_SUBZONE_WEB_PL.shx","data/geospatial/MRTLRTStnPtt.CPG","data/geospatial/MRTLRTStnPtt.dbf","data/geospatial/MRTLRTStnPtt.prj","data/geospatial/MRTLRTStnPtt.sbn","data/geospatial/MRTLRTStnPtt.sbx","data/geospatial/MRTLRTStnPtt.shp","data/geospatial/MRTLRTStnPtt.shx","data/OneMap_Data.zip","data/TrainStation.zip","rosm.cache/osm/19_412995_260663.png","rosm.cache/osm/19_412996_260663.png","takehome-ex02_files/anchor-4.2.2/anchor.min.js","takehome-ex02_files/bowser-1.9.3/bowser.min.js","takehome-ex02_files/distill-2.2.21/template.v2.js","takehome-ex02_files/figure-html5/unnamed-chunk-103-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-104-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-105-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-106-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-107-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-108-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-134-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-135-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-136-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-137-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-146-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-147-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-148-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-18-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-23-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-24-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-25-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-26-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-27-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-28-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-29-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-3-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-30-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-34-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-4-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-5-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-56-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-57-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-58-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-59-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-6-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-60-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-61-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-62-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-63-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-64-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-65-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-66-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-7-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-70-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-70-2.png","takehome-ex02_files/figure-html5/unnamed-chunk-71-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-75-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-76-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-79-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-80-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-83-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-84-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-86-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-87-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-88-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-89-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-90-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-91-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-92-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-93-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-94-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-95-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-96-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-97-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-98-1.png","takehome-ex02_files/header-attrs-2.10/header-attrs.js","takehome-ex02_files/htmlwidgets-1.5.3/htmlwidgets.js","takehome-ex02_files/jquery-1.11.3/jquery.min.js","takehome-ex02_files/jquery-1.12.4/jquery.min.js","takehome-ex02_files/leaflet-1.3.1/images/layers-2x.png","takehome-ex02_files/leaflet-1.3.1/images/layers.png","takehome-ex02_files/leaflet-1.3.1/images/marker-icon-2x.png","takehome-ex02_files/leaflet-1.3.1/images/marker-icon.png","takehome-ex02_files/leaflet-1.3.1/images/marker-shadow.png","takehome-ex02_files/leaflet-1.3.1/leaflet.css","takehome-ex02_files/leaflet-1.3.1/leaflet.js","takehome-ex02_files/leaflet-binding-2.0.4.1/leaflet.js","takehome-ex02_files/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js","takehome-ex02_files/leaflet-providers-plugin-2.0.4.1/leaflet-providers-plugin.js","takehome-ex02_files/Leaflet.Sync-0.0.5/bower.json","takehome-ex02_files/Leaflet.Sync-0.0.5/L.Map.Sync.js","takehome-ex02_files/Leaflet.Sync-0.0.5/LICENSE","takehome-ex02_files/leafletfix-1.0.0/leafletfix.css","takehome-ex02_files/popper-2.6.0/popper.min.js","takehome-ex02_files/proj4-2.6.2/proj4.min.js","takehome-ex02_files/Proj4Leaflet-1.0.1/proj4leaflet.js","takehome-ex02_files/rstudio_leaflet-1.3.1/images/1px.png","takehome-ex02_files/rstudio_leaflet-1.3.1/rstudio_leaflet.css","takehome-ex02_files/tippy-6.2.7/tippy-bundle.umd.min.js","takehome-ex02_files/tippy-6.2.7/tippy-light-border.css","takehome-ex02_files/tippy-6.2.7/tippy.css","takehome-ex02_files/tippy-6.2.7/tippy.umd.min.js","takehome-ex02_files/webcomponents-2.0.0/webcomponents.js"]}
=======
  {"type":"character","attributes":{},"value":["data/Airbnb_listing_30062019.zip","data/aspatial/hotels.csv","data/aspatial/listings19072021.csv","data/aspatial/listings30062019.csv","data/aspatial/tourism.csv","data/geospatial/CostalOutline.dbf","data/geospatial/CostalOutline.prj","data/geospatial/CostalOutline.sbn","data/geospatial/CostalOutline.sbx","data/geospatial/CostalOutline.shp","data/geospatial/CostalOutline.shx","data/geospatial/MP14_SUBZONE_WEB_PL.dbf","data/geospatial/MP14_SUBZONE_WEB_PL.prj","data/geospatial/MP14_SUBZONE_WEB_PL.sbn","data/geospatial/MP14_SUBZONE_WEB_PL.sbx","data/geospatial/MP14_SUBZONE_WEB_PL.shp","data/geospatial/MP14_SUBZONE_WEB_PL.shp.xml","data/geospatial/MP14_SUBZONE_WEB_PL.shx","data/geospatial/MRTLRTStnPtt.CPG","data/geospatial/MRTLRTStnPtt.dbf","data/geospatial/MRTLRTStnPtt.prj","data/geospatial/MRTLRTStnPtt.sbn","data/geospatial/MRTLRTStnPtt.sbx","data/geospatial/MRTLRTStnPtt.shp","data/geospatial/MRTLRTStnPtt.shx","data/OneMap_Data.zip","data/TrainStation.zip","takehome-ex02_files/anchor-4.2.2/anchor.min.js","takehome-ex02_files/bowser-1.9.3/bowser.min.js","takehome-ex02_files/distill-2.2.21/template.v2.js","takehome-ex02_files/figure-html5/unnamed-chunk-18-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-23-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-24-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-25-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-26-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-27-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-28-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-29-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-3-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-30-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-34-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-4-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-5-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-56-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-57-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-6-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-60-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-61-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-62-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-63-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-64-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-65-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-66-1.png","takehome-ex02_files/figure-html5/unnamed-chunk-7-1.png","takehome-ex02_files/header-attrs-2.10/header-attrs.js","takehome-ex02_files/jquery-1.11.3/jquery.min.js","takehome-ex02_files/popper-2.6.0/popper.min.js","takehome-ex02_files/tippy-6.2.7/tippy-bundle.umd.min.js","takehome-ex02_files/tippy-6.2.7/tippy-light-border.css","takehome-ex02_files/tippy-6.2.7/tippy.css","takehome-ex02_files/tippy-6.2.7/tippy.umd.min.js","takehome-ex02_files/webcomponents-2.0.0/webcomponents.js"]}
>>>>>>> parent of 950ef92 (takehome2 update)
  </script>
  <!--radix_placeholder_navigation_in_header-->
  <!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

  <style type="text/css">

  body {
    background-color: white;
  }

  .pandoc-table {
    width: 100%;
  }

  .pandoc-table>caption {
    margin-bottom: 10px;
  }

  .pandoc-table th:not([align]) {
    text-align: left;
  }

  .pagedtable-footer {
    font-size: 15px;
  }

  d-byline .byline {
    grid-template-columns: 2fr 2fr;
  }

  d-byline .byline h3 {
    margin-block-start: 1.5em;
  }

  d-byline .byline .authors-affiliations h3 {
    margin-block-start: 0.5em;
  }

  .authors-affiliations .orcid-id {
    width: 16px;
    height:16px;
    margin-left: 4px;
    margin-right: 4px;
    vertical-align: middle;
    padding-bottom: 2px;
  }

  d-title .dt-tags {
    margin-top: 1em;
    grid-column: text;
  }

  .dt-tags .dt-tag {
    text-decoration: none;
    display: inline-block;
    color: rgba(0,0,0,0.6);
    padding: 0em 0.4em;
    margin-right: 0.5em;
    margin-bottom: 0.4em;
    font-size: 70%;
    border: 1px solid rgba(0,0,0,0.2);
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: 500;
  }

  d-article table.gt_table td,
  d-article table.gt_table th {
    border-bottom: none;
  }

  .html-widget {
    margin-bottom: 2.0em;
  }

  .l-screen-inset {
    padding-right: 16px;
  }

  .l-screen .caption {
    margin-left: 10px;
  }

  .shaded {
    background: rgb(247, 247, 247);
    padding-top: 20px;
    padding-bottom: 20px;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }

  .shaded .html-widget {
    margin-bottom: 0;
    border: 1px solid rgba(0, 0, 0, 0.1);
  }

  .shaded .shaded-content {
    background: white;
  }

  .text-output {
    margin-top: 0;
    line-height: 1.5em;
  }

  .hidden {
    display: none !important;
  }

  d-article {
    padding-top: 2.5rem;
    padding-bottom: 30px;
  }

  d-appendix {
    padding-top: 30px;
  }

  d-article>p>img {
    width: 100%;
  }

  d-article h2 {
    margin: 1rem 0 1.5rem 0;
  }

  d-article h3 {
    margin-top: 1.5rem;
  }

  d-article iframe {
    border: 1px solid rgba(0, 0, 0, 0.1);
    margin-bottom: 2.0em;
    width: 100%;
  }

  /* Tweak code blocks */

  d-article div.sourceCode code,
  d-article pre code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  d-article pre,
  d-article div.sourceCode,
  d-article div.sourceCode pre {
    overflow: auto;
  }

  d-article div.sourceCode {
    background-color: white;
  }

  d-article div.sourceCode pre {
    padding-left: 10px;
    font-size: 12px;
    border-left: 2px solid rgba(0,0,0,0.1);
  }

  d-article pre {
    font-size: 12px;
    color: black;
    background: none;
    margin-top: 0;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  d-article pre a {
    border-bottom: none;
  }

  d-article pre a:hover {
    border-bottom: none;
    text-decoration: underline;
  }

  d-article details {
    grid-column: text;
    margin-bottom: 0.8em;
  }

  @media(min-width: 768px) {

  d-article pre,
  d-article div.sourceCode,
  d-article div.sourceCode pre {
    overflow: visible !important;
  }

  d-article div.sourceCode pre {
    padding-left: 18px;
    font-size: 14px;
  }

  d-article pre {
    font-size: 14px;
  }

  }

  figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }

  /* CSS for d-contents */

  .d-contents {
    grid-column: text;
    color: rgba(0,0,0,0.8);
    font-size: 0.9em;
    padding-bottom: 1em;
    margin-bottom: 1em;
    padding-bottom: 0.5em;
    margin-bottom: 1em;
    padding-left: 0.25em;
    justify-self: start;
  }

  @media(min-width: 1000px) {
    .d-contents.d-contents-float {
      height: 0;
      grid-column-start: 1;
      grid-column-end: 4;
      justify-self: center;
      padding-right: 3em;
      padding-left: 2em;
    }
  }

  .d-contents nav h3 {
    font-size: 18px;
    margin-top: 0;
    margin-bottom: 1em;
  }

  .d-contents li {
    list-style-type: none
  }

  .d-contents nav > ul {
    padding-left: 0;
  }

  .d-contents ul {
    padding-left: 1em
  }

  .d-contents nav ul li {
    margin-top: 0.6em;
    margin-bottom: 0.2em;
  }

  .d-contents nav a {
    font-size: 13px;
    border-bottom: none;
    text-decoration: none
    color: rgba(0, 0, 0, 0.8);
  }

  .d-contents nav a:hover {
    text-decoration: underline solid rgba(0, 0, 0, 0.6)
  }

  .d-contents nav > ul > li > a {
    font-weight: 600;
  }

  .d-contents nav > ul > li > ul {
    font-weight: inherit;
  }

  .d-contents nav > ul > li > ul > li {
    margin-top: 0.2em;
  }


  .d-contents nav ul {
    margin-top: 0;
    margin-bottom: 0.25em;
  }

  .d-article-with-toc h2:nth-child(2) {
    margin-top: 0;
  }


  /* Figure */

  .figure {
    position: relative;
    margin-bottom: 2.5em;
    margin-top: 1.5em;
  }

  .figure img {
    width: 100%;
  }

  .figure .caption {
    color: rgba(0, 0, 0, 0.6);
    font-size: 12px;
    line-height: 1.5em;
  }

  .figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }

  .figure .caption a {
    color: rgba(0, 0, 0, 0.6);
  }

  .figure .caption b,
  .figure .caption strong, {
    font-weight: 600;
    color: rgba(0, 0, 0, 1.0);
  }

  /* Citations */

  d-article .citation {
    color: inherit;
    cursor: inherit;
  }

  div.hanging-indent{
    margin-left: 1em; text-indent: -1em;
  }

  /* Citation hover box */

  .tippy-box[data-theme~=light-border] {
    background-color: rgba(250, 250, 250, 0.95);
  }

  .tippy-content > p {
    margin-bottom: 0;
    padding: 2px;
  }


  /* Tweak 1000px media break to show more text */

  @media(min-width: 1000px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 16px;
    }

    .grid {
      grid-column-gap: 16px;
    }

    d-article {
      font-size: 1.06rem;
      line-height: 1.7em;
    }
    figure .caption, .figure .caption, figure figcaption {
      font-size: 13px;
    }
  }

  @media(min-width: 1180px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 32px;
    }

    .grid {
      grid-column-gap: 32px;
    }
  }


  /* Get the citation styles for the appendix (not auto-injected on render since
     we do our own rendering of the citation appendix) */

  d-appendix .citation-appendix,
  .d-appendix .citation-appendix {
    font-size: 11px;
    line-height: 15px;
    border-left: 1px solid rgba(0, 0, 0, 0.1);
    padding-left: 18px;
    border: 1px solid rgba(0,0,0,0.1);
    background: rgba(0, 0, 0, 0.02);
    padding: 10px 18px;
    border-radius: 3px;
    color: rgba(150, 150, 150, 1);
    overflow: hidden;
    margin-top: -12px;
    white-space: pre-wrap;
    word-wrap: break-word;
  }

  /* Include appendix styles here so they can be overridden */

  d-appendix {
    contain: layout style;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-top: 60px;
    margin-bottom: 0;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    color: rgba(0,0,0,0.5);
    padding-top: 60px;
    padding-bottom: 48px;
  }

  d-appendix h3 {
    grid-column: page-start / text-start;
    font-size: 15px;
    font-weight: 500;
    margin-top: 1em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.65);
  }

  d-appendix h3 + * {
    margin-top: 1em;
  }

  d-appendix ol {
    padding: 0 0 0 15px;
  }

  @media (min-width: 768px) {
    d-appendix ol {
      padding: 0 0 0 30px;
      margin-left: -30px;
    }
  }

  d-appendix li {
    margin-bottom: 1em;
  }

  d-appendix a {
    color: rgba(0, 0, 0, 0.6);
  }

  d-appendix > * {
    grid-column: text;
  }

  d-appendix > d-footnote-list,
  d-appendix > d-citation-list,
  d-appendix > distill-appendix {
    grid-column: screen;
  }

  /* Include footnote styles here so they can be overridden */

  d-footnote-list {
    contain: layout style;
  }

  d-footnote-list > * {
    grid-column: text;
  }

  d-footnote-list a.footnote-backlink {
    color: rgba(0,0,0,0.3);
    padding-left: 0.5em;
  }



  /* Anchor.js */

  .anchorjs-link {
    /*transition: all .25s linear; */
    text-decoration: none;
    border-bottom: none;
  }
  *:hover > .anchorjs-link {
    margin-left: -1.125em !important;
    text-decoration: none;
    border-bottom: none;
  }

  /* Social footer */

  .social_footer {
    margin-top: 30px;
    margin-bottom: 0;
    color: rgba(0,0,0,0.67);
  }

  .disqus-comments {
    margin-right: 30px;
  }

  .disqus-comment-count {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
    cursor: pointer;
  }

  #disqus_thread {
    margin-top: 30px;
  }

  .article-sharing a {
    border-bottom: none;
    margin-right: 8px;
  }

  .article-sharing a:hover {
    border-bottom: none;
  }

  .sidebar-section.subscribe {
    font-size: 12px;
    line-height: 1.6em;
  }

  .subscribe p {
    margin-bottom: 0.5em;
  }


  .article-footer .subscribe {
    font-size: 15px;
    margin-top: 45px;
  }


  .sidebar-section.custom {
    font-size: 12px;
    line-height: 1.6em;
  }

  .custom p {
    margin-bottom: 0.5em;
  }

  /* Styles for listing layout (hide title) */
  .layout-listing d-title, .layout-listing .d-title {
    display: none;
  }

  /* Styles for posts lists (not auto-injected) */


  .posts-with-sidebar {
    padding-left: 45px;
    padding-right: 45px;
  }

  .posts-list .description h2,
  .posts-list .description p {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  }

  .posts-list .description h2 {
    font-weight: 700;
    border-bottom: none;
    padding-bottom: 0;
  }

  .posts-list h2.post-tag {
    border-bottom: 1px solid rgba(0, 0, 0, 0.2);
    padding-bottom: 12px;
  }
  .posts-list {
    margin-top: 60px;
    margin-bottom: 24px;
  }

  .posts-list .post-preview {
    text-decoration: none;
    overflow: hidden;
    display: block;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    padding: 24px 0;
  }

  .post-preview-last {
    border-bottom: none !important;
  }

  .posts-list .posts-list-caption {
    grid-column: screen;
    font-weight: 400;
  }

  .posts-list .post-preview h2 {
    margin: 0 0 6px 0;
    line-height: 1.2em;
    font-style: normal;
    font-size: 24px;
  }

  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.4em;
    font-size: 16px;
  }

  .posts-list .post-preview .thumbnail {
    box-sizing: border-box;
    margin-bottom: 24px;
    position: relative;
    max-width: 500px;
  }
  .posts-list .post-preview img {
    width: 100%;
    display: block;
  }

  .posts-list .metadata {
    font-size: 12px;
    line-height: 1.4em;
    margin-bottom: 18px;
  }

  .posts-list .metadata > * {
    display: inline-block;
  }

  .posts-list .metadata .publishedDate {
    margin-right: 2em;
  }

  .posts-list .metadata .dt-authors {
    display: block;
    margin-top: 0.3em;
    margin-right: 2em;
  }

  .posts-list .dt-tags {
    display: block;
    line-height: 1em;
  }

  .posts-list .dt-tags .dt-tag {
    display: inline-block;
    color: rgba(0,0,0,0.6);
    padding: 0.3em 0.4em;
    margin-right: 0.2em;
    margin-bottom: 0.4em;
    font-size: 60%;
    border: 1px solid rgba(0,0,0,0.2);
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: 500;
  }

  .posts-list img {
    opacity: 1;
  }

  .posts-list img[data-src] {
    opacity: 0;
  }

  .posts-more {
    clear: both;
  }


  .posts-sidebar {
    font-size: 16px;
  }

  .posts-sidebar h3 {
    font-size: 16px;
    margin-top: 0;
    margin-bottom: 0.5em;
    font-weight: 400;
    text-transform: uppercase;
  }

  .sidebar-section {
    margin-bottom: 30px;
  }

  .categories ul {
    list-style-type: none;
    margin: 0;
    padding: 0;
  }

  .categories li {
    color: rgba(0, 0, 0, 0.8);
    margin-bottom: 0;
  }

  .categories li>a {
    border-bottom: none;
  }

  .categories li>a:hover {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  }

  .categories .active {
    font-weight: 600;
  }

  .categories .category-count {
    color: rgba(0, 0, 0, 0.4);
  }


  @media(min-width: 768px) {
    .posts-list .post-preview h2 {
      font-size: 26px;
    }
    .posts-list .post-preview .thumbnail {
      float: right;
      width: 30%;
      margin-bottom: 0;
    }
    .posts-list .post-preview .description {
      float: left;
      width: 45%;
    }
    .posts-list .post-preview .metadata {
      float: left;
      width: 20%;
      margin-top: 8px;
    }
    .posts-list .post-preview p {
      margin: 0 0 12px 0;
      line-height: 1.5em;
      font-size: 16px;
    }
    .posts-with-sidebar .posts-list {
      float: left;
      width: 75%;
    }
    .posts-with-sidebar .posts-sidebar {
      float: right;
      width: 20%;
      margin-top: 60px;
      padding-top: 24px;
      padding-bottom: 24px;
    }
  }


  /* Improve display for browsers without grid (IE/Edge <= 15) */

  .downlevel {
    line-height: 1.6em;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
    margin: 0;
  }

  .downlevel .d-title {
    padding-top: 6rem;
    padding-bottom: 1.5rem;
  }

  .downlevel .d-title h1 {
    font-size: 50px;
    font-weight: 700;
    line-height: 1.1em;
    margin: 0 0 0.5rem;
  }

  .downlevel .d-title p {
    font-weight: 300;
    font-size: 1.2rem;
    line-height: 1.55em;
    margin-top: 0;
  }

  .downlevel .d-byline {
    padding-top: 0.8em;
    padding-bottom: 0.8em;
    font-size: 0.8rem;
    line-height: 1.8em;
  }

  .downlevel .section-separator {
    border: none;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
  }

  .downlevel .d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
    padding-top: 1rem;
    padding-bottom: 2rem;
  }


  .downlevel .d-appendix {
    padding-left: 0;
    padding-right: 0;
    max-width: none;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.5);
    padding-top: 40px;
    padding-bottom: 48px;
  }

  .downlevel .footnotes ol {
    padding-left: 13px;
  }

  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
    padding-left: 40px;
    padding-right: 40px;
  }

  @media(min-width: 768px) {
    .downlevel .base-grid,
    .downlevel .distill-header,
    .downlevel .d-title,
    .downlevel .d-abstract,
    .downlevel .d-article,
    .downlevel .d-appendix,
    .downlevel .distill-appendix,
    .downlevel .d-byline,
    .downlevel .d-footnote-list,
    .downlevel .d-citation-list,
    .downlevel .distill-footer,
    .downlevel .appendix-bottom,
    .downlevel .posts-container {
    padding-left: 150px;
    padding-right: 150px;
    max-width: 900px;
  }
  }

  .downlevel pre code {
    display: block;
    border-left: 2px solid rgba(0, 0, 0, .1);
    padding: 0 0 0 20px;
    font-size: 14px;
  }

  .downlevel code, .downlevel pre {
    color: black;
    background: none;
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  .downlevel .posts-list .post-preview {
    color: inherit;
  }



  </style>

  <script type="application/javascript">

  function is_downlevel_browser() {
    if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                   window.navigator.userAgent)) {
      return true;
    } else {
      return window.load_distill_framework === undefined;
    }
  }

  // show body when load is complete
  function on_load_complete() {

    // add anchors
    if (window.anchors) {
      window.anchors.options.placement = 'left';
      window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
    }


    // set body to visible
    document.body.style.visibility = 'visible';

    // force redraw for leaflet widgets
    if (window.HTMLWidgets) {
      var maps = window.HTMLWidgets.findAll(".leaflet");
      $.each(maps, function(i, el) {
        var map = this.getMap();
        map.invalidateSize();
        map.eachLayer(function(layer) {
          if (layer instanceof L.TileLayer)
            layer.redraw();
        });
      });
    }

    // trigger 'shown' so htmlwidgets resize
    $('d-article').trigger('shown');
  }

  function init_distill() {

    init_common();

    // create front matter
    var front_matter = $('<d-front-matter></d-front-matter>');
    $('#distill-front-matter').wrap(front_matter);

    // create d-title
    $('.d-title').changeElementType('d-title');

    // create d-byline
    var byline = $('<d-byline></d-byline>');
    $('.d-byline').replaceWith(byline);

    // create d-article
    var article = $('<d-article></d-article>');
    $('.d-article').wrap(article).children().unwrap();

    // move posts container into article
    $('.posts-container').appendTo($('d-article'));

    // create d-appendix
    $('.d-appendix').changeElementType('d-appendix');

    // flag indicating that we have appendix items
    var appendix = $('.appendix-bottom').children('h3').length > 0;

    // replace footnotes with <d-footnote>
    $('.footnote-ref').each(function(i, val) {
      appendix = true;
      var href = $(this).attr('href');
      var id = href.replace('#', '');
      var fn = $('#' + id);
      var fn_p = $('#' + id + '>p');
      fn_p.find('.footnote-back').remove();
      var text = fn_p.html();
      var dtfn = $('<d-footnote></d-footnote>');
      dtfn.html(text);
      $(this).replaceWith(dtfn);
    });
    // remove footnotes
    $('.footnotes').remove();

    // move refs into #references-listing
    $('#references-listing').replaceWith($('#refs'));

    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      var id = $(this).attr('id');
      $('.d-contents a[href="#' + id + '"]').parent().remove();
      appendix = true;
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
    });

    // show d-appendix if we have appendix content
    $("d-appendix").css('display', appendix ? 'grid' : 'none');

    // localize layout chunks to just output
    $('.layout-chunk').each(function(i, val) {

      // capture layout
      var layout = $(this).attr('data-layout');

      // apply layout to markdown level block elements
      var elements = $(this).children().not('details, div.sourceCode, pre, script');
      elements.each(function(i, el) {
        var layout_div = $('<div class="' + layout + '"></div>');
        if (layout_div.hasClass('shaded')) {
          var shaded_content = $('<div class="shaded-content"></div>');
          $(this).wrap(shaded_content);
          $(this).parent().wrap(layout_div);
        } else {
          $(this).wrap(layout_div);
        }
      });


      // unwrap the layout-chunk div
      $(this).children().unwrap();
    });

    // remove code block used to force  highlighting css
    $('.distill-force-highlighting-css').parent().remove();

    // remove empty line numbers inserted by pandoc when using a
    // custom syntax highlighting theme
    $('code.sourceCode a:empty').remove();

    // load distill framework
    load_distill_framework();

    // wait for window.distillRunlevel == 4 to do post processing
    function distill_post_process() {

      if (!window.distillRunlevel || window.distillRunlevel < 4)
        return;

      // hide author/affiliations entirely if we have no authors
      var front_matter = JSON.parse($("#distill-front-matter").html());
      var have_authors = front_matter.authors && front_matter.authors.length > 0;
      if (!have_authors)
        $('d-byline').addClass('hidden');

      // article with toc class
      $('.d-contents').parent().addClass('d-article-with-toc');

      // strip links that point to #
      $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

      // add orcid ids
      $('.authors-affiliations').find('.author').each(function(i, el) {
        var orcid_id = front_matter.authors[i].orcidID;
        if (orcid_id) {
          var a = $('<a></a>');
          a.attr('href', 'https://orcid.org/' + orcid_id);
          var img = $('<img></img>');
          img.addClass('orcid-id');
          img.attr('alt', 'ORCID ID');
          img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
          a.append(img);
          $(this).append(a);
        }
      });

      // hide elements of author/affiliations grid that have no value
      function hide_byline_column(caption) {
        $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
      }

      // affiliations
      var have_affiliations = false;
      for (var i = 0; i<front_matter.authors.length; ++i) {
        var author = front_matter.authors[i];
        if (author.affiliation !== "&nbsp;") {
          have_affiliations = true;
          break;
        }
      }
      if (!have_affiliations)
        $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

      // published date
      if (!front_matter.publishedDate)
        hide_byline_column("Published");

      // document object identifier
      var doi = $('d-byline').find('h3:contains("DOI")');
      var doi_p = doi.next().empty();
      if (!front_matter.doi) {
        // if we have a citation and valid citationText then link to that
        if ($('#citation').length > 0 && front_matter.citationText) {
          doi.html('Citation');
          $('<a href="#citation"></a>')
            .text(front_matter.citationText)
            .appendTo(doi_p);
        } else {
          hide_byline_column("DOI");
        }
      } else {
        $('<a></a>')
           .attr('href', "https://doi.org/" + front_matter.doi)
           .html(front_matter.doi)
           .appendTo(doi_p);
      }

       // change plural form of authors/affiliations
      if (front_matter.authors.length === 1) {
        var grid = $('.authors-affiliations');
        grid.children('h3:contains("Authors")').text('Author');
        grid.children('h3:contains("Affiliations")').text('Affiliation');
      }

      // remove d-appendix and d-footnote-list local styles
      $('d-appendix > style:first-child').remove();
      $('d-footnote-list > style:first-child').remove();

      // move appendix-bottom entries to the bottom
      $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
      $('.appendix-bottom').remove();

      // hoverable references
      $('span.citation[data-cites]').each(function() {
        var refHtml = $('#ref-' + $(this).attr('data-cites')).html();
        window.tippy(this, {
          allowHTML: true,
          content: refHtml,
          maxWidth: 500,
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        });
      });

      // clear polling timer
      clearInterval(tid);

      // show body now that everything is ready
      on_load_complete();
    }

    var tid = setInterval(distill_post_process, 50);
    distill_post_process();

  }

  function init_downlevel() {

    init_common();

     // insert hr after d-title
    $('.d-title').after($('<hr class="section-separator"/>'));

    // check if we have authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;

    // manage byline/border
    if (!have_authors)
      $('.d-byline').remove();
    $('.d-byline').after($('<hr class="section-separator"/>'));
    $('.d-byline a').remove();

    // remove toc
    $('.d-contents').remove();

    // move appendix elements
    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
    });


    // inject headers into references and footnotes
    var refs_header = $('<h3></h3>');
    refs_header.text('References');
    $('#refs').prepend(refs_header);

    var footnotes_header = $('<h3></h3');
    footnotes_header.text('Footnotes');
    $('.footnotes').children('hr').first().replaceWith(footnotes_header);

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // remove appendix if it's empty
    if ($('.d-appendix').children().length === 0)
      $('.d-appendix').remove();

    // prepend separator above appendix
    $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

    // trim code
    $('pre>code').each(function(i, val) {
      $(this).html($.trim($(this).html()));
    });

    // move posts-container right before article
    $('.posts-container').insertBefore($('.d-article'));

    $('body').addClass('downlevel');

    on_load_complete();
  }


  function init_common() {

    // jquery plugin to change element types
    (function($) {
      $.fn.changeElementType = function(newType) {
        var attrs = {};

        $.each(this[0].attributes, function(idx, attr) {
          attrs[attr.nodeName] = attr.nodeValue;
        });

        this.replaceWith(function() {
          return $("<" + newType + "/>", attrs).append($(this).contents());
        });
      };
    })(jQuery);

    // prevent underline for linked images
    $('a > img').parent().css({'border-bottom' : 'none'});

    // mark non-body figures created by knitr chunks as 100% width
    $('.layout-chunk').each(function(i, val) {
      var figures = $(this).find('img, .html-widget');
      if ($(this).attr('data-layout') !== "l-body") {
        figures.css('width', '100%');
      } else {
        figures.css('max-width', '100%');
        figures.filter("[width]").each(function(i, val) {
          var fig = $(this);
          fig.css('width', fig.attr('width') + 'px');
        });

      }
    });

    // auto-append index.html to post-preview links in file: protocol
    // and in rstudio ide preview
    $('.post-preview').each(function(i, val) {
      if (window.location.protocol === "file:")
        $(this).attr('href', $(this).attr('href') + "index.html");
    });

    // get rid of index.html references in header
    if (window.location.protocol !== "file:") {
      $('.distill-site-header a[href]').each(function(i,val) {
        $(this).attr('href', $(this).attr('href').replace("index.html", "./"));
      });
    }

    // add class to pandoc style tables
    $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
    $('.kable-table').children('table').addClass('pandoc-table');

    // add figcaption style to table captions
    $('caption').parent('table').addClass("figcaption");

    // initialize posts list
    if (window.init_posts_list)
      window.init_posts_list();

    // implmement disqus comment link
    $('.disqus-comment-count').click(function() {
      window.headroom_prevent_pin = true;
      $('#disqus_thread').toggleClass('hidden');
      if (!$('#disqus_thread').hasClass('hidden')) {
        var offset = $(this).offset();
        $(window).resize();
        $('html, body').animate({
          scrollTop: offset.top - 35
        });
      }
    });
  }

  document.addEventListener('DOMContentLoaded', function() {
    if (is_downlevel_browser())
      init_downlevel();
    else
      window.addEventListener('WebComponentsReady', init_distill);
  });

  </script>

  <!--/radix_placeholder_distill-->
  <script src="takehome-ex02_files/header-attrs-2.10/header-attrs.js"></script>
  <script src="takehome-ex02_files/jquery-1.11.3/jquery.min.js"></script>
  <script src="takehome-ex02_files/popper-2.6.0/popper.min.js"></script>
  <link href="takehome-ex02_files/tippy-6.2.7/tippy.css" rel="stylesheet" />
  <link href="takehome-ex02_files/tippy-6.2.7/tippy-light-border.css" rel="stylesheet" />
  <script src="takehome-ex02_files/tippy-6.2.7/tippy.umd.min.js"></script>
  <script src="takehome-ex02_files/anchor-4.2.2/anchor.min.js"></script>
  <script src="takehome-ex02_files/bowser-1.9.3/bowser.min.js"></script>
  <script src="takehome-ex02_files/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="takehome-ex02_files/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
  <!--/radix_placeholder_site_in_header-->


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"Take Home Exercise 02","description":"Analysing and Visualising the distribution of Airbnb listings in 2019 and 2021, and how Covid-19 affected the distribution.","authors":[{"author":"Kwek Yi Chen","authorURL":"https://example.com/kwekyichen","affiliation":"&nbsp;","affiliationURL":"#","orcidID":""}],"publishedDate":"2021-09-16T00:00:00.000+08:00","citationText":"Chen, 2021"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>Take Home Exercise 02</h1>
<!--radix_placeholder_categories-->
<!--/radix_placeholder_categories-->
<p><p>Analysing and Visualising the distribution of Airbnb listings in 2019 and 2021, and how Covid-19 affected the distribution.</p></p>
</div>

<div class="d-byline">
  Kwek Yi Chen <a href="https://example.com/kwekyichen" class="uri">https://example.com/kwekyichen</a> 
  
<br/>09-16-2021
</div>

<div class="d-article">
<div class="d-contents d-contents-float">
<nav class="l-text toc figcaption" id="TOC">
<h3>Contents</h3>
<ul>
<li><a href="#introduction">1 Introduction</a></li>
<li><a href="#data">2 Data</a></li>
<li><a href="#setting-up-the-environment">3 Setting Up the Environment</a></li>
<li><a href="#spatial-data-wrangling">4 Spatial Data Wrangling</a>
<ul>
<li><a href="#importing-geospatial-data">4.1 Importing Geospatial Data</a>
<ul>
<li><a href="#mrtlrt">4.1.1 MrtLrt</a></li>
<li><a href="#costaloutline">4.1.2 CostalOutline</a></li>
<li><a href="#mpsz">4.1.3 MPSZ</a></li>
</ul></li>
<li><a href="#importing-aspatial-data">4.2 Importing Aspatial Data</a>
<ul>
<li><a href="#hotel">4.2.1 Hotel</a></li>
<li><a href="#tourism">4.2.2 Tourism</a></li>
<li><a href="#airbnb0619">4.2.3 Airbnb0619</a></li>
<li><a href="#airbnb0721">4.2.4 Airbnb0721</a></li>
</ul></li>
<li><a href="#geospatial-data-wrangling">4.3 Geospatial Data wrangling</a>
<ul>
<li><a href="#converting-sf-data-frames-to-sps-spatial-class">4.3.1 Converting sf data frames to sp’s Spatial* class</a></li>
<li><a href="#converting-the-spatial-class-into-generic-sp-format">4.3.2 Converting the Spatial* class into generic sp format</a></li>
<li><a href="#converting-the-generic-sp-format-into-spatstats-ppp-format">4.3.3 Converting the generic sp format into spatstat’s ppp format</a></li>
<li><a href="#check-for-duplicates-in-ppp-object">4.3.4 Check for duplicates in ppp object</a></li>
<li><a href="#creating-owin-objects">4.3.5 creating owin objects</a></li>
<li><a href="#combining-point-events-object-and-owin-object">4.3.6 Combining point events object and owin object</a></li>
</ul></li>
</ul></li>
<li><a href="#section-a-airbnb-distribution-in-2019">Section A: Airbnb Distribution in 2019</a>
<ul>
<li><a href="#exploratory-spatial-data-analysis">1. Exploratory Spatial Data Analysis</a>
<ul>
<<<<<<< HEAD
<li><a href="#kernel-density-maps">5.1.1 Kernel density maps</a></li>
=======
<li><a href="#kernel-density-maps">Kernel density maps</a></li>
<li><a href="#kernel-density-maps-on-openstreetmap-of-singapore">Kernel density maps on openstreetmap of Singapore</a></li>
>>>>>>> parent of 950ef92 (takehome2 update)
</ul></li>
<li><a href="#second-order-spatial-point-patterns-analysis">2. Second-order Spatial Point Patterns Analysis</a>
<ul>
<<<<<<< HEAD
<li><a href="#nearest-neighbour-analysis">5.2.1 Nearest Neighbour Analysis</a></li>
<li><a href="#g-function">G-FUNCTION</a></li>
<li><a href="#f-function">F-FUNCTION</a></li>
<li><a href="#k-function">K-FUNCTION</a></li>
<li><a href="#l-function">L-FUNCTION</a></li>
=======
<li><a href="#null-hypothesis-and-alternative-hypothesis">Null hypothesis and alternative hypothesis</a></li>
<li><a href="#test">Test</a></li>
<li><a href="#statistical-conclusions.">Statistical conclusions.</a></li>
>>>>>>> parent of 950ef92 (takehome2 update)
</ul></li>
</ul></li>
<li><a href="#section-b-impact-of-covid-19">Section B: Impact of COVID-19</a>
<ul>
<<<<<<< HEAD
<li><a href="#exploratory-spatial-data-analysis-1">6.1 Exploratory Spatial Data Analysis</a>
<ul>
<li><a href="#kernel-density-maps-1">6.1.1 Kernel density maps</a></li>
</ul></li>
<li><a href="#second-order-spatial-point-patterns-analysis-1">6.2 Second-order Spatial Point Patterns Analysis</a>
<ul>
<li><a href="#nearest-neighbour-analysis-continue-from-here">6.2.1 Nearest Neighbour Analysis (CONTINUE FROM HERE)</a></li>
<li><a href="#g-function-1">G-FUNCTION</a></li>
<li><a href="#f-function-1">F-FUNCTION</a></li>
<li><a href="#k-function-1">K-FUNCTION</a></li>
<li><a href="#l-function-1">L-FUNCTION</a></li>
</ul></li>
=======
<li><a href="#exploratory-spatial-data-analysis-1">3. Exploratory Spatial Data Analysis</a></li>
<li><a href="#second-order-spatial-point-patterns-analysis-1">4. Second-order Spatial Point Patterns Analysis</a></li>
>>>>>>> parent of 950ef92 (takehome2 update)
</ul></li>
</ul>
</nav>
</div>
<h1 id="introduction">1 Introduction</h1>
<p>In recent years, the emergence of numerous peer-based business models has empowered individuals across the globe to become micro-entrepreneurs, earning money from their idle property and spare time. This phenomenon, entitled ‘the sharing economy’, has seen unprecedented growth in terms of user numbers, enabling new avenues of economic and social interaction (Sundararajan, 2016).</p>
<p>Since its inception in 2008, Airbnb has expanded into over 34,000 cities across 191 countries. Uncommonly for a sharing economy company, Airbnb transitioned into profitability in 2016, demonstrating proof-of-concept for the validity of sharing economy within the global market (Stone &amp; Zaleski, 2017).</p>
<p>Interestingly, Singapore is one of the global city that has yet to legalise short-term rentals offered by platforms such as Airbnb (Read more at <a href="https://www.todayonline.com/singapore/short-term-home-sharing-remains-illegal-singapore-airbnb-disappointed" class="uri">https://www.todayonline.com/singapore/short-term-home-sharing-remains-illegal-singapore-airbnb-disappointed</a>). However, during my recent visit to Inside Airbnb (<a href="http://insideairbnb.com/about.html" class="uri">http://insideairbnb.com/about.html</a>), an independent, non-commercial set of tools and data that allows anyone to explore how Airbnb is really being used in cities around the world, it came to my attention that there are data sets for Singapore.</p>
<p>This analysis consist of two sections: 1) Airbnb Distribution in 2019 2) Impact of COVID-19</p>
<h1 id="data">2 Data</h1>
<ul>
<li>Airbnb Listings (June 2019 &amp; July 2021) is the Airbnb Listing in Singapore for the year 2019 and 2021. It is in csv format, and can be taken from <a href="http://insideairbnb.com/get-the-data.html" class="uri">http://insideairbnb.com/get-the-data.html</a></li>
<li>Hotels data is the list of hotels in Singapore. It is in csv format, and can be extracted from SLA OneMap Service using onemapsapi.</li>
<li>Tourist Attractions data is the list of tourist attractions in Singapore. It is in csv format, and can be extracted from SLA OneMap Service using onemapsapi.</li>
<li>MrtLrtStnPtt contains all the Mrt and Lrt stations in Singapore. It is in ESRI shapefile format, and can be taken from <a href="https://datamall.lta.gov.sg/" class="uri">https://datamall.lta.gov.sg/</a></li>
<li>MP14_SUBZONE_WEB_PL is URA 2014 Master Plan Planning Subzone boundary data. It is in ESRI shapefile format, and can be taken from <a href="https://www.data.gov.sg/" class="uri">https://www.data.gov.sg/</a>.</li>
<li>CostalOutline is the national boundary of Singapore. It is in ESRI shapefile format, and can taken from SLA website.</li>
</ul>
<h1 id="setting-up-the-environment">3 Setting Up the Environment</h1>
<p>The following code chunk install the following packages:</p>
<ul>
<li>maptools to convert Spatial objects into ppp format</li>
<li>sf to handle geospatial data</li>
<li>raster to convert image output generate by spatstat into raster format.</li>
<li>spatstat to perform 1st and 2nd-order spatial point patterns analysis and derive kernel density estimation (KDE) layer</li>
<li>tmap to create choropleth maps</li>
<li>tidyr to tidy messy data</li>
<li>readr to import csv</li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>packages</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>'maptools'</span>, <span class='st'>'sf'</span>, <span class='st'>'raster'</span>,<span class='st'>'spatstat'</span>, <span class='st'>'tmap'</span>, <span class='st'>'tidyr'</span>, <span class='st'>'readr'</span><span class='op'>)</span>
<span class='kw'>for</span> <span class='op'>(</span><span class='va'>p</span> <span class='kw'>in</span> <span class='va'>packages</span><span class='op'>)</span><span class='op'>{</span>
  <span class='kw'>if</span><span class='op'>(</span><span class='op'>!</span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>require</a></span><span class='op'>(</span><span class='va'>p</span>, character.only <span class='op'>=</span> <span class='cn'>T</span><span class='op'>)</span><span class='op'>)</span><span class='op'>{</span>
    <span class='fu'><a href='https://rdrr.io/r/utils/install.packages.html'>install.packages</a></span><span class='op'>(</span><span class='va'>p</span><span class='op'>)</span>
  <span class='op'>}</span>
  <span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'>p</span>,character.only <span class='op'>=</span> <span class='cn'>T</span><span class='op'>)</span>
<span class='op'>}</span>
</code></pre>
</div>
</details>
</div>
<h1 id="spatial-data-wrangling">4 Spatial Data Wrangling</h1>
<h2 id="importing-geospatial-data">4.1 Importing Geospatial Data</h2>
<h3 id="mrtlrt">4.1.1 MrtLrt</h3>
<h4 id="importing">4.1.1.1 Importing</h4>
<p>The following code uses st_read function of sf package to import MrtLrt geospatial data sets.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>mrtlrt_sf</span> <span class='op'>&lt;-</span> <span class='fu'>st_read</span><span class='op'>(</span>dsn <span class='op'>=</span> <span class='st'>"data/geospatial"</span>, layer<span class='op'>=</span><span class='st'>"MRTLRTStnPtt"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>The MrtLrt data have 185 features with 3 fields. The projected CRS is SVY21. The geometry type is in point.</p>
<h4 id="check-crs">4.1.1.2 Check CRS</h4>
<p>Next, we use st_crs function of sf to check the CRS.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>st_crs</span><span class='op'>(</span><span class='va'>mrtlrt_sf</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>From the result above, even though the mrtlrt_sf is projected in svy21, the last line indicates that the EPSG is 9001. It is wrong because the correct EPSG code for svy21 should be 3414.</p>
<h4 id="assign-epsg-code-to-a-simple-feature-data-frame">4.1.1.3 Assign EPSG code to a simple feature data frame</h4>
<p>The following code chunk will assign the correct EPSG code to mrtlrt_sf using st_set_crs function of sf package</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>mrtlrt_sf</span> <span class='op'>&lt;-</span> <span class='fu'>st_set_crs</span><span class='op'>(</span><span class='va'>mrtlrt_sf</span>, <span class='fl'>3414</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>Now that we have assign the correct EPSG code to mrtlrt_sf, we will check the CRS again using st_crs function of sf</p>
<h4 id="check-crs-again">4.1.1.4 Check CRS again</h4>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>st_crs</span><span class='op'>(</span><span class='va'>mrtlrt_sf</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>From the result above, we have successfully assign EPSG 3414 to mrtlrt_sf.</p>
<h3 id="costaloutline">4.1.2 CostalOutline</h3>
<h4 id="importing-1">4.1.2.1 Importing</h4>
<p>The following code uses st_read function of sf package to import CostalOutline geospatial data sets.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>sg_sf</span> <span class='op'>&lt;-</span> <span class='fu'>st_read</span><span class='op'>(</span>dsn <span class='op'>=</span> <span class='st'>"data/geospatial"</span>, layer<span class='op'>=</span><span class='st'>"CostalOutline"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>The CostalOutline data have 60 features with 4 fields. The projected CRS is SVY21. The geometry type is polygon.</p>
<h4 id="check-crs-1">4.1.2.2 Check CRS</h4>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>st_crs</span><span class='op'>(</span><span class='va'>sg_sf</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>Similarly, even though the sg_sf is projected in svy21, the last line indicates that the EPSG is 9001. It is wrong because the correct EPSG code for svy21 should be 3414.</p>
<h4 id="assign-epsg-code-to-a-simple-feature-data-frame-1">4.1.2.3 Assign EPSG code to a simple feature data frame</h4>
<p>The following code chunk will assign the correct EPSG code to sg_sf using st_set_crs function of sf package</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>sg_sf</span> <span class='op'>&lt;-</span> <span class='fu'>st_set_crs</span><span class='op'>(</span><span class='va'>sg_sf</span>, <span class='fl'>3414</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>Now that we have assign the correct EPSG code to sg_sf, we will check the CRS again using st_crs function of sf</p>
<h4 id="check-crs-again-1">4.1.2.4 Check CRS again</h4>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>st_crs</span><span class='op'>(</span><span class='va'>sg_sf</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>We have successfully set the EPSG to 3414 for sg_sf.</p>
<h3 id="mpsz">4.1.3 MPSZ</h3>
<h4 id="importing-2">4.1.3.1 Importing</h4>
<p>The following code uses st_read function of sf package to import MP14_SUBZONE_WEB_PL geospatial data sets.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>mpsz_sf</span> <span class='op'>&lt;-</span> <span class='fu'>st_read</span><span class='op'>(</span>dsn <span class='op'>=</span> <span class='st'>"data/geospatial"</span>, layer <span class='op'>=</span> <span class='st'>"MP14_SUBZONE_WEB_PL"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>The mpsz data have 323 features with 15 fields. The projected CRS is SVY21. The geometry type is multipolygon.</p>
<h4 id="check-crs-2">4.1.3.2 Check CRS</h4>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>st_crs</span><span class='op'>(</span><span class='va'>mpsz_sf</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>Similarly, even though the mpsz_sf is projected in svy21, the last line indicates that the EPSG is 9001. It is wrong because the correct EPSG code for svy21 should be 3414.</p>
<h4 id="assign-epsg-code-to-a-simple-feature-data-frame-2">4.1.3.3 Assign EPSG code to a simple feature data frame</h4>
<p>The following code chunk will assign the correct EPSG code to mpsz_sf using st_set_crs function of sf package</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>mpsz_sf</span> <span class='op'>&lt;-</span> <span class='fu'>st_set_crs</span><span class='op'>(</span><span class='va'>mpsz_sf</span>, <span class='fl'>3414</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>Now that we have assign the correct EPSG code to mpsz_sf, we will check the CRS again using st_crs function of sf</p>
<h4 id="check-crs-again-2">4.1.3.4 Check CRS again</h4>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>st_crs</span><span class='op'>(</span><span class='va'>mpsz_sf</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>We have successfully assign ESPG 3414 to mpsz_sf.</p>
<h2 id="importing-aspatial-data">4.2 Importing Aspatial Data</h2>
<h3 id="hotel">4.2.1 Hotel</h3>
<h4 id="importing-3">4.2.1.1 Importing</h4>
<p>The following code uses read_csv function of readr package to import Hotel aspatial data sets.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>hotels</span> <span class='op'>&lt;-</span> <span class='fu'>read_csv</span><span class='op'>(</span><span class='st'>"data/aspatial/hotels.csv"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<h4 id="examine-the-file">4.2.1.2 Examine the file</h4>
<p>The following code uses list function of base R to examine the imported file</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='va'>hotels</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>The data contains 422 rows and 9 columns. There are ‘Lat’ and ‘Lng’ column for coordinates. They are in decimal degree format, hence we will assume the data is wgs84.</p>
<p>We will next check if there are any NA value in ‘Lat’ and ‘Lng’ using is.na function of base R package.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>hotels</span><span class='op'>$</span><span class='va'>Lat</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>hotels</span><span class='op'>$</span><span class='va'>Lng</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>We can confirmed that there are no NA values and we can proceed to create a simple feature data frame.</p>
<h4 id="create-simple-feature-data-frame-from-aspatial-data">4.2.1.3 Create simple feature data frame from aspatial data</h4>
<p>The following code 1. convert hotels data into simple feature data frame using st_as_sf feature of sf package. 2. ‘Lng’ and ‘Lat’ column are set as the coords arguments. 3. CRS were set as 4326 since we assumed that the data is wgs84 4. st_transform function of sf package then helps to transform the newly created simple feature data frame into svy21 5. tm_shape and tm_dots function of tmap plots the transformed hotels_sf</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>hotels_sf</span> <span class='op'>&lt;-</span> <span class='fu'>st_as_sf</span><span class='op'>(</span><span class='va'>hotels</span>,
                    coords <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Lng"</span>, 
                               <span class='st'>"Lat"</span><span class='op'>)</span>,
                    crs<span class='op'>=</span><span class='fl'>4326</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>st_transform</span><span class='op'>(</span>crs <span class='op'>=</span> <span class='fl'>3414</span><span class='op'>)</span>

<span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>hotels_sf</span><span class='op'>)</span><span class='op'>+</span>
  <span class='fu'>tm_dots</span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<h3 id="tourism">4.2.2 Tourism</h3>
<h4 id="importing-4">4.2.2.1 Importing</h4>
<p>The following code uses read_csv function of readr package to import Tourism aspatial data sets.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>tourism</span> <span class='op'>&lt;-</span> <span class='fu'>read_csv</span><span class='op'>(</span><span class='st'>"data/aspatial/tourism.csv"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<h4 id="examine-the-file-1">4.2.2.2 Examine the file</h4>
<p>The following code uses list function of base R to examine the imported file</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='va'>tourism</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>The tourism data contains 107 rows and 17 columns. There are ‘LATITUDE’ and ‘LONGTITUDE’ column, as well as ‘Lat’ and ‘Lng’ coluumn for coordinates. We will be using ‘LATITUDE’ and ‘LONGTITUDE’ column since they are the same. They are in decimal degree format, hence we will assume the data is wgs84.</p>
<p>We will next check if there are any NA value in ‘LATITUDE’ and ‘LONGTITUDE’ using is.na function of base R package.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>tourism</span><span class='op'>$</span><span class='va'>LATITUDE</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>tourism</span><span class='op'>$</span><span class='va'>LATITUDE</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>There are NA values and we will need to drop them before creating a simple feature data frame.</p>
<p>The following code chunk drop rows of data as long as the LATITUDE is NA.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>tourism</span> <span class='op'>&lt;-</span> <span class='va'>tourism</span> <span class='op'>%&gt;%</span>
            <span class='fu'>drop_na</span><span class='op'>(</span><span class='st'>"LATITUDE"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<h4 id="create-simple-feature-data-frame-from-aspatial-data-1">4.2.2.3 Create simple feature data frame from aspatial data</h4>
<p>The following code 1. convert tourism data into simple feature data frame using st_as_sf feature of sf package. 2. ‘LONGTITUDE’ and ‘LATITUDE’ column are set as the coords arguments. 3. CRS were set as 4326 since we assumed that the data is wgs84 4. st_transform function of sf package then helps to transform the newly created simple feature data frame into svy21 5. tm_shape and tm_dots function of tmap plots the transformed tourism_sf</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>tourism_sf</span> <span class='op'>&lt;-</span> <span class='fu'>st_as_sf</span><span class='op'>(</span><span class='va'>tourism</span>,
                    coords <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"LONGTITUDE"</span>, 
                               <span class='st'>"LATITUDE"</span><span class='op'>)</span>,
                    crs<span class='op'>=</span><span class='fl'>4326</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>st_transform</span><span class='op'>(</span>crs <span class='op'>=</span> <span class='fl'>3414</span><span class='op'>)</span>

<span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>tourism_sf</span><span class='op'>)</span><span class='op'>+</span>
  <span class='fu'>tm_dots</span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<h3 id="airbnb0619">4.2.3 Airbnb0619</h3>
<h4 id="importing-5">4.2.3.1 Importing</h4>
<p>The following code uses read_csv function of readr package to import Airbnb listings30062019.csv aspatial data sets.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>airbnb0619</span> <span class='op'>&lt;-</span> <span class='fu'>read_csv</span><span class='op'>(</span><span class='st'>"data/aspatial/listings30062019.csv"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<h4 id="examine-the-file-2">4.2.3.2 Examine the file</h4>
<p>The following code uses list function of base R to examine the imported file</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='va'>airbnb0619</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>The airbnb0619 data contains 8293 rows and 16 columns. There are ‘latitude’ and ‘longitude’ column for coordinates. They are in decimal degree format, hence we will assume the data is wgs84.</p>
<p>We will next check if there are any NA value in ‘latitude’ and ‘longitude’ using is.na function of base R package.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>airbnb0619</span><span class='op'>$</span><span class='va'>latitude</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>airbnb0619</span><span class='op'>$</span><span class='va'>longitude</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>Since there are no NA values, we can proceed to create simple features data frame for airbnb0619</p>
<h4 id="create-simple-feature-data-frame-from-aspatial-data-2">4.2.3.3 Create simple feature data frame from aspatial data</h4>
<p>The following code 1. convert airbnb0619 data into simple feature data frame using st_as_sf feature of sf package. 2. ‘longitude’ and ‘latitude’ column are set as the coords arguments. 3. CRS were set as 4326 since we assumed that the data is wgs84 4. st_transform function of sf package then helps to transform the newly created simple feature data frame into svy21 5. tm_shape and tm_dots function of tmap plots the transformed airbnb0619_sf</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>airbnb0619_sf</span> <span class='op'>&lt;-</span> <span class='fu'>st_as_sf</span><span class='op'>(</span><span class='va'>airbnb0619</span>,
                    coords <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"longitude"</span>, 
                               <span class='st'>"latitude"</span><span class='op'>)</span>,
                    crs<span class='op'>=</span><span class='fl'>4326</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>st_transform</span><span class='op'>(</span>crs <span class='op'>=</span> <span class='fl'>3414</span><span class='op'>)</span>

<span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>airbnb0619_sf</span><span class='op'>)</span><span class='op'>+</span>
  <span class='fu'>tm_dots</span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<h3 id="airbnb0721">4.2.4 Airbnb0721</h3>
<h4 id="importing-6">4.2.4.1 Importing</h4>
<p>The following code uses read_csv function of readr package to import Airbnb listings19072021.csv aspatial data sets.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>airbnb0721</span> <span class='op'>&lt;-</span> <span class='fu'>read_csv</span><span class='op'>(</span><span class='st'>"data/aspatial/listings19072021.csv"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<h4 id="examine-the-file-3">4.2.4.2 Examine the file</h4>
<p>The following code uses list function of base R to examine the imported file</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='va'>airbnb0721</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>The airbnb0721 data contains 4252 rows and 16 columns, lesser than airbnb0619. There are ‘latitude’ and ‘longitude’ column for coordinates. They are in decimal degree format, hence we will assume the data is wgs84.</p>
<p>We will next check if there are any NA value in ‘latitude’ and ‘longitude’ using is.na function of base R package.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>airbnb0721</span><span class='op'>$</span><span class='va'>latitude</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>airbnb0721</span><span class='op'>$</span><span class='va'>longitude</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>We can confirm that there are no latitude and longitude with NA value.</p>
<h4 id="create-simple-feature-data-frame-from-aspatial-data-3">4.2.4.3 Create simple feature data frame from aspatial data</h4>
<p>The following code 1. convert airbnb0721 data into simple feature data frame using st_as_sf feature of sf package. 2. ‘longitude’ and ‘latitude’ column are set as the coords arguments. 3. CRS were set as 4326 since we assumed that the data is wgs84 4. st_transform function of sf package then helps to transform the newly created simple feature data frame into svy21 5. tm_shape and tm_dots function of tmap plots the transformed airbnb0721_sf</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>airbnb0721_sf</span> <span class='op'>&lt;-</span> <span class='fu'>st_as_sf</span><span class='op'>(</span><span class='va'>airbnb0721</span>,
                    coords <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"longitude"</span>, 
                               <span class='st'>"latitude"</span><span class='op'>)</span>,
                    crs<span class='op'>=</span><span class='fl'>4326</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>st_transform</span><span class='op'>(</span>crs <span class='op'>=</span> <span class='fl'>3414</span><span class='op'>)</span>

<span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>airbnb0721_sf</span><span class='op'>)</span><span class='op'>+</span>
  <span class='fu'>tm_dots</span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<h2 id="geospatial-data-wrangling">4.3 Geospatial Data wrangling</h2>
<p>After importing geospatial and aspatial data, we will convert the simple feature data frame to sp’s Spatial* class.</p>
<h3 id="converting-sf-data-frames-to-sps-spatial-class">4.3.1 Converting sf data frames to sp’s Spatial* class</h3>
<p>The following code chunk converts all the geospatial data from simple feature data frame to sp’s Spatial* class using as_Spatial functions of sf package.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>airbnb0619</span> <span class='op'>&lt;-</span> <span class='fu'>as_Spatial</span><span class='op'>(</span><span class='va'>airbnb0619_sf</span><span class='op'>)</span>
<span class='va'>airbnb0721</span> <span class='op'>&lt;-</span> <span class='fu'>as_Spatial</span><span class='op'>(</span><span class='va'>airbnb0721_sf</span><span class='op'>)</span>
<span class='va'>hotels</span> <span class='op'>&lt;-</span> <span class='fu'>as_Spatial</span><span class='op'>(</span><span class='va'>hotels_sf</span><span class='op'>)</span>
<span class='va'>tourism</span> <span class='op'>&lt;-</span> <span class='fu'>as_Spatial</span><span class='op'>(</span><span class='va'>tourism_sf</span><span class='op'>)</span>
<span class='va'>mrtlrt</span> <span class='op'>&lt;-</span> <span class='fu'>as_Spatial</span><span class='op'>(</span><span class='va'>mrtlrt_sf</span><span class='op'>)</span>
<span class='va'>sg</span> <span class='op'>&lt;-</span> <span class='fu'>as_Spatial</span><span class='op'>(</span><span class='va'>sg_sf</span><span class='op'>)</span>
<span class='va'>mpsz</span> <span class='op'>&lt;-</span> <span class='fu'>as_Spatial</span><span class='op'>(</span><span class='va'>mpsz_sf</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>Check each Spatial* class</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>airbnb0619</span>
</code></pre>
</div>
</details>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>airbnb0721</span>
</code></pre>
</div>
</details>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>hotels</span>
</code></pre>
</div>
</details>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>tourism</span>
</code></pre>
</div>
</details>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>mrtlrt</span>
</code></pre>
</div>
</details>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>sg</span>
</code></pre>
</div>
</details>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>mpsz</span>
</code></pre>
</div>
</details>
</div>
<p>We can see that all the geospatial data are converted to their respective Spatial* Classes.</p>
<h3 id="converting-the-spatial-class-into-generic-sp-format">4.3.2 Converting the Spatial* class into generic sp format</h3>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>airbnb0619_sp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>airbnb0619</span>, <span class='st'>"SpatialPoints"</span><span class='op'>)</span>
<span class='va'>airbnb0721_sp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>airbnb0721</span>, <span class='st'>"SpatialPoints"</span><span class='op'>)</span>
<span class='va'>hotels_sp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>hotels</span>, <span class='st'>"SpatialPoints"</span><span class='op'>)</span>
<span class='va'>tourism_sp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>tourism</span>, <span class='st'>"SpatialPoints"</span><span class='op'>)</span>
<span class='va'>mrtlrt_sp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>mrtlrt</span>, <span class='st'>"SpatialPoints"</span><span class='op'>)</span>
<span class='va'>sg_sp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>sg</span>, <span class='st'>"SpatialPolygons"</span><span class='op'>)</span>
<span class='va'>mpsz_sp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>mpsz</span>, <span class='st'>"SpatialPolygons"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<h3 id="converting-the-generic-sp-format-into-spatstats-ppp-format">4.3.3 Converting the generic sp format into spatstat’s ppp format</h3>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>airbnb0619_ppp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>airbnb0619_sp</span>, <span class='st'>"ppp"</span><span class='op'>)</span>
<span class='va'>airbnb0721_ppp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>airbnb0721_sp</span>, <span class='st'>"ppp"</span><span class='op'>)</span>
<span class='va'>hotels_ppp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>hotels_sp</span>, <span class='st'>"ppp"</span><span class='op'>)</span>
<span class='va'>tourism_ppp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>tourism_sp</span>, <span class='st'>"ppp"</span><span class='op'>)</span>
<span class='va'>mrtlrt_ppp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>mrtlrt_sp</span>, <span class='st'>"ppp"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<<<<<<< HEAD
<h3 id="handling-duplicates-in-ppp-object">4.3.4 Handling duplicates in ppp object</h3>
<h4 id="check-for-dupliciates-duplicates-in-each-ppp-object">4.3.4.1 Check for dupliciates duplicates in each ppp object</h4>
<p>The following code chunk use any and duplicated function of base R package to check for duplicates, and sum up the count of duplicated points using sum function of base R package and multiplicity function of spatstat package.</p>
=======
<h3 id="check-for-duplicates-in-ppp-object">4.3.4 Check for duplicates in ppp object</h3>
>>>>>>> parent of 950ef92 (takehome2 update)
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/duplicated.html'>duplicated</a></span><span class='op'>(</span><span class='va'>airbnb0619_ppp</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='fu'>multiplicity</span><span class='op'>(</span><span class='va'>airbnb0619_ppp</span><span class='op'>)</span> <span class='op'>&gt;</span> <span class='fl'>1</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<<<<<<< HEAD
=======
<pre><code>[1] TRUE</code></pre>
>>>>>>> parent of 950ef92 (takehome2 update)
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/duplicated.html'>duplicated</a></span><span class='op'>(</span><span class='va'>airbnb0721_ppp</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='fu'>multiplicity</span><span class='op'>(</span><span class='va'>airbnb0721_ppp</span><span class='op'>)</span> <span class='op'>&gt;</span> <span class='fl'>1</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<<<<<<< HEAD
</div>
<p>From the result above, there are 224 duplicates in airbnb0721_ppp object.</p>
=======
<pre><code>[1] TRUE</code></pre>
</div>
>>>>>>> parent of 950ef92 (takehome2 update)
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/duplicated.html'>duplicated</a></span><span class='op'>(</span><span class='va'>hotels_ppp</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='fu'>multiplicity</span><span class='op'>(</span><span class='va'>hotels_ppp</span><span class='op'>)</span> <span class='op'>&gt;</span> <span class='fl'>1</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<<<<<<< HEAD
=======
<pre><code>[1] TRUE</code></pre>
>>>>>>> parent of 950ef92 (takehome2 update)
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/duplicated.html'>duplicated</a></span><span class='op'>(</span><span class='va'>tourism_ppp</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='fu'>multiplicity</span><span class='op'>(</span><span class='va'>tourism_ppp</span><span class='op'>)</span> <span class='op'>&gt;</span> <span class='fl'>1</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<<<<<<< HEAD
=======
<pre><code>[1] TRUE</code></pre>
>>>>>>> parent of 950ef92 (takehome2 update)
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/duplicated.html'>duplicated</a></span><span class='op'>(</span><span class='va'>mrtlrt_ppp</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='fu'>multiplicity</span><span class='op'>(</span><span class='va'>mrtlrt_ppp</span><span class='op'>)</span> <span class='op'>&gt;</span> <span class='fl'>1</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<<<<<<< HEAD
</div>
<p>From the result above, there are no duplicate in mrtlrt_ppp object.</p>
<h4 id="handling-duplicates">4.3.4.2 Handling duplicates</h4>
<p>We will use jittering to handle duplicates so that we will not lose useful points. Jittering adds a small perturbation to the duplicated points so that they do not occupy the exact same space.</p>
<p>The following code chunk uses rjitter function of spatstat to jitter the ppp object with duplicates.</p>
=======
<pre><code>[1] FALSE</code></pre>
</div>
<p>We can see that …</p>
<p>Handling duplicates using jittering.</p>
<p>Jittering will add a small perturbation to the duplicate points so that they do not occupy the exact same space.</p>
>>>>>>> parent of 950ef92 (takehome2 update)
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>airbnb0619_ppp_jit</span> <span class='op'>&lt;-</span> <span class='fu'>rjitter</span><span class='op'>(</span><span class='va'>airbnb0619_ppp</span>, 
                             retry<span class='op'>=</span><span class='cn'>TRUE</span>, 
                             nsim<span class='op'>=</span><span class='fl'>1</span>, 
                             drop<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>

<span class='va'>airbnb0721_ppp_jit</span> <span class='op'>&lt;-</span> <span class='fu'>rjitter</span><span class='op'>(</span><span class='va'>airbnb0721_ppp</span>, 
                             retry<span class='op'>=</span><span class='cn'>TRUE</span>, 
                             nsim<span class='op'>=</span><span class='fl'>1</span>, 
                             drop<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>

<span class='va'>hotels_ppp_jit</span> <span class='op'>&lt;-</span> <span class='fu'>rjitter</span><span class='op'>(</span><span class='va'>hotels_ppp</span>, 
                             retry<span class='op'>=</span><span class='cn'>TRUE</span>, 
                             nsim<span class='op'>=</span><span class='fl'>1</span>, 
                             drop<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>

<span class='va'>tourism_ppp_jit</span> <span class='op'>&lt;-</span> <span class='fu'>rjitter</span><span class='op'>(</span><span class='va'>tourism_ppp</span>, 
                             retry<span class='op'>=</span><span class='cn'>TRUE</span>, 
                             nsim<span class='op'>=</span><span class='fl'>1</span>, 
                             drop<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>Check if duplicates still exist</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/duplicated.html'>duplicated</a></span><span class='op'>(</span><span class='va'>airbnb0619_ppp_jit</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='fu'>multiplicity</span><span class='op'>(</span><span class='va'>airbnb0619_ppp_jit</span><span class='op'>)</span> <span class='op'>&gt;</span> <span class='fl'>1</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<<<<<<< HEAD
=======
<pre><code>[1] FALSE</code></pre>
>>>>>>> parent of 950ef92 (takehome2 update)
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/duplicated.html'>duplicated</a></span><span class='op'>(</span><span class='va'>airbnb0721_ppp_jit</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='fu'>multiplicity</span><span class='op'>(</span><span class='va'>airbnb0721_ppp_jit</span><span class='op'>)</span> <span class='op'>&gt;</span> <span class='fl'>1</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<<<<<<< HEAD
=======
<pre><code>[1] FALSE</code></pre>
>>>>>>> parent of 950ef92 (takehome2 update)
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/duplicated.html'>duplicated</a></span><span class='op'>(</span><span class='va'>hotels_ppp_jit</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='fu'>multiplicity</span><span class='op'>(</span><span class='va'>hotels_ppp_jit</span><span class='op'>)</span> <span class='op'>&gt;</span> <span class='fl'>1</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<<<<<<< HEAD
=======
<pre><code>[1] FALSE</code></pre>
>>>>>>> parent of 950ef92 (takehome2 update)
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/duplicated.html'>duplicated</a></span><span class='op'>(</span><span class='va'>tourism_ppp_jit</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='fu'>multiplicity</span><span class='op'>(</span><span class='va'>tourism_ppp_jit</span><span class='op'>)</span> <span class='op'>&gt;</span> <span class='fl'>1</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<<<<<<< HEAD
=======
<pre><code>[1] FALSE</code></pre>
</div>
<h3 id="creating-owin-objects">4.3.5 creating owin objects</h3>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>sg_owin</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>sg_sp</span>, <span class='st'>"owin"</span><span class='op'>)</span>
<span class='va'>mpsz_owin</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>mpsz_sp</span>, <span class='st'>"owin"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
>>>>>>> parent of 950ef92 (takehome2 update)
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>sg_owin</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="takehome-ex02_files/figure-html5/unnamed-chunk-56-1.png" width="624" /></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>mpsz_owin</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<<<<<<< HEAD
=======
<p><img src="takehome-ex02_files/figure-html5/unnamed-chunk-57-1.png" width="624" /></p>
>>>>>>> parent of 950ef92 (takehome2 update)
</div>
<h3 id="combining-point-events-object-and-owin-object">4.3.6 Combining point events object and owin object</h3>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>airbnb0619SG_ppp</span> <span class='op'>=</span> <span class='va'>airbnb0619_ppp_jit</span><span class='op'>[</span><span class='va'>sg_owin</span><span class='op'>]</span>
<span class='va'>airbnb0721SG_ppp</span> <span class='op'>=</span> <span class='va'>airbnb0721_ppp_jit</span><span class='op'>[</span><span class='va'>sg_owin</span><span class='op'>]</span>
<span class='va'>hotelsSG_ppp</span> <span class='op'>=</span> <span class='va'>hotels_ppp_jit</span><span class='op'>[</span><span class='va'>sg_owin</span><span class='op'>]</span>
<span class='va'>tourismSG_ppp</span> <span class='op'>=</span> <span class='va'>tourism_ppp_jit</span><span class='op'>[</span><span class='va'>sg_owin</span><span class='op'>]</span>
<span class='va'>mrtlrtSG_ppp</span> <span class='op'>=</span> <span class='va'>mrtlrt_ppp</span><span class='op'>[</span><span class='va'>sg_owin</span><span class='op'>]</span>
</code></pre>
</div>
</details>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>airbnb0619SG_ppp1</span> <span class='op'>=</span> <span class='va'>airbnb0619_ppp_jit</span><span class='op'>[</span><span class='va'>mpsz_owin</span><span class='op'>]</span>
<span class='va'>airbnb0721SG_ppp1</span> <span class='op'>=</span> <span class='va'>airbnb0721_ppp_jit</span><span class='op'>[</span><span class='va'>mpsz_owin</span><span class='op'>]</span>
<span class='va'>hotelsSG_ppp1</span> <span class='op'>=</span> <span class='va'>hotels_ppp_jit</span><span class='op'>[</span><span class='va'>mpsz_owin</span><span class='op'>]</span>
<span class='va'>tourismSG_ppp1</span> <span class='op'>=</span> <span class='va'>tourism_ppp_jit</span><span class='op'>[</span><span class='va'>mpsz_owin</span><span class='op'>]</span>
<span class='va'>mrtlrtSG_ppp1</span> <span class='op'>=</span> <span class='va'>mrtlrt_ppp</span><span class='op'>[</span><span class='va'>mpsz_owin</span><span class='op'>]</span>
</code></pre>
</div>
</details>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<<<<<<< HEAD
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>airbnb0721SG_ppp</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>hotelsSG_ppp</span><span class='op'>)</span>
=======
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>airbnb0619SG_ppp</span><span class='op'>)</span>
>>>>>>> parent of 950ef92 (takehome2 update)
</code></pre>
</div>
</details>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>airbnb0619SG_ppp1</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<<<<<<< HEAD
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>mrtlrtSG_ppp</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<h1 id="section-a-airbnb-distribution-in-2019">5 Section A: Airbnb Distribution in 2019</h1>
<h2 id="exploratory-spatial-data-analysis">5.1 Exploratory Spatial Data Analysis</h2>
<h3 id="kernel-density-maps">5.1.1 Kernel density maps</h3>
<h4 id="airbnb0619-listings">5.1.1.1 Airbnb0619 listings</h4>
<h5 id="compute-kernel-density-estimation-with-automatic-bandwidth-selection-method">5.1.1.1.1 Compute kernel density estimation with automatic bandwidth selection method</h5>
<ol type="1">
<li>The following code chunk computes kernel density using density function of spatstat package.</li>
<li>The code first takes in the ppp object variable.</li>
<li>bw.diggle automatic bandwidth method to detect a tight cluster</li>
<li>smoothing kernel is set to default gaussian method</li>
</ol>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>kde_airbnb0619SG_bw</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>airbnb0619SG_ppp</span>,
                              sigma<span class='op'>=</span><span class='va'>bw.diggle</span>,
                              edge<span class='op'>=</span><span class='cn'>TRUE</span>,
                            kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>The following code chunk plots the kde_airbnb0619SG_bw using plot function of base R</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_airbnb0619SG_bw</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>The density values of the output range is too small because the default unit of measurement of svy21 is in meter. As a result, the density values computed is in “number of points per square meter”.</p>
<h5 id="rescalling-kde-values">5.1.1.1.2 Rescalling KDE values</h5>
<p>The following code chunk rescale the KDE value of airbnb0619SG_ppp using rescale function of spatstat from meter to kilometer.</p>
=======
<h1 id="section-a-airbnb-distribution-in-2019">Section A: Airbnb Distribution in 2019</h1>
<h2 id="exploratory-spatial-data-analysis">1. Exploratory Spatial Data Analysis</h2>
<h3 id="kernel-density-maps">Kernel density maps</h3>
<h4 id="airbnb-listings">Airbnb listings</h4>
>>>>>>> parent of 950ef92 (takehome2 update)
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>airbnb0619SG_ppp.km</span> <span class='op'>&lt;-</span> <span class='fu'>rescale</span><span class='op'>(</span><span class='va'>airbnb0619SG_ppp</span>, <span class='fl'>1000</span>, <span class='st'>"km"</span><span class='op'>)</span>
<<<<<<< HEAD
</code></pre>
</div>
</details>
</div>
<h5 id="different-automatic-bandwidth-methods">5.1.1.1.3 Different automatic bandwidth methods</h5>
<p>The following code chunk calculate the bandwidth using different methods</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>bw.CvL</span><span class='op'>(</span><span class='va'>airbnb0619SG_ppp.km</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>bw.scott</span><span class='op'>(</span><span class='va'>airbnb0619SG_ppp.km</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>bw.ppl</span><span class='op'>(</span><span class='va'>airbnb0619SG_ppp.km</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>bw.diggle</span><span class='op'>(</span><span class='va'>airbnb0619SG_ppp.km</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>From the result above, since bw.diggle has the lowest sigma, we will be using it for the other ppp object in order to detect close cluster.</p>
<h5 id="kde-map-and-point-map">5.1.1.1.4 KDE Map and Point Map</h5>
<ol type="1">
<li>The following code chunk computes kernel density using density function of spatstat package.</li>
<li>The code first takes in the ppp object variable in km.</li>
<li>bw.diggle automatic bandwidth method to detect a tight cluster</li>
<li>smoothing kernel is set to default gaussian method</li>
<li>plot function of base R package and par function of graphics package is used to plot kde map and ppp point map side by side</li>
</ol>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>kde_airbnb0619SG_bw.km</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>airbnb0619SG_ppp.km</span>,
                              sigma<span class='op'>=</span><span class='va'>bw.diggle</span>,
                              edge<span class='op'>=</span><span class='cn'>TRUE</span>,
                            kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span>


<span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span><span class='op'>(</span>mfrow<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_airbnb0619SG_bw.km</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>airbnb0619SG_ppp</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<h5 id="convert-kde-output-into-grid-object">5.1.1.1.5 Convert KDE output into grid object</h5>
<p>The following code chunk converts KDE output into grid object using as.SpatialGridDataFrame.im function of maptools, and plot the grid object using spplot function of raster package.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>gridded_kde_airbnb0619SG_bw</span> <span class='op'>&lt;-</span> <span class='fu'>as.SpatialGridDataFrame.im</span><span class='op'>(</span><span class='va'>kde_airbnb0619SG_bw.km</span><span class='op'>)</span>
<span class='fu'>spplot</span><span class='op'>(</span><span class='va'>gridded_kde_airbnb0619SG_bw</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<h5 id="convert-grid-object-into-raster">5.1.1.1.6 Convert grid object into raster</h5>
<p>The following code chunk converts grid object into raster using raster function of raster package</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>kde_airbnb0619SG_bw_raster</span> <span class='op'>&lt;-</span> <span class='fu'>raster</span><span class='op'>(</span><span class='va'>gridded_kde_airbnb0619SG_bw</span><span class='op'>)</span>
<span class='va'>kde_airbnb0619SG_bw_raster</span>
</code></pre>
</div>
</details>
</div>
<p>From the result above, the crs is NA</p>
<h5 id="assign-project-system">5.1.1.1.7 Assign project system</h5>
<p>The following code chunk assign CRS to kde_airbnb0619SG_bw_raster</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>projection</span><span class='op'>(</span><span class='va'>kde_airbnb0619SG_bw_raster</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'>CRS</span><span class='op'>(</span><span class='st'>"+init=EPSG:3414"</span><span class='op'>)</span>
<span class='va'>kde_airbnb0619SG_bw_raster</span>
</code></pre>
</div>
</details>
</div>
<h4 id="hotels">5.1.1.2 Hotels</h4>
<h5 id="rescale-kde-values">5.1.1.2.1 Rescale KDE values</h5>
<p>The following code chunk rescale the KDE value of hotelsSG_ppp using rescale function of spatstat from meter to kilometer.</p>
=======

<span class='va'>kde_airbnb0619SG_600</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>airbnb0619SG_ppp.km</span>, sigma<span class='op'>=</span><span class='fl'>0.6</span>, edge<span class='op'>=</span><span class='cn'>TRUE</span>, kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_airbnb0619SG_600</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="takehome-ex02_files/figure-html5/unnamed-chunk-62-1.png" width="624" /></p>
</div>
>>>>>>> parent of 950ef92 (takehome2 update)
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<<<<<<< HEAD
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>hotelsSG_ppp.km</span> <span class='op'>&lt;-</span> <span class='fu'>rescale</span><span class='op'>(</span><span class='va'>hotelsSG_ppp</span>, <span class='fl'>1000</span>, <span class='st'>"km"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<h5 id="kde-map-and-point-map-1">5.1.1.2.2 KDE Map and Point Map</h5>
<ol type="1">
<li>The following code chunk computes kernel density using density function of spatstat package.</li>
<li>The code first takes in the ppp object variable in km.</li>
<li>bw.diggle automatic bandwidth method to detect a tight cluster</li>
<li>smoothing kernel is set to default gaussian method</li>
<li>plot function of base R package and par function of graphics package is used to plot kde map and ppp point map side by side</li>
</ol>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>kde_hotelsSG_bw.km</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>hotelsSG_ppp.km</span>,
                              sigma<span class='op'>=</span><span class='va'>bw.diggle</span>,
                              edge<span class='op'>=</span><span class='cn'>TRUE</span>,
                            kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span><span class='op'>(</span>mfrow<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_hotelsSG_bw.km</span>, main <span class='op'>=</span> <span class='st'>"KDE Map"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>hotelsSG_ppp</span>, main<span class='op'>=</span><span class='st'>"Point Map"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<h5 id="convert-kde-output-into-grid-object-1">5.1.1.2.3 Convert KDE output into grid object</h5>
<p>The following code chunk converts KDE output into grid object using as.SpatialGridDataFrame.im function of maptools, and plot the grid object using spplot function of raster package.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>gridded_kde_hotelsSG_bw</span> <span class='op'>&lt;-</span> <span class='fu'>as.SpatialGridDataFrame.im</span><span class='op'>(</span><span class='va'>kde_hotelsSG_bw.km</span><span class='op'>)</span>
<span class='fu'>spplot</span><span class='op'>(</span><span class='va'>gridded_kde_hotelsSG_bw</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<h5 id="convert-grid-object-into-raster-and-assign-project-system">5.1.1.2.4 Convert grid object into raster and assign project system</h5>
<p>The following code chunk converts grid object into raster using raster function of raster package</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>kde_hotelsSG_bw_raster</span> <span class='op'>&lt;-</span> <span class='fu'>raster</span><span class='op'>(</span><span class='va'>gridded_kde_hotelsSG_bw</span><span class='op'>)</span>
<span class='fu'>projection</span><span class='op'>(</span><span class='va'>kde_hotelsSG_bw_raster</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'>CRS</span><span class='op'>(</span><span class='st'>"+init=EPSG:3414"</span><span class='op'>)</span>
<span class='va'>kde_hotelsSG_bw_raster</span>
</code></pre>
</div>
</details>
</div>
<h4 id="mrtlrt-1">5.1.1.3 MRTLRT</h4>
<h5 id="rescale-kde-values-1">5.1.1.3.1 Rescale KDE values</h5>
<p>The following code chunk rescale the KDE value of mrtlrtSG_ppp using rescale function of spatstat from meter to kilometer.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>mrtlrtSG_ppp.km</span> <span class='op'>&lt;-</span> <span class='fu'>rescale</span><span class='op'>(</span><span class='va'>mrtlrtSG_ppp</span>, <span class='fl'>1000</span>, <span class='st'>"km"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<h5 id="kde-map-and-point-map-2">5.1.1.3.2 KDE Map and Point Map</h5>
<ol type="1">
<li>The following code chunk computes kernel density using density function of spatstat package.</li>
<li>The code first takes in the ppp object variable in km.</li>
<li>bw.diggle automatic bandwidth method to detect a tight cluster</li>
<li>smoothing kernel is set to default gaussian method</li>
<li>plot function of base R package and par function of graphics package is used to plot kde map and ppp point map side by side</li>
</ol>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>kde_mrtlrtSG_bw.km</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>mrtlrtSG_ppp.km</span>,
=======
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>airbnb0721SG_ppp.km</span> <span class='op'>&lt;-</span> <span class='fu'>rescale</span><span class='op'>(</span><span class='va'>airbnb0721SG_ppp</span>, <span class='fl'>1000</span>, <span class='st'>"km"</span><span class='op'>)</span>

<span class='va'>kde_airbnb0721SG_ppp_bw</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>airbnb0721SG_ppp.km</span>,
>>>>>>> parent of 950ef92 (takehome2 update)
                              sigma<span class='op'>=</span><span class='va'>bw.diggle</span>,
                              edge<span class='op'>=</span><span class='cn'>TRUE</span>,
                            kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span> 

<<<<<<< HEAD
<span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span><span class='op'>(</span>mfrow<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_mrtlrtSG_bw.km</span>, main <span class='op'>=</span> <span class='st'>"KDE Map"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>mrtlrtSG_ppp</span>, main<span class='op'>=</span><span class='st'>"Point Map"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<h5 id="convert-kde-output-into-grid-object-2">5.1.1.3.3 Convert KDE output into grid object</h5>
<p>The following code chunk converts KDE output into grid object using as.SpatialGridDataFrame.im function of maptools, and plot the grid object using spplot function of raster package.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>gridded_kde_mrtlrtSG_bw</span> <span class='op'>&lt;-</span> <span class='fu'>as.SpatialGridDataFrame.im</span><span class='op'>(</span><span class='va'>kde_mrtlrtSG_bw.km</span><span class='op'>)</span>
<span class='fu'>spplot</span><span class='op'>(</span><span class='va'>gridded_kde_mrtlrtSG_bw</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<h5 id="convert-grid-object-into-raster-and-assign-project-system-1">5.1.1.3.4 Convert grid object into raster and assign project system</h5>
<p>The following code chunk converts grid object into raster using raster function of raster package</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>kde_mrtlrtSG_bw_raster</span> <span class='op'>&lt;-</span> <span class='fu'>raster</span><span class='op'>(</span><span class='va'>gridded_kde_mrtlrtSG_bw</span><span class='op'>)</span>
<span class='fu'>projection</span><span class='op'>(</span><span class='va'>kde_mrtlrtSG_bw_raster</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'>CRS</span><span class='op'>(</span><span class='st'>"+init=EPSG:3414"</span><span class='op'>)</span>
<span class='va'>kde_mrtlrtSG_bw_raster</span>
</code></pre>
</div>
</details>
</div>
<h4 id="tourist-attractions">5.1.1.4 Tourist Attractions</h4>
<h5 id="rescale-kde-values-2">5.1.1.4.1 Rescale KDE values</h5>
<p>The following code chunk rescale the KDE value of mrtlrtSG_ppp using rescale function of spatstat from meter to kilometer.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>tourismSG_ppp.km</span> <span class='op'>&lt;-</span> <span class='fu'>rescale</span><span class='op'>(</span><span class='va'>tourismSG_ppp</span>, <span class='fl'>1000</span>, <span class='st'>"km"</span><span class='op'>)</span>
=======
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_airbnb0721SG_ppp_bw</span><span class='op'>)</span>
>>>>>>> parent of 950ef92 (takehome2 update)
</code></pre>
</div>
</details>
<p><img src="takehome-ex02_files/figure-html5/unnamed-chunk-63-1.png" width="624" /></p>
</div>
<<<<<<< HEAD
<h5 id="kde-map-and-point-map-3">5.1.1.4.2 KDE Map and Point Map</h5>
<ol type="1">
<li>The following code chunk computes kernel density using density function of spatstat package.</li>
<li>The code first takes in the ppp object variable in km.</li>
<li>bw.diggle automatic bandwidth method to detect a tight cluster</li>
<li>smoothing kernel is set to default gaussian method</li>
<li>plot function of base R package and par function of graphics package is used to plot kde map and ppp point map side by side</li>
</ol>
=======
<h4 id="hotels">Hotels</h4>
>>>>>>> parent of 950ef92 (takehome2 update)
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<<<<<<< HEAD
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>kde_tourismSG_bw.km</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>tourismSG_ppp.km</span>,
                              sigma<span class='op'>=</span><span class='va'>bw.diggle</span>,
                              edge<span class='op'>=</span><span class='cn'>TRUE</span>,
                            kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span><span class='op'>(</span>mfrow<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_tourismSG_bw.km</span>, main <span class='op'>=</span> <span class='st'>"KDE Map"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>tourismSG_ppp</span>, main<span class='op'>=</span><span class='st'>"Point Map"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<h5 id="convert-kde-output-into-grid-object-3">5.1.1.4.3 Convert KDE output into grid object</h5>
<p>The following code chunk converts KDE output into grid object using as.SpatialGridDataFrame.im function of maptools, and plot the grid object using spplot function of raster package.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>gridded_kde_tourismSG_bw</span> <span class='op'>&lt;-</span> <span class='fu'>as.SpatialGridDataFrame.im</span><span class='op'>(</span><span class='va'>kde_tourismSG_bw.km</span><span class='op'>)</span>
<span class='fu'>spplot</span><span class='op'>(</span><span class='va'>gridded_kde_tourismSG_bw</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<h5 id="convert-grid-object-into-raster-and-assign-project-system-2">5.1.1.4.4 Convert grid object into raster and assign project system</h5>
<p>The following code chunk converts grid object into raster using raster function of raster package</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>kde_tourismSG_bw_raster</span> <span class='op'>&lt;-</span> <span class='fu'>raster</span><span class='op'>(</span><span class='va'>gridded_kde_tourismSG_bw</span><span class='op'>)</span>
<span class='fu'>projection</span><span class='op'>(</span><span class='va'>kde_tourismSG_bw_raster</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'>CRS</span><span class='op'>(</span><span class='st'>"+init=EPSG:3414"</span><span class='op'>)</span>
<span class='va'>kde_tourismSG_bw_raster</span>
</code></pre>
</div>
</details>
</div>
<h4 id="comparison-between-airbnb0619-hotels-mrtlrt-and-tourist-attractions">5.1.1.5 Comparison between Airbnb0619, Hotels, MRTLRT and Tourist Attractions</h4>
<h5 id="kde-map-comparison">5.1.1.5.1 KDE Map Comparison</h5>
<p>The following code chunk plots all the KDE map of Airbnb0619, Hotels, MRTLRT and Tourist Attractions side by side using par functions of graphics package</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span><span class='op'>(</span>mfrow<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>,<span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_airbnb0619SG_bw.km</span>, main <span class='op'>=</span> <span class='st'>"Airbnb 2019"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_hotelsSG_bw.km</span>, main <span class='op'>=</span> <span class='st'>"Hotel"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_mrtlrtSG_bw.km</span>, main <span class='op'>=</span> <span class='st'>"Mrt"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_tourismSG_bw.km</span>, main <span class='op'>=</span> <span class='st'>"Tourist Attraction"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>From the above, we can see that the higher density (in red and yellow) for airbnb, hotel, mrt and tourish attraction are concentrated around the south east area below central region.</p>
<h5 id="central-region">5.1.1.5.2 Central Region</h5>
<p>We will look into the central region</p>
<h6 id="exploration-with-openstreetmap">5.1.1.5.2.1 Exploration with OpenStreetMap</h6>
<p>The following code chunk first extract airbnb in the central region from airbnb0619_sf region.</p>
<p>tmap_mode is set to “view” for interaction mode and tm_basemap is set to “OpenStreetMap”</p>
<p>tm_shape of centralairbnb0619, hotels_sf, mrtlrt_sf and tourism_sf were plotted using tm_shape and tm_dots of tmap packages.</p>
<p>colour of dots using tm_dots and the following are the color representation:</p>
<ul>
<li><p>black: Airbnb listings in central region</p></li>
<li><p>green: hotels</p></li>
<li><p>blue: mrtlrt</p></li>
<li><p>red: tourist attractions.</p></li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>centralairbnb0619</span> <span class='op'>&lt;-</span> <span class='va'>airbnb0619_sf</span><span class='op'>[</span><span class='va'>airbnb0619_sf</span><span class='op'>$</span><span class='va'>neighbourhood_group</span> <span class='op'>==</span> <span class='st'>"Central Region"</span>,<span class='op'>]</span>

<span class='fu'>tmap_mode</span><span class='op'>(</span><span class='st'>"view"</span><span class='op'>)</span>
<span class='fu'>tm_basemap</span><span class='op'>(</span><span class='st'>"OpenStreetMap"</span><span class='op'>)</span> <span class='op'>+</span>
<span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>centralairbnb0619</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>tm_dots</span><span class='op'>(</span>col<span class='op'>=</span><span class='st'>"black"</span>, size <span class='op'>=</span> <span class='fl'>0.02</span><span class='op'>)</span><span class='op'>+</span>
<span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>hotels_sf</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>tm_dots</span><span class='op'>(</span>col<span class='op'>=</span><span class='st'>"green"</span>, size <span class='op'>=</span> <span class='fl'>0.02</span><span class='op'>)</span><span class='op'>+</span>
<span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>mrtlrt_sf</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>tm_dots</span><span class='op'>(</span>col<span class='op'>=</span><span class='st'>"blue"</span>, size <span class='op'>=</span> <span class='fl'>0.02</span><span class='op'>)</span><span class='op'>+</span>
<span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>tourism_sf</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>tm_dots</span><span class='op'>(</span>col<span class='op'>=</span><span class='st'>"red"</span>, size <span class='op'>=</span> <span class='fl'>0.02</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>From the map above, we can see that there are many Airbnbs located in Kallang, River Valley, Novena an Rochor.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>tmap_mode</span><span class='op'>(</span><span class='st'>"plot"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<h6 id="comparing-spatial-point-patterns-using-kde">5.1.1.5.2.2 Comparing Spatial Point Patterns using KDE</h6>
<p>Extract Study Area</p>
<p>The following code chunk extracts the target areas.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>kl</span> <span class='op'>=</span> <span class='va'>mpsz</span><span class='op'>[</span><span class='va'>mpsz</span><span class='op'>@</span><span class='va'>data</span><span class='op'>$</span><span class='va'>PLN_AREA_N</span> <span class='op'>==</span> <span class='st'>"KALLANG"</span>,<span class='op'>]</span>
<span class='va'>rv</span> <span class='op'>=</span> <span class='va'>mpsz</span><span class='op'>[</span><span class='va'>mpsz</span><span class='op'>@</span><span class='va'>data</span><span class='op'>$</span><span class='va'>PLN_AREA_N</span> <span class='op'>==</span> <span class='st'>"RIVER VALLEY"</span>,<span class='op'>]</span>
<span class='va'>nv</span> <span class='op'>=</span> <span class='va'>mpsz</span><span class='op'>[</span><span class='va'>mpsz</span><span class='op'>@</span><span class='va'>data</span><span class='op'>$</span><span class='va'>PLN_AREA_N</span> <span class='op'>==</span> <span class='st'>"NOVENA"</span>,<span class='op'>]</span>
<span class='va'>rc</span> <span class='op'>=</span> <span class='va'>mpsz</span><span class='op'>[</span><span class='va'>mpsz</span><span class='op'>@</span><span class='va'>data</span><span class='op'>$</span><span class='va'>PLN_AREA_N</span> <span class='op'>==</span> <span class='st'>"ROCHOR"</span>,<span class='op'>]</span>
</code></pre>
</div>
</details>
</div>
<p>Plot target areas</p>
<p>The following code chunk plots the target areas side by side in 2x2 using par function of graphics package and plot functions of base R package.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span><span class='op'>(</span>mfrow<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>,<span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kl</span>, main <span class='op'>=</span> <span class='st'>"Kallang"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>rv</span>, main <span class='op'>=</span> <span class='st'>"River Valley"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>nv</span>, main <span class='op'>=</span> <span class='st'>"Novena"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>rc</span>, main <span class='op'>=</span> <span class='st'>"Rochor"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>Convert Spatial Polygons Data Fraeme into generic SP format</p>
<p>The following code chunk converts the four SpatialPolygonsDataFrame layers into generic spatialpolygons layers.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>kl_sp</span> <span class='op'>=</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>kl</span>, <span class='st'>"SpatialPolygons"</span><span class='op'>)</span>
<span class='va'>rv_sp</span> <span class='op'>=</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>rv</span>, <span class='st'>"SpatialPolygons"</span><span class='op'>)</span>
<span class='va'>nv_sp</span> <span class='op'>=</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>nv</span>, <span class='st'>"SpatialPolygons"</span><span class='op'>)</span>
<span class='va'>rc_sp</span> <span class='op'>=</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>rc</span>, <span class='st'>"SpatialPolygons"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>Create owin object for each target area</p>
<p>The following code chunk converst the SpatialPolygons objects into owin objects required by spatstat.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>kl_owin</span> <span class='op'>=</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>kl_sp</span>, <span class='st'>"owin"</span><span class='op'>)</span>
<span class='va'>rv_owin</span> <span class='op'>=</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>rv_sp</span>, <span class='st'>"owin"</span><span class='op'>)</span>
<span class='va'>nv_owin</span> <span class='op'>=</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>nv_sp</span>, <span class='st'>"owin"</span><span class='op'>)</span>
<span class='va'>rc_owin</span> <span class='op'>=</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>rc_sp</span>, <span class='st'>"owin"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>Combine airnbnb0619, hotels, mrt, tourist attractions points with owin of each target area</p>
<p>The following code chunk extracts airnbnb0619, hotels, mrt and tourist attractions within each specific region.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>airbnb0619_kl_ppp</span> <span class='op'>=</span> <span class='va'>airbnb0619_ppp_jit</span><span class='op'>[</span><span class='va'>kl_owin</span><span class='op'>]</span>
<span class='va'>airbnb0619_rv_ppp</span> <span class='op'>=</span> <span class='va'>airbnb0619_ppp_jit</span><span class='op'>[</span><span class='va'>rv_owin</span><span class='op'>]</span>
<span class='va'>airbnb0619_nv_ppp</span> <span class='op'>=</span> <span class='va'>airbnb0619_ppp_jit</span><span class='op'>[</span><span class='va'>nv_owin</span><span class='op'>]</span>
<span class='va'>airbnb0619_rc_ppp</span> <span class='op'>=</span> <span class='va'>airbnb0619_ppp_jit</span><span class='op'>[</span><span class='va'>rc_owin</span><span class='op'>]</span>

<span class='va'>hotels_kl_ppp</span> <span class='op'>=</span> <span class='va'>hotels_ppp_jit</span><span class='op'>[</span><span class='va'>kl_owin</span><span class='op'>]</span>
<span class='va'>hotels_rv_ppp</span> <span class='op'>=</span> <span class='va'>hotels_ppp_jit</span><span class='op'>[</span><span class='va'>rv_owin</span><span class='op'>]</span>
<span class='va'>hotels_nv_ppp</span> <span class='op'>=</span> <span class='va'>hotels_ppp_jit</span><span class='op'>[</span><span class='va'>nv_owin</span><span class='op'>]</span>
<span class='va'>hotels_rc_ppp</span> <span class='op'>=</span> <span class='va'>hotels_ppp_jit</span><span class='op'>[</span><span class='va'>rc_owin</span><span class='op'>]</span>

<span class='va'>mrtlrt_kl_ppp</span> <span class='op'>=</span> <span class='va'>mrtlrt_ppp</span><span class='op'>[</span><span class='va'>kl_owin</span><span class='op'>]</span>
<span class='va'>mrtlrt_rv_ppp</span> <span class='op'>=</span> <span class='va'>mrtlrt_ppp</span><span class='op'>[</span><span class='va'>rv_owin</span><span class='op'>]</span>
<span class='va'>mrtlrt_nv_ppp</span> <span class='op'>=</span> <span class='va'>mrtlrt_ppp</span><span class='op'>[</span><span class='va'>nv_owin</span><span class='op'>]</span>
<span class='va'>mrtlrt_rc_ppp</span> <span class='op'>=</span> <span class='va'>mrtlrt_ppp</span><span class='op'>[</span><span class='va'>rc_owin</span><span class='op'>]</span>

<span class='va'>tourism_kl_ppp</span> <span class='op'>=</span> <span class='va'>tourism_ppp_jit</span><span class='op'>[</span><span class='va'>kl_owin</span><span class='op'>]</span>
<span class='va'>tourism_rv_ppp</span> <span class='op'>=</span> <span class='va'>tourism_ppp_jit</span><span class='op'>[</span><span class='va'>rv_owin</span><span class='op'>]</span>
<span class='va'>tourism_nv_ppp</span> <span class='op'>=</span> <span class='va'>tourism_ppp_jit</span><span class='op'>[</span><span class='va'>nv_owin</span><span class='op'>]</span>
<span class='va'>tourism_rc_ppp</span> <span class='op'>=</span> <span class='va'>tourism_ppp_jit</span><span class='op'>[</span><span class='va'>rc_owin</span><span class='op'>]</span>
</code></pre>
</div>
</details>
</div>
<p>Rescale from m to km</p>
<p>The following code chunk transform the unit from m to km using rescale function.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>airbnb0619_kl_ppp.km</span> <span class='op'>=</span> <span class='fu'>rescale</span><span class='op'>(</span><span class='va'>airbnb0619_kl_ppp</span>, <span class='fl'>1000</span>, <span class='st'>"km"</span><span class='op'>)</span>
<span class='va'>airbnb0619_rv_ppp.km</span> <span class='op'>=</span> <span class='fu'>rescale</span><span class='op'>(</span><span class='va'>airbnb0619_rv_ppp</span>, <span class='fl'>1000</span>, <span class='st'>"km"</span><span class='op'>)</span>
<span class='va'>airbnb0619_nv_ppp.km</span> <span class='op'>=</span> <span class='fu'>rescale</span><span class='op'>(</span><span class='va'>airbnb0619_nv_ppp</span>, <span class='fl'>1000</span>, <span class='st'>"km"</span><span class='op'>)</span>
<span class='va'>airbnb0619_rc_ppp.km</span> <span class='op'>=</span> <span class='fu'>rescale</span><span class='op'>(</span><span class='va'>airbnb0619_rc_ppp</span>, <span class='fl'>1000</span>, <span class='st'>"km"</span><span class='op'>)</span>

<span class='va'>hotels_kl_ppp.km</span> <span class='op'>=</span> <span class='fu'>rescale</span><span class='op'>(</span><span class='va'>hotels_kl_ppp</span>, <span class='fl'>1000</span>, <span class='st'>"km"</span><span class='op'>)</span>
<span class='va'>hotels_rv_ppp.km</span> <span class='op'>=</span> <span class='fu'>rescale</span><span class='op'>(</span><span class='va'>hotels_rv_ppp</span>, <span class='fl'>1000</span>, <span class='st'>"km"</span><span class='op'>)</span>
<span class='va'>hotels_nv_ppp.km</span> <span class='op'>=</span> <span class='fu'>rescale</span><span class='op'>(</span><span class='va'>hotels_nv_ppp</span>, <span class='fl'>1000</span>, <span class='st'>"km"</span><span class='op'>)</span>
<span class='va'>hotels_rc_ppp.km</span> <span class='op'>=</span> <span class='fu'>rescale</span><span class='op'>(</span><span class='va'>hotels_rc_ppp</span>, <span class='fl'>1000</span>, <span class='st'>"km"</span><span class='op'>)</span>

<span class='va'>mrtlrt_kl_ppp.km</span> <span class='op'>=</span> <span class='fu'>rescale</span><span class='op'>(</span><span class='va'>mrtlrt_kl_ppp</span>, <span class='fl'>1000</span>, <span class='st'>"km"</span><span class='op'>)</span>
<span class='va'>mrtlrt_rv_ppp.km</span> <span class='op'>=</span> <span class='fu'>rescale</span><span class='op'>(</span><span class='va'>mrtlrt_rv_ppp</span>, <span class='fl'>1000</span>, <span class='st'>"km"</span><span class='op'>)</span>
<span class='va'>mrtlrt_nv_ppp.km</span> <span class='op'>=</span> <span class='fu'>rescale</span><span class='op'>(</span><span class='va'>mrtlrt_nv_ppp</span>, <span class='fl'>1000</span>, <span class='st'>"km"</span><span class='op'>)</span>
<span class='va'>mrtlrt_rc_ppp.km</span> <span class='op'>=</span> <span class='fu'>rescale</span><span class='op'>(</span><span class='va'>mrtlrt_rc_ppp</span>, <span class='fl'>1000</span>, <span class='st'>"km"</span><span class='op'>)</span>

<span class='va'>tourism_kl_ppp.km</span> <span class='op'>=</span> <span class='fu'>rescale</span><span class='op'>(</span><span class='va'>tourism_kl_ppp</span>, <span class='fl'>1000</span>, <span class='st'>"km"</span><span class='op'>)</span>
<span class='va'>tourism_rv_ppp.km</span> <span class='op'>=</span> <span class='fu'>rescale</span><span class='op'>(</span><span class='va'>tourism_rv_ppp</span>, <span class='fl'>1000</span>, <span class='st'>"km"</span><span class='op'>)</span>
<span class='va'>tourism_nv_ppp.km</span> <span class='op'>=</span> <span class='fu'>rescale</span><span class='op'>(</span><span class='va'>tourism_nv_ppp</span>, <span class='fl'>1000</span>, <span class='st'>"km"</span><span class='op'>)</span>
<span class='va'>tourism_rc_ppp.km</span> <span class='op'>=</span> <span class='fu'>rescale</span><span class='op'>(</span><span class='va'>tourism_rc_ppp</span>, <span class='fl'>1000</span>, <span class='st'>"km"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>Airbnb comparison by neighbourhood</p>
<p>The following code chunk plots airbnb within each neigbourhood using plot and density functions with sigma set to bw.diggle and kernel set to gaussian.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span><span class='op'>(</span>mfrow<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>,<span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>airbnb0619_kl_ppp.km</span>, 
             sigma<span class='op'>=</span><span class='va'>bw.diggle</span>, 
             edge<span class='op'>=</span><span class='cn'>TRUE</span>, 
             kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span>,
     main<span class='op'>=</span><span class='st'>"Kallang"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>airbnb0619_rv_ppp.km</span>, 
             sigma<span class='op'>=</span><span class='va'>bw.diggle</span>, 
             edge<span class='op'>=</span><span class='cn'>TRUE</span>, 
             kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span>,
     main<span class='op'>=</span><span class='st'>"River Valley"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>airbnb0619_nv_ppp.km</span>, 
             sigma<span class='op'>=</span><span class='va'>bw.diggle</span>, 
             edge<span class='op'>=</span><span class='cn'>TRUE</span>, 
             kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span>,
     main<span class='op'>=</span><span class='st'>"Novena"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>airbnb0619_rc_ppp.km</span>, 
             sigma<span class='op'>=</span><span class='va'>bw.diggle</span>, 
             edge<span class='op'>=</span><span class='cn'>TRUE</span>, 
             kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span>,
     main<span class='op'>=</span><span class='st'>"Rochor"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>Analysis:</p>
<p>Comparison within Kallang</p>
<p>The following code chunk plots airbnb, hotel, mrt and tourist attraction in Kallang.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span><span class='op'>(</span>mfrow<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>,<span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>airbnb0619_kl_ppp.km</span>, main <span class='op'>=</span> <span class='st'>"Airbnb"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>hotels_kl_ppp.km</span>, main <span class='op'>=</span> <span class='st'>"Hotel"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>mrtlrt_kl_ppp.km</span>, main <span class='op'>=</span> <span class='st'>"Mrt"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>tourism_kl_ppp.km</span>, main <span class='op'>=</span> <span class='st'>"Tourist Attraction"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>Analysis: Even though there are no tourist attraction and hotels, there are still many airbnb in Kallang. There are a few MRT stations in Kallang, which may be the reason to the large number of airbnb.</p>
<p>Comparison within River Valley</p>
<p>The following code chunk plots airbnb, hotel, mrt and tourist attraction in River Valley.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span><span class='op'>(</span>mfrow<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>,<span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>airbnb0619_rv_ppp.km</span>, main <span class='op'>=</span> <span class='st'>"Airbnb"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>hotels_rv_ppp.km</span>, main <span class='op'>=</span> <span class='st'>"Hotel"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>mrtlrt_rv_ppp.km</span>, main <span class='op'>=</span> <span class='st'>"Mrt"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>tourism_rv_ppp.km</span>, main <span class='op'>=</span> <span class='st'>"Tourist Attraction"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>Analysis: Even though there are no tourist attraction and Mrt in River Valley, there are still many airbnb. There are only one hotel and it may be the reason for the large number of airbnb in the area.</p>
<p>Comparison within Novena</p>
<p>The following code chunk plots airbnb, hotel, mrt and tourist attraction in Novena.</p>
=======
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>hotels_ppp.km</span> <span class='op'>&lt;-</span> <span class='fu'>rescale</span><span class='op'>(</span><span class='va'>hotelsSG_ppp</span>, <span class='fl'>1000</span>, <span class='st'>"km"</span><span class='op'>)</span>

<span class='va'>kde_hotelsSG_600</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>hotels_ppp.km</span>, sigma<span class='op'>=</span><span class='fl'>0.6</span>, edge<span class='op'>=</span><span class='cn'>TRUE</span>, kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_hotelsSG_600</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="takehome-ex02_files/figure-html5/unnamed-chunk-64-1.png" width="624" /></p>
</div>
<h4 id="mrt">MRT</h4>
>>>>>>> parent of 950ef92 (takehome2 update)
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<<<<<<< HEAD
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span><span class='op'>(</span>mfrow<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>,<span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>airbnb0619_nv_ppp.km</span>, main <span class='op'>=</span> <span class='st'>"Airbnb"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>hotels_nv_ppp.km</span>, main <span class='op'>=</span> <span class='st'>"Hotel"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>mrtlrt_nv_ppp.km</span>, main <span class='op'>=</span> <span class='st'>"Mrt"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>tourism_nv_ppp.km</span>, main <span class='op'>=</span> <span class='st'>"Tourist Attraction"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>Analysis: Even though there are a few hotel in Novena, the number of airbnb are large. The accessibility of the two MRT and one tourist attraction can be the reason to the large number of airbnb in Novena.</p>
<p>Comparison within Rochor</p>
<p>The following code chunk plots airbnb, hotel, mrt and tourist attraction in Rochor.</p>
=======
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>mrtlrt_ppp.km</span> <span class='op'>&lt;-</span> <span class='fu'>rescale</span><span class='op'>(</span><span class='va'>mrtlrtSG_ppp</span>, <span class='fl'>1000</span>, <span class='st'>"km"</span><span class='op'>)</span>

<span class='va'>kde_mrtlrtSG_600</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>mrtlrt_ppp.km</span>, sigma<span class='op'>=</span><span class='fl'>0.6</span>, edge<span class='op'>=</span><span class='cn'>TRUE</span>, kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_mrtlrtSG_600</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="takehome-ex02_files/figure-html5/unnamed-chunk-65-1.png" width="624" /></p>
</div>
<h4 id="tourist-attractions">Tourist Attractions</h4>
>>>>>>> parent of 950ef92 (takehome2 update)
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<<<<<<< HEAD
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span><span class='op'>(</span>mfrow<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>,<span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>airbnb0619_rc_ppp.km</span>, main <span class='op'>=</span> <span class='st'>"Airbnb"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>hotels_rc_ppp.km</span>, main <span class='op'>=</span> <span class='st'>"Hotel"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>mrtlrt_rc_ppp.km</span>, main <span class='op'>=</span> <span class='st'>"Mrt"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>tourism_rc_ppp.km</span>, main <span class='op'>=</span> <span class='st'>"Tourist Attraction"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>Analysis: In Rochor, there are still many airbnb even though many hotels are already available. The accessilibty to a few MRTs and tourist attractions may be the reason that leads to a large number of airbnb in Rochor.</p>
<p>Overall, we can conclude that there are no direct relationship between airbnb and hotel, mrt and tourist attraction.</p>
<h2 id="second-order-spatial-point-patterns-analysis">5.2 Second-order Spatial Point Patterns Analysis</h2>
<h3 id="nearest-neighbour-analysis">5.2.1 Nearest Neighbour Analysis</h3>
<h4 id="hypothesis">5.2.1.1 Hypothesis</h4>
<p>we will perform the Clark-Evans test of aggregation for a spatial point pattern by using clarkevans.test() of statspat.</p>
<p>Test Hypothesis:</p>
<p>H0 = The distribution of airbnb are randomly distributed.</p>
<p>H1 = The distribution of airbnb are not randomly distributed.</p>
<p>The 95% confident interval will be used.</p>
<h4 id="testing-and-analysis">5.2.1.2 Testing and Analysis</h4>
<h5 id="testing-spatial-point-patterns-using-clark-and-evans-test">5.2.1.2.1 Testing spatial point patterns using Clark and Evans Test</h5>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>clarkevans.test</span><span class='op'>(</span><span class='va'>airbnb0619SG_ppp</span>,
                correction<span class='op'>=</span><span class='st'>"none"</span>,
                clipregion<span class='op'>=</span><span class='st'>"sg_owin"</span>,
                alternative<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"clustered"</span><span class='op'>)</span>,
                nsim<span class='op'>=</span><span class='fl'>99</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>Clark-Evans test No edge correction Monte Carlo test based on 99 simulations of CSR with fixed n</p>
<p>data: airbnb0619SG_ppp R = 0.36169, p-value = 0.01 alternative hypothesis: clustered (R &lt; 1)</p>
<h5 id="clark-and-evans-test-kallang-planning-area">5.2.1.2.2 Clark and Evans Test: Kallang planning area</h5>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>clarkevans.test</span><span class='op'>(</span><span class='va'>airbnb0619_kl_ppp</span>,
                correction<span class='op'>=</span><span class='st'>"none"</span>,
                clipregion<span class='op'>=</span><span class='cn'>NULL</span>,
                alternative<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"two.sided"</span><span class='op'>)</span>,
                nsim<span class='op'>=</span><span class='fl'>999</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>Analysis:</p>
<h5 id="clark-and-evans-test-river-valley-planning-area">5.2.1.2.3 Clark and Evans Test: River Valley planning area</h5>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>clarkevans.test</span><span class='op'>(</span><span class='va'>airbnb0619_rv_ppp</span>,
                correction<span class='op'>=</span><span class='st'>"none"</span>,
                clipregion<span class='op'>=</span><span class='cn'>NULL</span>,
                alternative<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"two.sided"</span><span class='op'>)</span>,
                nsim<span class='op'>=</span><span class='fl'>999</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>Analysis:</p>
<h5 id="clark-and-evans-test-novena-planning-area">5.2.1.2.4 Clark and Evans Test: Novena planning area</h5>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>clarkevans.test</span><span class='op'>(</span><span class='va'>airbnb0619_nv_ppp</span>,
                correction<span class='op'>=</span><span class='st'>"none"</span>,
                clipregion<span class='op'>=</span><span class='cn'>NULL</span>,
                alternative<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"two.sided"</span><span class='op'>)</span>,
                nsim<span class='op'>=</span><span class='fl'>999</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>Analysis:</p>
<h5 id="clark-and-evans-test-rochor-planning-area">5.2.1.2.5 Clark and Evans Test: Rochor planning area</h5>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>clarkevans.test</span><span class='op'>(</span><span class='va'>airbnb0619_rc_ppp</span>,
                correction<span class='op'>=</span><span class='st'>"none"</span>,
                clipregion<span class='op'>=</span><span class='cn'>NULL</span>,
                alternative<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"two.sided"</span><span class='op'>)</span>,
                nsim<span class='op'>=</span><span class='fl'>999</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>Analysis:</p>
<h3 id="g-function">G-FUNCTION</h3>
<h4 id="hypothesis-1">Hypothesis</h4>
<h4 id="testing-and-analysis-1">Testing and Analysis</h4>
<h3 id="f-function">F-FUNCTION</h3>
<h4 id="hypothesis-2">Hypothesis</h4>
<h4 id="testing-and-analysis-2">Testing and Analysis</h4>
<h3 id="k-function">K-FUNCTION</h3>
<h4 id="hypothesis-3">Hypothesis</h4>
<h4 id="testing-and-analysis-3">Testing and Analysis</h4>
<h3 id="l-function">L-FUNCTION</h3>
<h4 id="hypothesis-4">Hypothesis</h4>
<h4 id="testing-and-analysis-4">Testing and Analysis</h4>
<h1 id="section-b-impact-of-covid-19">6 Section B: Impact of COVID-19</h1>
<h2 id="exploratory-spatial-data-analysis-1">6.1 Exploratory Spatial Data Analysis</h2>
<h3 id="kernel-density-maps-1">6.1.1 Kernel density maps</h3>
<h4 id="airbnb0721-listings">6.1.1.1 Airbnb0721 listings</h4>
<h5 id="rescale-kde-values-3">6.1.1.2.1 Rescale KDE values</h5>
<p>The following code chunk rescale the KDE value of airbnb0721SG_ppp using rescale function of spatstat from meter to kilometer.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>airbnb0721SG_ppp.km</span> <span class='op'>&lt;-</span> <span class='fu'>rescale</span><span class='op'>(</span><span class='va'>airbnb0721SG_ppp</span>, <span class='fl'>1000</span>, <span class='st'>"km"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<h5 id="kde-map">6.1.1.2.2 KDE Map</h5>
<ol type="1">
<li>The following code chunk computes kernel density using density function of spatstat package.</li>
<li>The code first takes in the ppp object variable in km.</li>
<li>bw.diggle automatic bandwidth method to detect a tight cluster</li>
<li>smoothing kernel is set to default gaussian method</li>
<li>plot function of base R package to plot the kde map</li>
</ol>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>kde_airbnb0721SG_bw.km</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>airbnb0721SG_ppp.km</span>,
                              sigma<span class='op'>=</span><span class='va'>bw.diggle</span>,
                              edge<span class='op'>=</span><span class='cn'>TRUE</span>,
                            kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_airbnb0721SG_bw.km</span>, main <span class='op'>=</span> <span class='st'>"KDE Map"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<h5 id="convert-kde-output-into-grid-object.">6.1.1.2.3 Convert KDE output into grid object.</h5>
<p>The following code chunk converts KDE output into grid object using as.SpatialGridDataFrame.im function of maptools, and plot the grid object using spplot function of raster package.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>gridded_kde_airbnb0721SG_bw</span> <span class='op'>&lt;-</span> <span class='fu'>as.SpatialGridDataFrame.im</span><span class='op'>(</span><span class='va'>kde_airbnb0721SG_bw.km</span><span class='op'>)</span>
<span class='fu'>spplot</span><span class='op'>(</span><span class='va'>gridded_kde_airbnb0721SG_bw</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<h5 id="convert-grid-object-into-raster-and-assign-project-system-3">6.1.1.2.4 Convert grid object into raster and assign project system</h5>
<p>The following code chunk converts grid object into raster using raster function of raster package</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>kde_airbnb0721SG_bw_raster</span> <span class='op'>&lt;-</span> <span class='fu'>raster</span><span class='op'>(</span><span class='va'>gridded_kde_airbnb0721SG_bw</span><span class='op'>)</span>
<span class='fu'>projection</span><span class='op'>(</span><span class='va'>kde_airbnb0721SG_bw_raster</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'>CRS</span><span class='op'>(</span><span class='st'>"+init=EPSG:3414"</span><span class='op'>)</span>
<span class='va'>kde_airbnb0721SG_bw_raster</span>
</code></pre>
</div>
</details>
</div>
<h4 id="comparison-between-airbnb0619-and-airbnb0721">6.1.1.2 Comparison between Airbnb0619 and Airbnb0721</h4>
<h5 id="kde-map-comparison-1">6.1.1.2.1 KDE Map Comparison</h5>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span><span class='op'>(</span>mfrow<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_airbnb0619SG_bw.km</span>, main <span class='op'>=</span> <span class='st'>"Airbnb 2019"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_airbnb0721SG_bw.km</span>, main <span class='op'>=</span> <span class='st'>"Airbnb 2021"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>From the KDE map, the south-east region still have higher density in 2021. However, we notice the density of Airbnb have reduced as seen from the scale. It reduced from range 0-1500 in 2019 to range 0-1000 in 2021. We can conclude that Covid-19 did impact the Airbnb listing in Singapore from 2019 to 2021.</p>
<h4 id="comparison-between-airbnb0619-and-airbnb0721-by-room-type">6.1.1.3 Comparison between Airbnb0619 and Airbnb0721 by Room Type</h4>
<h5 id="data-wrangling">6.1.1.3.1 Data Wrangling</h5>
<h6 id="determine-the-unique-room-type">6.1.1.3.1.1 Determine the unique room type</h6>
<p>The following code checks the unique room type using unique features of base R</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>airbnb0619_sf</span><span class='op'>$</span><span class='va'>room_type</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>We have determined that the unique room types are Private room, Entire home/apt and Shared room for Airbnb 2021.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>airbnb0721_sf</span><span class='op'>$</span><span class='va'>room_type</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>We have determined that the unique room types are Private room, Entire home/apt, Shared room and Hotel room for Airbnb 2021.</p>
<h6 id="filter-each-room-type-from-spatialpointsdata-frama">6.1.1.3.1.2 Filter each room type from SpatialPointsData Frama</h6>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>airbnb0619_pte</span> <span class='op'>=</span> <span class='va'>airbnb0619</span><span class='op'>[</span><span class='va'>airbnb0619</span><span class='op'>@</span><span class='va'>data</span><span class='op'>$</span><span class='va'>room_type</span> <span class='op'>==</span> <span class='st'>"Private room"</span>,<span class='op'>]</span>
<span class='va'>airbnb0619_ent</span> <span class='op'>=</span> <span class='va'>airbnb0619</span><span class='op'>[</span><span class='va'>airbnb0619</span><span class='op'>@</span><span class='va'>data</span><span class='op'>$</span><span class='va'>room_type</span> <span class='op'>==</span> <span class='st'>"Entire home/apt"</span>,<span class='op'>]</span>
<span class='va'>airbnb0619_sh</span> <span class='op'>=</span> <span class='va'>airbnb0619</span><span class='op'>[</span><span class='va'>airbnb0619</span><span class='op'>@</span><span class='va'>data</span><span class='op'>$</span><span class='va'>room_type</span> <span class='op'>==</span> <span class='st'>"Shared room"</span>,<span class='op'>]</span>
<span class='va'>airbnb0721_pte</span> <span class='op'>=</span> <span class='va'>airbnb0721</span><span class='op'>[</span><span class='va'>airbnb0721</span><span class='op'>@</span><span class='va'>data</span><span class='op'>$</span><span class='va'>room_type</span> <span class='op'>==</span> <span class='st'>"Private room"</span>,<span class='op'>]</span>
<span class='va'>airbnb0721_ent</span> <span class='op'>=</span> <span class='va'>airbnb0721</span><span class='op'>[</span><span class='va'>airbnb0721</span><span class='op'>@</span><span class='va'>data</span><span class='op'>$</span><span class='va'>room_type</span> <span class='op'>==</span> <span class='st'>"Entire home/apt"</span>,<span class='op'>]</span>
<span class='va'>airbnb0721_sh</span> <span class='op'>=</span> <span class='va'>airbnb0721</span><span class='op'>[</span><span class='va'>airbnb0721</span><span class='op'>@</span><span class='va'>data</span><span class='op'>$</span><span class='va'>room_type</span> <span class='op'>==</span> <span class='st'>"Shared room"</span>,<span class='op'>]</span>
<span class='va'>airbnb0721_ht</span> <span class='op'>=</span> <span class='va'>airbnb0721</span><span class='op'>[</span><span class='va'>airbnb0721</span><span class='op'>@</span><span class='va'>data</span><span class='op'>$</span><span class='va'>room_type</span> <span class='op'>==</span> <span class='st'>"Hotel room"</span>,<span class='op'>]</span>
</code></pre>
</div>
</details>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>airbnb0721_sh</span>
</code></pre>
</div>
</details>
</div>
<p>Notice that the data are in SpatialPointsData Frame format</p>
<h6 id="converting-the-spatial-class-into-generic-sp-format-1">6.1.1.3.1.3 Converting the Spatial* class into generic sp format</h6>
<p>Next, we will convert Spatial* classes into Spatial object so that we can convert it into ppp object.</p>
<p>The following code chunk converts Spatial* classes into generic sp format using as function which sets the classes to their respective sp format.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>airbnb0619_pte_sp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>airbnb0619_pte</span>, <span class='st'>"SpatialPoints"</span><span class='op'>)</span>
<span class='va'>airbnb0619_ent_sp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>airbnb0619_ent</span>, <span class='st'>"SpatialPoints"</span><span class='op'>)</span>
<span class='va'>airbnb0619_sh_sp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>airbnb0619_sh</span>, <span class='st'>"SpatialPoints"</span><span class='op'>)</span>
<span class='va'>airbnb0721_pte_sp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>airbnb0721_pte</span>, <span class='st'>"SpatialPoints"</span><span class='op'>)</span>
<span class='va'>airbnb0721_ent_sp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>airbnb0721_ent</span>, <span class='st'>"SpatialPoints"</span><span class='op'>)</span>
<span class='va'>airbnb0721_sh_sp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>airbnb0721_sh</span>, <span class='st'>"SpatialPoints"</span><span class='op'>)</span>
<span class='va'>airbnb0721_ht_sp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>airbnb0721_ht</span>, <span class='st'>"SpatialPoints"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<h6 id="converting-the-generic-sp-format-into-spatstats-ppp-format-1">6.1.1.3.1.4 Converting the generic sp format into spatstat’s ppp format</h6>
<p>We will next convert the spatial data into spatstat’s ppp format.</p>
<p>The following code chunk converts spatial data into spatstat’s ppp format using as function.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>airbnb0619_pte_ppp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>airbnb0619_pte_sp</span>, <span class='st'>"ppp"</span><span class='op'>)</span>
<span class='va'>airbnb0619_ent_ppp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>airbnb0619_ent_sp</span>, <span class='st'>"ppp"</span><span class='op'>)</span>
<span class='va'>airbnb0619_sh_ppp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>airbnb0619_sh_sp</span>, <span class='st'>"ppp"</span><span class='op'>)</span>
<span class='va'>airbnb0721_pte_ppp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>airbnb0721_pte_sp</span>, <span class='st'>"ppp"</span><span class='op'>)</span>
<span class='va'>airbnb0721_ent_ppp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>airbnb0721_ent_sp</span>, <span class='st'>"ppp"</span><span class='op'>)</span>
<span class='va'>airbnb0721_sh_ppp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>airbnb0721_sh_sp</span>, <span class='st'>"ppp"</span><span class='op'>)</span>
<span class='va'>airbnb0721_ht_ppp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>airbnb0721_ht_sp</span>, <span class='st'>"ppp"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<h6 id="check-for-duplicates-in-each-ppps-objects">6.1.1.3.1.5 Check for duplicates in each ppp’s objects</h6>
<p>The following code chunk use any and duplicated function of base R package to check for duplicates, and sum up the count of duplicated points using sum function of base R package and multiplicity function of spatstat package.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/duplicated.html'>duplicated</a></span><span class='op'>(</span><span class='va'>airbnb0619_pte_ppp</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='fu'>multiplicity</span><span class='op'>(</span><span class='va'>airbnb0619_pte_ppp</span><span class='op'>)</span> <span class='op'>&gt;</span> <span class='fl'>1</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/duplicated.html'>duplicated</a></span><span class='op'>(</span><span class='va'>airbnb0619_ent_ppp</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='fu'>multiplicity</span><span class='op'>(</span><span class='va'>airbnb0619_ent_ppp</span><span class='op'>)</span> <span class='op'>&gt;</span> <span class='fl'>1</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/duplicated.html'>duplicated</a></span><span class='op'>(</span><span class='va'>airbnb0619_sh_ppp</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='fu'>multiplicity</span><span class='op'>(</span><span class='va'>airbnb0619_sh_ppp</span><span class='op'>)</span> <span class='op'>&gt;</span> <span class='fl'>1</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/duplicated.html'>duplicated</a></span><span class='op'>(</span><span class='va'>airbnb0721_pte_ppp</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='fu'>multiplicity</span><span class='op'>(</span><span class='va'>airbnb0721_pte_ppp</span><span class='op'>)</span> <span class='op'>&gt;</span> <span class='fl'>1</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/duplicated.html'>duplicated</a></span><span class='op'>(</span><span class='va'>airbnb0721_ent_ppp</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='fu'>multiplicity</span><span class='op'>(</span><span class='va'>airbnb0721_ent_ppp</span><span class='op'>)</span> <span class='op'>&gt;</span> <span class='fl'>1</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/duplicated.html'>duplicated</a></span><span class='op'>(</span><span class='va'>airbnb0721_sh_ppp</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='fu'>multiplicity</span><span class='op'>(</span><span class='va'>airbnb0721_sh_ppp</span><span class='op'>)</span> <span class='op'>&gt;</span> <span class='fl'>1</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/duplicated.html'>duplicated</a></span><span class='op'>(</span><span class='va'>airbnb0721_ht_ppp</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='fu'>multiplicity</span><span class='op'>(</span><span class='va'>airbnb0721_ht_ppp</span><span class='op'>)</span> <span class='op'>&gt;</span> <span class='fl'>1</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<h6 id="handling-duplicates-1">6.1.1.3.1.6 Handling Duplicates</h6>
<p>We will use jittering to handle duplicates so that we will not lose useful points. Jittering adds a small perturbation to the duplicated points so that they do not occupy the exact same space.</p>
<p>The following code chunk uses rjitter function of spatstat to jitter the ppp object with duplicates.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>airbnb0619_ent_ppp_jit</span> <span class='op'>&lt;-</span> <span class='fu'>rjitter</span><span class='op'>(</span><span class='va'>airbnb0619_ent_ppp</span>, 
                             retry<span class='op'>=</span><span class='cn'>TRUE</span>, 
                             nsim<span class='op'>=</span><span class='fl'>1</span>, 
                             drop<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>

<span class='va'>airbnb0619_sh_ppp_jit</span> <span class='op'>&lt;-</span> <span class='fu'>rjitter</span><span class='op'>(</span><span class='va'>airbnb0619_sh_ppp</span>, 
                             retry<span class='op'>=</span><span class='cn'>TRUE</span>, 
                             nsim<span class='op'>=</span><span class='fl'>1</span>, 
                             drop<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>

<span class='va'>airbnb0721_pte_ppp_jit</span> <span class='op'>&lt;-</span> <span class='fu'>rjitter</span><span class='op'>(</span><span class='va'>airbnb0721_pte_ppp</span>, 
                             retry<span class='op'>=</span><span class='cn'>TRUE</span>, 
                             nsim<span class='op'>=</span><span class='fl'>1</span>, 
                             drop<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>

<span class='va'>airbnb0721_ent_ppp_jit</span> <span class='op'>&lt;-</span> <span class='fu'>rjitter</span><span class='op'>(</span><span class='va'>airbnb0721_ent_ppp</span>, 
                             retry<span class='op'>=</span><span class='cn'>TRUE</span>, 
                             nsim<span class='op'>=</span><span class='fl'>1</span>, 
                             drop<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>

<span class='va'>airbnb0721_sh_ppp_jit</span> <span class='op'>&lt;-</span> <span class='fu'>rjitter</span><span class='op'>(</span><span class='va'>airbnb0721_sh_ppp</span>, 
                             retry<span class='op'>=</span><span class='cn'>TRUE</span>, 
                             nsim<span class='op'>=</span><span class='fl'>1</span>, 
                             drop<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>

<span class='va'>airbnb0721_ht_ppp_jit</span> <span class='op'>&lt;-</span> <span class='fu'>rjitter</span><span class='op'>(</span><span class='va'>airbnb0721_ht_ppp</span>, 
                             retry<span class='op'>=</span><span class='cn'>TRUE</span>, 
                             nsim<span class='op'>=</span><span class='fl'>1</span>, 
                             drop<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<h6 id="check-if-duplicates-still-exist-1">6.1.1.3.1.7 Check if duplicates still exist</h6>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/duplicated.html'>duplicated</a></span><span class='op'>(</span><span class='va'>airbnb0619_ent_ppp_jit</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='fu'>multiplicity</span><span class='op'>(</span><span class='va'>airbnb0619_ent_ppp_jit</span><span class='op'>)</span> <span class='op'>&gt;</span> <span class='fl'>1</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/duplicated.html'>duplicated</a></span><span class='op'>(</span><span class='va'>airbnb0619_sh_ppp_jit</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='fu'>multiplicity</span><span class='op'>(</span><span class='va'>airbnb0619_sh_ppp_jit</span><span class='op'>)</span> <span class='op'>&gt;</span> <span class='fl'>1</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/duplicated.html'>duplicated</a></span><span class='op'>(</span><span class='va'>airbnb0721_pte_ppp_jit</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='fu'>multiplicity</span><span class='op'>(</span><span class='va'>airbnb0721_pte_ppp_jit</span><span class='op'>)</span> <span class='op'>&gt;</span> <span class='fl'>1</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/duplicated.html'>duplicated</a></span><span class='op'>(</span><span class='va'>airbnb0721_ent_ppp_jit</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='fu'>multiplicity</span><span class='op'>(</span><span class='va'>airbnb0721_ent_ppp_jit</span><span class='op'>)</span> <span class='op'>&gt;</span> <span class='fl'>1</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/duplicated.html'>duplicated</a></span><span class='op'>(</span><span class='va'>airbnb0721_sh_ppp_jit</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='fu'>multiplicity</span><span class='op'>(</span><span class='va'>airbnb0721_sh_ppp_jit</span><span class='op'>)</span> <span class='op'>&gt;</span> <span class='fl'>1</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/duplicated.html'>duplicated</a></span><span class='op'>(</span><span class='va'>airbnb0721_ht_ppp_jit</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='fu'>multiplicity</span><span class='op'>(</span><span class='va'>airbnb0721_ht_ppp_jit</span><span class='op'>)</span> <span class='op'>&gt;</span> <span class='fl'>1</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>We can confirm that there are no duplicated points after jittering.</p>
<h6 id="combining-point-events-object-and-owin-object-1">6.1.1.3.1.8 Combining point events object and owin object</h6>
<p>The following code chunk combines the point objects with the owin object into one ppp object class.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>airbnb0619SG_pte_ppp</span> <span class='op'>=</span> <span class='va'>airbnb0619_pte_ppp</span><span class='op'>[</span><span class='va'>sg_owin</span><span class='op'>]</span>
<span class='va'>airbnb0619SG_ent_ppp</span> <span class='op'>=</span> <span class='va'>airbnb0619_ent_ppp_jit</span><span class='op'>[</span><span class='va'>sg_owin</span><span class='op'>]</span>
<span class='va'>airbnb0619SG_sh_ppp</span> <span class='op'>=</span> <span class='va'>airbnb0619_sh_ppp_jit</span><span class='op'>[</span><span class='va'>sg_owin</span><span class='op'>]</span>
<span class='va'>airbnb0721SG_pte_ppp</span> <span class='op'>=</span> <span class='va'>airbnb0721_pte_ppp_jit</span><span class='op'>[</span><span class='va'>sg_owin</span><span class='op'>]</span>
<span class='va'>airbnb0721SG_ent_ppp</span> <span class='op'>=</span> <span class='va'>airbnb0721_ent_ppp_jit</span><span class='op'>[</span><span class='va'>sg_owin</span><span class='op'>]</span>
<span class='va'>airbnb0721SG_sh_ppp</span> <span class='op'>=</span> <span class='va'>airbnb0721_sh_ppp_jit</span><span class='op'>[</span><span class='va'>sg_owin</span><span class='op'>]</span>
<span class='va'>airbnb0721SG_ht_ppp</span> <span class='op'>=</span> <span class='va'>airbnb0721_ht_ppp_jit</span><span class='op'>[</span><span class='va'>sg_owin</span><span class='op'>]</span>
</code></pre>
</div>
</details>
</div>
<h6 id="rescale-kde-values-4">6.1.1.3.1.9 Rescale KDE values</h6>
<p>The following code chunk rescale the KDE value of mrtlrtSG_ppp using rescale function of spatstat from meter to kilometer.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>airbnb0619SG_pte_ppp.km</span> <span class='op'>&lt;-</span> <span class='fu'>rescale</span><span class='op'>(</span><span class='va'>airbnb0619SG_pte_ppp</span>, <span class='fl'>1000</span>, <span class='st'>"km"</span><span class='op'>)</span>
<span class='va'>airbnb0619SG_ent_ppp.km</span> <span class='op'>&lt;-</span> <span class='fu'>rescale</span><span class='op'>(</span><span class='va'>airbnb0619SG_ent_ppp</span>, <span class='fl'>1000</span>, <span class='st'>"km"</span><span class='op'>)</span>
<span class='va'>airbnb0619SG_sh_ppp.km</span> <span class='op'>&lt;-</span> <span class='fu'>rescale</span><span class='op'>(</span><span class='va'>airbnb0619SG_sh_ppp</span>, <span class='fl'>1000</span>, <span class='st'>"km"</span><span class='op'>)</span>
<span class='va'>airbnb0721SG_pte_ppp.km</span> <span class='op'>&lt;-</span> <span class='fu'>rescale</span><span class='op'>(</span><span class='va'>airbnb0721SG_pte_ppp</span>, <span class='fl'>1000</span>, <span class='st'>"km"</span><span class='op'>)</span>
<span class='va'>airbnb0721SG_ent_ppp.km</span> <span class='op'>&lt;-</span> <span class='fu'>rescale</span><span class='op'>(</span><span class='va'>airbnb0721SG_ent_ppp</span>, <span class='fl'>1000</span>, <span class='st'>"km"</span><span class='op'>)</span>
<span class='va'>airbnb0721SG_sh_ppp.km</span> <span class='op'>&lt;-</span> <span class='fu'>rescale</span><span class='op'>(</span><span class='va'>airbnb0721SG_sh_ppp</span>, <span class='fl'>1000</span>, <span class='st'>"km"</span><span class='op'>)</span>
<span class='va'>airbnb0721SG_ht_ppp.km</span> <span class='op'>&lt;-</span> <span class='fu'>rescale</span><span class='op'>(</span><span class='va'>airbnb0721SG_ht_ppp</span>, <span class='fl'>1000</span>, <span class='st'>"km"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<h6 id="kde">6.1.1.3.1.9 KDE</h6>
<ol type="1">
<li>The following code chunk computes kernel density using density function of spatstat package.</li>
<li>The code first takes in the ppp object variable in km.</li>
<li>bw.diggle automatic bandwidth method to detect a tight cluster</li>
<li>smoothing kernel is set to default gaussian method</li>
</ol>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>kde_airbnb0619SG_pte_bw.km</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>airbnb0619SG_pte_ppp.km</span>,
                              sigma<span class='op'>=</span><span class='va'>bw.diggle</span>,
                              edge<span class='op'>=</span><span class='cn'>TRUE</span>,
                            kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span>

<span class='va'>kde_airbnb0619SG_ent_bw.km</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>airbnb0619SG_ent_ppp.km</span>,
                              sigma<span class='op'>=</span><span class='va'>bw.diggle</span>,
                              edge<span class='op'>=</span><span class='cn'>TRUE</span>,
                            kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span>

<span class='va'>kde_airbnb0619SG_sh_bw.km</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>airbnb0619SG_sh_ppp.km</span>,
                              sigma<span class='op'>=</span><span class='va'>bw.diggle</span>,
                              edge<span class='op'>=</span><span class='cn'>TRUE</span>,
                            kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span>

<span class='va'>kde_airbnb0721SG_pte_bw.km</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>airbnb0721SG_pte_ppp.km</span>,
                              sigma<span class='op'>=</span><span class='va'>bw.diggle</span>,
                              edge<span class='op'>=</span><span class='cn'>TRUE</span>,
                            kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span>

<span class='va'>kde_airbnb0721SG_ent_bw.km</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>airbnb0721SG_ent_ppp.km</span>,
                              sigma<span class='op'>=</span><span class='va'>bw.diggle</span>,
                              edge<span class='op'>=</span><span class='cn'>TRUE</span>,
                            kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span>

<span class='va'>kde_airbnb0721SG_sh_bw.km</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>airbnb0721SG_sh_ppp.km</span>,
                              sigma<span class='op'>=</span><span class='va'>bw.diggle</span>,
                              edge<span class='op'>=</span><span class='cn'>TRUE</span>,
                            kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span>

<span class='va'>kde_airbnb0721SG_ht_bw.km</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>airbnb0721SG_ht_ppp.km</span>,
                              sigma<span class='op'>=</span><span class='va'>bw.diggle</span>,
                              edge<span class='op'>=</span><span class='cn'>TRUE</span>,
                            kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<h6 id="convert-kde-output-into-grid-object-4">6.1.1.3.1.10 Convert KDE output into grid object</h6>
<p>The following code chunk converts KDE output into grid object using as.SpatialGridDataFrame.im function of maptools</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>gridded_kde_airbnb0619SG_pte_bw</span> <span class='op'>&lt;-</span> <span class='fu'>as.SpatialGridDataFrame.im</span><span class='op'>(</span><span class='va'>kde_airbnb0619SG_pte_bw.km</span><span class='op'>)</span>
<span class='va'>gridded_kde_airbnb0619SG_ent_bw</span> <span class='op'>&lt;-</span> <span class='fu'>as.SpatialGridDataFrame.im</span><span class='op'>(</span><span class='va'>kde_airbnb0619SG_ent_bw.km</span><span class='op'>)</span>
<span class='va'>gridded_kde_airbnb0619SG_sh_bw</span> <span class='op'>&lt;-</span> <span class='fu'>as.SpatialGridDataFrame.im</span><span class='op'>(</span><span class='va'>kde_airbnb0619SG_sh_bw.km</span><span class='op'>)</span>
<span class='va'>gridded_kde_airbnb0721SG_pte_bw</span> <span class='op'>&lt;-</span> <span class='fu'>as.SpatialGridDataFrame.im</span><span class='op'>(</span><span class='va'>kde_airbnb0721SG_pte_bw.km</span><span class='op'>)</span>
<span class='va'>gridded_kde_airbnb0721SG_ent_bw</span> <span class='op'>&lt;-</span> <span class='fu'>as.SpatialGridDataFrame.im</span><span class='op'>(</span><span class='va'>kde_airbnb0721SG_ent_bw.km</span><span class='op'>)</span>
<span class='va'>gridded_kde_airbnb0721SG_sh_bw</span> <span class='op'>&lt;-</span> <span class='fu'>as.SpatialGridDataFrame.im</span><span class='op'>(</span><span class='va'>kde_airbnb0721SG_sh_bw.km</span><span class='op'>)</span>
<span class='va'>gridded_kde_airbnb0721SG_ht_bw</span> <span class='op'>&lt;-</span> <span class='fu'>as.SpatialGridDataFrame.im</span><span class='op'>(</span><span class='va'>kde_airbnb0721SG_ht_bw.km</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<h6 id="convert-grid-object-into-raster-and-assign-project-system-4">6.1.1.3.1.11 Convert grid object into raster and assign project system</h6>
<p>The following code chunk converts grid object into raster using raster function of raster package</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>kde_airbnb0619SG_pte_bw_raster</span> <span class='op'>&lt;-</span> <span class='fu'>raster</span><span class='op'>(</span><span class='va'>gridded_kde_airbnb0619SG_pte_bw</span><span class='op'>)</span>
<span class='fu'>projection</span><span class='op'>(</span><span class='va'>kde_airbnb0619SG_pte_bw_raster</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'>CRS</span><span class='op'>(</span><span class='st'>"+init=EPSG:3414"</span><span class='op'>)</span>

<span class='va'>kde_airbnb0619SG_ent_bw_raster</span> <span class='op'>&lt;-</span> <span class='fu'>raster</span><span class='op'>(</span><span class='va'>gridded_kde_airbnb0619SG_ent_bw</span><span class='op'>)</span>
<span class='fu'>projection</span><span class='op'>(</span><span class='va'>kde_airbnb0619SG_ent_bw_raster</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'>CRS</span><span class='op'>(</span><span class='st'>"+init=EPSG:3414"</span><span class='op'>)</span>

<span class='va'>kde_airbnb0619SG_sh_bw_raster</span> <span class='op'>&lt;-</span> <span class='fu'>raster</span><span class='op'>(</span><span class='va'>gridded_kde_airbnb0619SG_sh_bw</span><span class='op'>)</span>
<span class='fu'>projection</span><span class='op'>(</span><span class='va'>kde_airbnb0619SG_sh_bw_raster</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'>CRS</span><span class='op'>(</span><span class='st'>"+init=EPSG:3414"</span><span class='op'>)</span>

<span class='va'>kde_airbnb0721SG_pte_bw_raster</span> <span class='op'>&lt;-</span> <span class='fu'>raster</span><span class='op'>(</span><span class='va'>gridded_kde_airbnb0721SG_pte_bw</span><span class='op'>)</span>
<span class='fu'>projection</span><span class='op'>(</span><span class='va'>kde_airbnb0721SG_pte_bw_raster</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'>CRS</span><span class='op'>(</span><span class='st'>"+init=EPSG:3414"</span><span class='op'>)</span>

<span class='va'>kde_airbnb0721SG_ent_bw_raster</span> <span class='op'>&lt;-</span> <span class='fu'>raster</span><span class='op'>(</span><span class='va'>gridded_kde_airbnb0721SG_ent_bw</span><span class='op'>)</span>
<span class='fu'>projection</span><span class='op'>(</span><span class='va'>kde_airbnb0721SG_ent_bw_raster</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'>CRS</span><span class='op'>(</span><span class='st'>"+init=EPSG:3414"</span><span class='op'>)</span>

<span class='va'>kde_airbnb0721SG_sh_bw_raster</span> <span class='op'>&lt;-</span> <span class='fu'>raster</span><span class='op'>(</span><span class='va'>gridded_kde_airbnb0721SG_sh_bw</span><span class='op'>)</span>
<span class='fu'>projection</span><span class='op'>(</span><span class='va'>kde_airbnb0721SG_sh_bw_raster</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'>CRS</span><span class='op'>(</span><span class='st'>"+init=EPSG:3414"</span><span class='op'>)</span>

<span class='va'>kde_airbnb0721SG_ht_bw_raster</span> <span class='op'>&lt;-</span> <span class='fu'>raster</span><span class='op'>(</span><span class='va'>gridded_kde_airbnb0721SG_ht_bw</span><span class='op'>)</span>
<span class='fu'>projection</span><span class='op'>(</span><span class='va'>kde_airbnb0721SG_ht_bw_raster</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'>CRS</span><span class='op'>(</span><span class='st'>"+init=EPSG:3414"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<h5 id="kde-map-comparison-by-room-type-and-year">6.1.1.3.2 KDE Map Comparison by Room type and Year</h5>
<p>The following code chunks plot KDE map of Airbnb 2019 and 2021 by each room types side by side.</p>
<h6 id="private-room">6.1.1.3.2.1 Private Room</h6>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span><span class='op'>(</span>mfrow<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_airbnb0619SG_pte_bw.km</span>, main <span class='op'>=</span> <span class='st'>"Airbnb 2019 Private Room"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_airbnb0721SG_pte_bw.km</span>, main <span class='op'>=</span> <span class='st'>"Airbnb 2021 Private Room"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>Analysis: There is a slight decrease in private room airbnb from 2019 to 2021 as seen in 2021 that there are lesser red point. The scale of 2019 to 2021 descreased slightly.</p>
<h6 id="entire-homeapt">6.1.1.3.2.2 Entire Home/Apt</h6>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span><span class='op'>(</span>mfrow<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_airbnb0619SG_ent_bw.km</span>, main <span class='op'>=</span> <span class='st'>"Airbnb 2019 Entire Home/Apt"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_airbnb0721SG_ent_bw.km</span>, main <span class='op'>=</span> <span class='st'>"Airbnb 2021 Entire Home/Apt"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>Analysis: The map shows high density of airbnb in south-east region near central for both 2019 and 2021 as seen from the red marks on both map. However, there is a huge decrease in the number of Entire Home/Apt airbnb from 2019 to 2021 as seen on the scale. It decreased from 0-1000 in 2019 to 0-250 in 2021.</p>
<h6 id="shared-room">6.1.1.3.2.3 Shared Room</h6>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span><span class='op'>(</span>mfrow<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_airbnb0619SG_sh_bw.km</span>, main <span class='op'>=</span> <span class='st'>"Airbnb 2019 Shared Room"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_airbnb0721SG_sh_bw.km</span>, main <span class='op'>=</span> <span class='st'>"Airbnb 2021 Shared Room"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>Analysis: The map shows high density of airbnb in south-east region near central for both 2019 and 2021 as seen from the red marks on both map. However, there is a significant decrease in the number of Shared Room from 2019 to 2021 as seen on the scale. It ranges from 0-400 in 2019 and decrease to 0-80 in 2021.</p>
<h6 id="hotel-room">6.1.1.3.2.4 Hotel Room</h6>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_airbnb0721SG_ht_bw.km</span>, main <span class='op'>=</span> <span class='st'>"Airbnb 2021 Hotel Room"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>Analyis: Hotel room is a new room type in 2021.</p>
<p>Overall, we can conclude that Covid-19 are likely to have impact on the type of Airbnb room listed in Singapore from 2019 to 2021. It is seen from the significant decrease in Entire Home/Apt and Shared Room type, and this is likely because the owner do not wish to rent out the house anymore, or that there are lesser to no tourist. In addition, there is a new room type which is the Hotel Room, and this because hotel are required for quarantine purpose.</p>
<h5 id="exploration-with-openstreetmap-1">6.1.1.3.3 Exploration with Openstreetmap</h5>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>tmap_mode</span><span class='op'>(</span><span class='st'>"view"</span><span class='op'>)</span>

<span class='va'>airbnb0619map</span> <span class='op'>&lt;-</span> <span class='fu'>tm_basemap</span><span class='op'>(</span><span class='st'>"OpenStreetMap"</span><span class='op'>)</span><span class='op'>+</span>
                  <span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>airbnb0619_sf</span><span class='op'>)</span> <span class='op'>+</span>
                  <span class='fu'>tm_dots</span><span class='op'>(</span>col <span class='op'>=</span> <span class='st'>'room_type'</span>, palette<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span>entire<span class='op'>=</span><span class='st'>'blue'</span>, private<span class='op'>=</span><span class='st'>'red'</span>, shared<span class='op'>=</span><span class='st'>'green'</span><span class='op'>)</span>, size <span class='op'>=</span> <span class='fl'>0.02</span><span class='op'>)</span>

<span class='va'>airbnb0721map</span> <span class='op'>&lt;-</span> <span class='fu'>tm_basemap</span><span class='op'>(</span><span class='st'>"OpenStreetMap"</span><span class='op'>)</span><span class='op'>+</span>
                  <span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>airbnb0721_sf</span><span class='op'>)</span> <span class='op'>+</span>
                  <span class='fu'>tm_dots</span><span class='op'>(</span>col <span class='op'>=</span> <span class='st'>'room_type'</span>, palette<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span>entire<span class='op'>=</span><span class='st'>'blue'</span>, hotel<span class='op'>=</span><span class='st'>'yellow'</span>, private<span class='op'>=</span><span class='st'>'red'</span>, shared<span class='op'>=</span><span class='st'>'green'</span><span class='op'>)</span>, size <span class='op'>=</span> <span class='fl'>0.02</span><span class='op'>)</span>

<span class='fu'>tmap_arrange</span><span class='op'>(</span><span class='va'>airbnb0619map</span>, <span class='va'>airbnb0721map</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>tmap_mode</span><span class='op'>(</span><span class='st'>"plot"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<h2 id="second-order-spatial-point-patterns-analysis-1">6.2 Second-order Spatial Point Patterns Analysis</h2>
<h3 id="nearest-neighbour-analysis-continue-from-here">6.2.1 Nearest Neighbour Analysis (CONTINUE FROM HERE)</h3>
<h4 id="hypothesis-5">6.2.1.1 Hypothesis</h4>
<p>we will perform the Clark-Evans test of aggregation for a spatial point pattern by using clarkevans.test() of statspat.</p>
<p>Test Hypothesis:</p>
<p>H0 = The distribution of airbnb are randomly distributed.</p>
<p>H1 = The distribution of airbnb are not randomly distributed.</p>
<p>The 95% confident interval will be used.</p>
<h4 id="testing-and-analysis-5">6.2.1.2 Testing and Analysis</h4>
<h5 id="testing-spatial-point-patterns-using-clark-and-evans-test-1">6.2.1.2.1 Testing spatial point patterns using Clark and Evans Test</h5>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>clarkevans.test</span><span class='op'>(</span><span class='va'>airbnb0619SG_ppp</span>,
                correction<span class='op'>=</span><span class='st'>"none"</span>,
                clipregion<span class='op'>=</span><span class='st'>"sg_owin"</span>,
                alternative<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"clustered"</span><span class='op'>)</span>,
                nsim<span class='op'>=</span><span class='fl'>99</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>Clark-Evans test No edge correction Monte Carlo test based on 99 simulations of CSR with fixed n</p>
<p>data: airbnb0619SG_ppp R = 0.36169, p-value = 0.01 alternative hypothesis: clustered (R &lt; 1)</p>
<h5 id="clark-and-evans-test-kallang-planning-area-1">5.2.1.2.2 Clark and Evans Test: Kallang planning area</h5>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>clarkevans.test</span><span class='op'>(</span><span class='va'>airbnb0619_kl_ppp</span>,
                correction<span class='op'>=</span><span class='st'>"none"</span>,
                clipregion<span class='op'>=</span><span class='cn'>NULL</span>,
                alternative<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"two.sided"</span><span class='op'>)</span>,
                nsim<span class='op'>=</span><span class='fl'>999</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>Analysis:</p>
<h5 id="clark-and-evans-test-river-valley-planning-area-1">5.2.1.2.3 Clark and Evans Test: River Valley planning area</h5>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>clarkevans.test</span><span class='op'>(</span><span class='va'>airbnb0619_rv_ppp</span>,
                correction<span class='op'>=</span><span class='st'>"none"</span>,
                clipregion<span class='op'>=</span><span class='cn'>NULL</span>,
                alternative<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"two.sided"</span><span class='op'>)</span>,
                nsim<span class='op'>=</span><span class='fl'>999</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>Analysis:</p>
<h5 id="clark-and-evans-test-novena-planning-area-1">5.2.1.2.4 Clark and Evans Test: Novena planning area</h5>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>clarkevans.test</span><span class='op'>(</span><span class='va'>airbnb0619_nv_ppp</span>,
                correction<span class='op'>=</span><span class='st'>"none"</span>,
                clipregion<span class='op'>=</span><span class='cn'>NULL</span>,
                alternative<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"two.sided"</span><span class='op'>)</span>,
                nsim<span class='op'>=</span><span class='fl'>999</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>Analysis:</p>
<h5 id="clark-and-evans-test-rochor-planning-area-1">5.2.1.2.5 Clark and Evans Test: Rochor planning area</h5>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>clarkevans.test</span><span class='op'>(</span><span class='va'>airbnb0619_rc_ppp</span>,
                correction<span class='op'>=</span><span class='st'>"none"</span>,
                clipregion<span class='op'>=</span><span class='cn'>NULL</span>,
                alternative<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"two.sided"</span><span class='op'>)</span>,
                nsim<span class='op'>=</span><span class='fl'>999</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>Analysis:</p>
<h3 id="g-function-1">G-FUNCTION</h3>
<h4 id="hypothesis-6">Hypothesis</h4>
<h4 id="testing-and-analysis-6">Testing and Analysis</h4>
<h3 id="f-function-1">F-FUNCTION</h3>
<h4 id="hypothesis-7">Hypothesis</h4>
<h4 id="testing-and-analysis-7">Testing and Analysis</h4>
<h3 id="k-function-1">K-FUNCTION</h3>
<h4 id="hypothesis-8">Hypothesis</h4>
<h4 id="testing-and-analysis-8">Testing and Analysis</h4>
<h3 id="l-function-1">L-FUNCTION</h3>
<h4 id="hypothesis-9">Hypothesis</h4>
<h4 id="testing-and-analysis-9">Testing and Analysis</h4>
<p>TBC… NOT SURE ### 5.1.2 Kernel density maps analysis on Openstreetmap of Singapore to see possible relationship</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>tmap_mode</span><span class='op'>(</span><span class='st'>"plot"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>Airbnb0619 and Hotel</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>airbnb0619map</span> <span class='op'>&lt;-</span> <span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>kde_airbnb0619SG_bw_raster</span><span class='op'>)</span> <span class='op'>+</span>
                  <span class='fu'>tm_raster</span><span class='op'>(</span><span class='st'>"v"</span>, palette<span class='op'>=</span><span class='st'>"Purples"</span>, colorNA <span class='op'>=</span> <span class='cn'>NULL</span><span class='op'>)</span> <span class='op'>+</span>
                  <span class='fu'>tm_basemap</span><span class='op'>(</span><span class='st'>"OpenStreetMap"</span><span class='op'>)</span>


<span class='va'>hotelsmap</span> <span class='op'>&lt;-</span> <span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>kde_hotelsSG_bw_raster</span><span class='op'>)</span> <span class='op'>+</span>
                  <span class='fu'>tm_raster</span><span class='op'>(</span><span class='st'>"v"</span>, palette<span class='op'>=</span><span class='st'>"Purples"</span>, colorNA <span class='op'>=</span> <span class='cn'>NULL</span>, showNA <span class='op'>=</span> <span class='cn'>NA</span><span class='op'>)</span> <span class='op'>+</span>
                  <span class='fu'>tm_basemap</span><span class='op'>(</span><span class='st'>"OpenStreetMap"</span><span class='op'>)</span> 

<span class='fu'>tmap_arrange</span><span class='op'>(</span><span class='va'>airbnb0619map</span>, <span class='va'>hotelsmap</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>Airbnb0619 and MrtLrt</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>airbnb0619map</span> <span class='op'>&lt;-</span> <span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>kde_airbnb0619SG_bw_raster</span><span class='op'>)</span> <span class='op'>+</span>
                  <span class='fu'>tm_raster</span><span class='op'>(</span><span class='st'>"v"</span>, palette<span class='op'>=</span><span class='st'>"Purples"</span>, colorNA <span class='op'>=</span> <span class='cn'>NULL</span><span class='op'>)</span> <span class='op'>+</span>
                  <span class='fu'>tm_basemap</span><span class='op'>(</span><span class='st'>"OpenStreetMap"</span><span class='op'>)</span>


<span class='va'>mrtlrtmap</span> <span class='op'>&lt;-</span> <span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>kde_mrtlrtSG_bw_raster</span><span class='op'>)</span> <span class='op'>+</span>
                  <span class='fu'>tm_raster</span><span class='op'>(</span><span class='st'>"v"</span>, palette<span class='op'>=</span><span class='st'>"Purples"</span>, colorNA <span class='op'>=</span> <span class='cn'>NULL</span>, showNA <span class='op'>=</span> <span class='cn'>NA</span><span class='op'>)</span> <span class='op'>+</span>
                  <span class='fu'>tm_basemap</span><span class='op'>(</span><span class='st'>"OpenStreetMap"</span><span class='op'>)</span> 

<span class='fu'>tmap_arrange</span><span class='op'>(</span><span class='va'>airbnb0619map</span>, <span class='va'>mrtlrtmap</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>Airbnb0619 and Tourist Attractions</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>airbnb0619map</span> <span class='op'>&lt;-</span> <span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>kde_airbnb0619SG_bw_raster</span><span class='op'>)</span> <span class='op'>+</span>
                  <span class='fu'>tm_raster</span><span class='op'>(</span><span class='st'>"v"</span>, palette<span class='op'>=</span><span class='st'>"Purples"</span>, colorNA <span class='op'>=</span> <span class='cn'>NULL</span><span class='op'>)</span> <span class='op'>+</span>
                  <span class='fu'>tm_basemap</span><span class='op'>(</span><span class='st'>"OpenStreetMap"</span><span class='op'>)</span>


<span class='va'>tourismmap</span> <span class='op'>&lt;-</span> <span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>kde_tourismSG_bw_raster</span><span class='op'>)</span> <span class='op'>+</span>
                  <span class='fu'>tm_raster</span><span class='op'>(</span><span class='st'>"v"</span>, palette<span class='op'>=</span><span class='st'>"Purples"</span>, colorNA <span class='op'>=</span> <span class='cn'>NULL</span>, showNA <span class='op'>=</span> <span class='cn'>NA</span><span class='op'>)</span> <span class='op'>+</span>
                  <span class='fu'>tm_basemap</span><span class='op'>(</span><span class='st'>"OpenStreetMap"</span><span class='op'>)</span> 

<span class='fu'>tmap_arrange</span><span class='op'>(</span><span class='va'>airbnb0619map</span>, <span class='va'>tourismmap</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>tmap_mode</span><span class='op'>(</span><span class='st'>"plot"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<div class="sourceCode" id="cb1"><pre class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
=======
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>tourism_ppp.km</span> <span class='op'>&lt;-</span> <span class='fu'>rescale</span><span class='op'>(</span><span class='va'>tourismSG_ppp</span>, <span class='fl'>1000</span>, <span class='st'>"km"</span><span class='op'>)</span>

<span class='va'>kde_tourismSG_600</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>tourism_ppp.km</span>, sigma<span class='op'>=</span><span class='fl'>0.6</span>, edge<span class='op'>=</span><span class='cn'>TRUE</span>, kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_tourismSG_600</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="takehome-ex02_files/figure-html5/unnamed-chunk-66-1.png" width="624" /></p>
</div>
<h3 id="kernel-density-maps-on-openstreetmap-of-singapore">Kernel density maps on openstreetmap of Singapore</h3>
<h2 id="second-order-spatial-point-patterns-analysis">2. Second-order Spatial Point Patterns Analysis</h2>
<h3 id="null-hypothesis-and-alternative-hypothesis">Null hypothesis and alternative hypothesis</h3>
<h3 id="test">Test</h3>
<h3 id="statistical-conclusions.">Statistical conclusions.</h3>
<h1 id="section-b-impact-of-covid-19">Section B: Impact of COVID-19</h1>
<h2 id="exploratory-spatial-data-analysis-1">3. Exploratory Spatial Data Analysis</h2>
<h2 id="second-order-spatial-point-patterns-analysis-1">4. Second-order Spatial Point Patterns Analysis</h2>
<div class="sourceCode" id="cb38"><pre class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
>>>>>>> parent of 950ef92 (takehome2 update)
<!--radix_placeholder_article_footer-->
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>


<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom"></div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
